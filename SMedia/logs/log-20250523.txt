[22:28:55 DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
[22:28:56 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[22:28:56 DBG] Hosting starting
[22:28:56 INF] User profile is available. Using 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[22:28:56 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-14a3d168-18db-4f02-bf32-5d12a5c3d5f9.xml'.
[22:28:56 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-18e390e9-1029-4eaf-a8ee-1e70e5eef3df.xml'.
[22:28:56 DBG] Found key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9}.
[22:28:56 DBG] Found key {18e390e9-1029-4eaf-a8ee-1e70e5eef3df}.
[22:28:56 DBG] Considering key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} with expiration date 2025-06-01 03:53:05Z as default key.
[22:28:56 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[22:28:56 DBG] Decrypting secret element using Windows DPAPI.
[22:28:56 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[22:28:56 DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
[22:28:56 DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
[22:28:56 DBG] Using key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} as the default key.
[22:28:56 DBG] Key ring with default key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} was loaded during application startup.
[22:28:56 INF] Now listening on: http://localhost:5295
[22:28:56 DBG] Loaded hosting startup assembly SMedia
[22:28:56 INF] Application started. Press Ctrl+C to shut down.
[22:28:56 INF] Hosting environment: Development
[22:28:56 INF] Content root path: E:\hcmue_03_hk02\cn_web\BACK_END\BackEnd-SocialMedia\SMedia
[22:28:56 DBG] Hosting started
[22:28:56 DBG] Connection id "0HNCQ1Q4743CK" received FIN.
[22:28:56 DBG] Connection id "0HNCQ1Q4743CK" accepted.
[22:28:56 DBG] Connection id "0HNCQ1Q4743CK" started.
[22:28:56 DBG] Connection id "0HNCQ1Q4743CK" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:28:56 DBG] Connection id "0HNCQ1Q4743CK" disconnecting.
[22:28:56 DBG] Connection id "0HNCQ1Q4743CK" stopped.
[22:28:57 DBG] Connection id "0HNCQ1Q4743CL" accepted.
[22:28:57 DBG] Connection id "0HNCQ1Q4743CL" started.
[22:28:57 INF] Request starting HTTP/1.1 GET http://localhost:5295/swagger/index.html - null null
[22:28:57 DBG] Wildcard detected, all requests with hosts will be allowed.
[22:28:57 DBG] No candidates found for the request path '/swagger/index.html'
[22:28:57 DBG] Request did not match any endpoints
[22:28:57 DBG] Connection id "0HNCQ1Q4743CL" completed keep alive response.
[22:28:57 DBG] Connection id "0HNCQ1Q4743CL" received FIN.
[22:28:57 DBG] Connection id "0HNCQ1Q4743CL" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:28:57 INF] Request finished HTTP/1.1 GET http://localhost:5295/swagger/index.html - 200 null text/html;charset=utf-8 273.6099ms
[22:28:57 DBG] Connection id "0HNCQ1Q4743CL" disconnecting.
[22:28:57 DBG] Connection id "0HNCQ1Q4743CL" stopped.
[22:28:58 DBG] Connection id "0HNCQ1Q4743CM" accepted.
[22:28:58 DBG] Connection id "0HNCQ1Q4743CM" started.
[22:28:58 INF] Request starting HTTP/1.1 GET http://localhost:5295/swagger/v1/swagger.json - null null
[22:28:58 DBG] No candidates found for the request path '/swagger/v1/swagger.json'
[22:28:58 DBG] Request did not match any endpoints
[22:28:58 DBG] Connection id "0HNCQ1Q4743CM" completed keep alive response.
[22:28:58 INF] Request finished HTTP/1.1 GET http://localhost:5295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 210.5377ms
[22:29:05 DBG] Connection id "0HNCQ1Q4743CM" received FIN.
[22:29:05 DBG] Connection id "0HNCQ1Q4743CM" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:29:05 DBG] Connection id "0HNCQ1Q4743CM" disconnecting.
[22:29:05 DBG] Connection id "0HNCQ1Q4743CM" stopped.
[22:29:24 DBG] Connection id "0HNCQ1Q4743CN" accepted.
[22:29:24 DBG] Connection id "0HNCQ1Q4743CN" started.
[22:29:24 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[22:29:24 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[22:29:24 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:29:24 DBG] The request has an origin header: 'http://localhost:3000'.
[22:29:24 INF] CORS policy execution successful.
[22:29:24 DBG] The request is a preflight request.
[22:29:24 DBG] Connection id "0HNCQ1Q4743CN" completed keep alive response.
[22:29:24 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 53.6411ms
[22:29:24 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 59
[22:29:24 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[22:29:24 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[22:29:24 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:29:24 DBG] The request has an origin header: 'http://localhost:3000'.
[22:29:24 INF] CORS policy execution successful.
[22:29:24 DBG] Static files was skipped as the request already matched an endpoint.
[22:29:24 INF] HTTP POST /api/Authentication/login received from ::1
[22:29:24 DBG] Header: Accept=["*/*"]
[22:29:24 DBG] Header: Connection=["keep-alive"]
[22:29:24 DBG] Header: Host=["localhost:5295"]
[22:29:24 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:29:24 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:29:24 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:29:24 DBG] Header: Content-Type=["application/json"]
[22:29:24 DBG] Header: Origin=["http://localhost:3000"]
[22:29:24 DBG] Header: Referer=["http://localhost:3000/"]
[22:29:24 DBG] Header: Content-Length=["59"]
[22:29:24 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:29:24 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:29:24 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:29:24 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:29:24 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:29:24 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:29:24 DBG] Connection id "0HNCQ1Q4743CN", Request id "0HNCQ1Q4743CN:00000002": started reading request body.
[22:29:24 DBG] Connection id "0HNCQ1Q4743CN", Request id "0HNCQ1Q4743CN:00000002": done reading request body.
[22:29:24 INF] Request Body: {"email":"anh.anhle012345@gmail.com","password":"12345678"}
[22:29:25 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anh.anhle012345@gmail.com",
  "password": "12345678"
}
[22:29:25 DBG] AuthenticationScheme: Bearer was not authenticated.
[22:29:25 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:29:25 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[22:29:25 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:29:25 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:29:25 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:29:25 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:29:25 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[22:29:25 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[22:29:25 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[22:29:25 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[22:29:25 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[22:29:25 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[22:29:25 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[22:29:25 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:29:25 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:29:25 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[22:29:25 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:29:25 INF] Executing action method SMedia.Controllers.AuthenticationController.Login (SMedia) - Validation state: "Valid"
[22:29:29 INF] Executed DbCommand (114ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[22:29:29 INF] Executed action method SMedia.Controllers.AuthenticationController.Login (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4487.5328ms.
[22:29:29 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:29:29 DBG] No information found on request to perform content negotiation.
[22:29:29 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[22:29:29 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:29:29 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.AuthResponse'.
[22:29:29 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 4840.9199ms
[22:29:29 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:29:29 INF] Response (Duration: 4984ms): API: POST /api/Authentication/login
StatusCode: 200
Body:
{
  "Token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI"
}
[22:29:29 INF] HTTP 200 returned for POST /api/Authentication/login
[22:29:29 DBG] Response Body: {"Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI"}
[22:29:29 DBG] Connection id "0HNCQ1Q4743CN" completed keep alive response.
[22:29:30 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 200 null application/json; charset=utf-8 5144.6257ms
[22:30:40 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[22:30:40 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:30:40 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:30:40 DBG] The request has an origin header: 'http://localhost:3000'.
[22:30:40 INF] CORS policy execution successful.
[22:30:40 DBG] The request is a preflight request.
[22:30:40 DBG] Connection id "0HNCQ1Q4743CN" completed keep alive response.
[22:30:40 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 8.3128ms
[22:30:40 DBG] Connection id "0HNCQ1Q4743CO" accepted.
[22:30:40 DBG] Connection id "0HNCQ1Q4743CO" started.
[22:30:40 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[22:30:40 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:30:40 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:30:40 DBG] The request has an origin header: 'http://localhost:3000'.
[22:30:40 INF] CORS policy execution successful.
[22:30:40 DBG] Static files was skipped as the request already matched an endpoint.
[22:30:40 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[22:30:40 DBG] Header: Accept=["*/*"]
[22:30:40 DBG] Header: Connection=["keep-alive"]
[22:30:40 DBG] Header: Host=["localhost:5295"]
[22:30:40 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:30:40 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:30:40 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:30:40 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI"]
[22:30:40 DBG] Header: Cache-Control=["max-age=0"]
[22:30:40 DBG] Header: Origin=["http://localhost:3000"]
[22:30:40 DBG] Header: Referer=["http://localhost:3000/"]
[22:30:40 DBG] Header: Content-Length=["0"]
[22:30:40 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:30:40 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[22:30:40 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:30:40 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:30:40 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[22:30:40 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:30:40 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:30:40 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:30:40 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI
Query Parameters:
  negotiateVersion: 1
[22:30:40 DBG] Successfully validated the token.
[22:30:40 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:30:40 DBG] Authorization was successful.
[22:30:40 INF] Executing endpoint '/hubs/chat/negotiate'
[22:30:40 DBG] New connection 6Apb9hedzFc3b95Go9I2Zw created.
[22:30:40 DBG] Sending negotiation response.
[22:30:40 INF] Executed endpoint '/hubs/chat/negotiate'
[22:30:40 INF] Response (Duration: 56ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "6Apb9hedzFc3b95Go9I2Zw",
  "connectionToken": "CetpvWh09uXVmcwY4hFeIg",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[22:30:40 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[22:30:40 DBG] Response Body: {"negotiateVersion":1,"connectionId":"6Apb9hedzFc3b95Go9I2Zw","connectionToken":"CetpvWh09uXVmcwY4hFeIg","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[22:30:40 DBG] Connection id "0HNCQ1Q4743CO" completed keep alive response.
[22:30:40 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 84.4089ms
[22:30:40 DBG] Connection id "0HNCQ1Q4743CP" accepted.
[22:30:40 DBG] Connection id "0HNCQ1Q4743CP" started.
[22:30:40 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=CetpvWh09uXVmcwY4hFeIg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI - null null
[22:30:40 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[22:30:40 DBG] Request matched endpoint '/hubs/chat'
[22:30:40 DBG] The request has an origin header: 'http://localhost:3000'.
[22:30:40 INF] CORS policy execution successful.
[22:30:40 DBG] Static files was skipped as the request already matched an endpoint.
[22:30:40 INF] HTTP GET /hubs/chat?id=CetpvWh09uXVmcwY4hFeIg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI received from ::1
[22:30:40 DBG] Header: Connection=["Upgrade"]
[22:30:40 DBG] Header: Host=["localhost:5295"]
[22:30:40 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:30:40 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:30:40 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:30:40 DBG] Header: Cache-Control=["no-cache"]
[22:30:40 DBG] Header: Origin=["http://localhost:3000"]
[22:30:41 DBG] Header: Pragma=["no-cache"]
[22:30:41 DBG] Header: Upgrade=["websocket"]
[22:30:41 DBG] Header: Sec-WebSocket-Version=["13"]
[22:30:41 DBG] Header: Sec-WebSocket-Key=["0G0h53/XcYNpzg22+T5PRQ=="]
[22:30:41 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[22:30:41 INF] Request: URL: http://localhost:5295/hubs/chat?id=CetpvWh09uXVmcwY4hFeIg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI
Authenticated: Yes
Query Parameters:
  id: CetpvWh09uXVmcwY4hFeIg
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI
[22:30:41 DBG] Successfully validated the token.
[22:30:41 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:30:41 DBG] Authorization was successful.
[22:30:41 INF] Executing endpoint '/hubs/chat'
[22:30:41 DBG] Establishing new connection.
[22:30:41 DBG] OnConnectedAsync started.
[22:30:41 DBG] Socket opened using Sub-Protocol: 'null'.
[22:30:41 DBG] Found protocol implementation for requested protocol: json.
[22:30:41 DBG] Completed connection handshake. Using HubProtocol 'json'.
[22:30:41 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:30:41 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:30:41 DBG] Connection id "0HNCQ1Q4743CQ" accepted.
[22:30:41 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:30:41 DBG] Connection id "0HNCQ1Q4743CQ" started.
[22:30:41 DBG] The request has an origin header: 'http://localhost:3000'.
[22:30:41 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:30:41 INF] CORS policy execution successful.
[22:30:41 DBG] The request is a preflight request.
[22:30:41 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:30:41 DBG] Connection id "0HNCQ1Q4743CN" completed keep alive response.
[22:30:41 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:30:41 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 14.8227ms
[22:30:41 DBG] The request has an origin header: 'http://localhost:3000'.
[22:30:41 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:30:41 INF] CORS policy execution successful.
[22:30:41 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:30:41 DBG] The request is a preflight request.
[22:30:41 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:30:41 DBG] Connection id "0HNCQ1Q4743CQ" completed keep alive response.
[22:30:41 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:30:41 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 13.5682ms
[22:30:41 DBG] The request has an origin header: 'http://localhost:3000'.
[22:30:41 INF] CORS policy execution successful.
[22:30:41 DBG] Static files was skipped as the request already matched an endpoint.
[22:30:41 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[22:30:41 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:30:41 DBG] Header: Connection=["keep-alive"]
[22:30:41 DBG] Header: Host=["localhost:5295"]
[22:30:41 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:30:41 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:30:41 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:30:41 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI"]
[22:30:41 DBG] Header: Origin=["http://localhost:3000"]
[22:30:41 DBG] Header: Referer=["http://localhost:3000/"]
[22:30:41 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:30:41 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:30:41 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:30:41 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:30:41 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:30:41 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:30:41 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[22:30:41 DBG] Successfully validated the token.
[22:30:41 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:30:41 DBG] Authorization was successful.
[22:30:41 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:30:41 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:30:41 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:30:41 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:30:41 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:30:41 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:30:41 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:30:41 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:30:41 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:30:41 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:30:41 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:30:41 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:30:41 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:30:41 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:30:41 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:30:41 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:30:41 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:30:41 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:30:41 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:30:41 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:30:41 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:30:41 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:30:41 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:30:41 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:30:41 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:30:41 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:30:41 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:30:41 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[22:30:41 INF] Executed DbCommand (553ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:30:41 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 733.0496ms.
[22:30:41 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:30:41 DBG] No information found on request to perform content negotiation.
[22:30:41 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:30:41 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:30:41 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:30:41 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:30:41 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 786.0588ms
[22:30:41 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:30:41 INF] Response (Duration: 804ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 6,
  "Page": 1,
  "PageSize": 20
}
[22:30:41 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[22:30:41 DBG] Response Body: {"Messages":[{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":6,"Page":1,"PageSize":20}
[22:30:41 DBG] Connection id "0HNCQ1Q4743CN" completed keep alive response.
[22:30:41 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 838.7513ms
[22:30:41 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:30:41 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:30:41 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:30:41 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:30:41 DBG] The request has an origin header: 'http://localhost:3000'.
[22:30:41 INF] CORS policy execution successful.
[22:30:41 DBG] Static files was skipped as the request already matched an endpoint.
[22:30:41 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[22:30:41 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:30:41 DBG] Header: Connection=["keep-alive"]
[22:30:41 DBG] Header: Host=["localhost:5295"]
[22:30:41 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:30:41 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:30:41 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:30:41 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI"]
[22:30:41 DBG] Header: Origin=["http://localhost:3000"]
[22:30:41 DBG] Header: Referer=["http://localhost:3000/"]
[22:30:41 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:30:41 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:30:41 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:30:41 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:30:41 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:30:41 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:30:41 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[22:30:41 DBG] Successfully validated the token.
[22:30:41 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:30:41 DBG] Authorization was successful.
[22:30:41 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:30:41 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:30:41 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:30:41 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:30:41 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:30:41 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:30:41 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:30:41 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:30:41 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:30:41 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:30:41 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:30:41 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:30:41 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:30:41 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:30:41 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:30:41 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:30:41 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:30:41 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:30:41 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:30:41 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:30:41 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:30:41 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:30:41 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:30:41 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:30:41 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:30:41 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:30:41 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:30:41 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[22:30:42 INF] Executed DbCommand (543ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:30:42 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 607.3142ms.
[22:30:42 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:30:42 DBG] No information found on request to perform content negotiation.
[22:30:42 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:30:42 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:30:42 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:30:42 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:30:42 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 643.4906ms
[22:30:42 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:30:42 INF] Response (Duration: 655ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 6,
  "Page": 1,
  "PageSize": 20
}
[22:30:42 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[22:30:42 DBG] Response Body: {"Messages":[{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":6,"Page":1,"PageSize":20}
[22:30:42 DBG] Connection id "0HNCQ1Q4743CQ" completed keep alive response.
[22:30:42 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 693.6957ms
[22:32:21 DBG] Connection id "0HNCQ1Q4743CP" received FIN.
[22:32:21 DBG] Connection id "0HNCQ1Q4743CP" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:32:21 DBG] Waiting for the application to finish sending data.
[22:32:21 DBG] Connection id "0HNCQ1Q4743CP" disconnecting.
[22:32:21 DBG] Socket closed.
[22:32:21 DBG] OnConnectedAsync ending.
[22:32:21 DBG] Removing connection CetpvWh09uXVmcwY4hFeIg from the list of connections.
[22:32:21 INF] Executed endpoint '/hubs/chat'
[22:32:21 INF] Response (Duration: 100245ms): API: GET /hubs/chat
StatusCode: 101
[22:32:21 INF] HTTP 101 returned for GET /hubs/chat
[22:32:21 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=CetpvWh09uXVmcwY4hFeIg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjE2OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.YvJHxrgQQwRN0rzt5_0YUwsUhiNMaLVp-3w07xYLgwI - 101 null null 100279.3076ms
[22:32:21 DBG] Connection id "0HNCQ1Q4743CP" stopped.
[22:32:24 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[22:32:24 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[22:32:24 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:32:24 DBG] The request has an origin header: 'http://localhost:3000'.
[22:32:24 INF] CORS policy execution successful.
[22:32:24 DBG] The request is a preflight request.
[22:32:24 DBG] Connection id "0HNCQ1Q4743CQ" completed keep alive response.
[22:32:24 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 13.3106ms
[22:32:24 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 59
[22:32:24 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[22:32:24 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[22:32:24 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:32:24 DBG] The request has an origin header: 'http://localhost:3000'.
[22:32:24 INF] CORS policy execution successful.
[22:32:24 DBG] Static files was skipped as the request already matched an endpoint.
[22:32:24 INF] HTTP POST /api/Authentication/login received from ::1
[22:32:24 DBG] Header: Accept=["*/*"]
[22:32:24 DBG] Header: Connection=["keep-alive"]
[22:32:24 DBG] Header: Host=["localhost:5295"]
[22:32:24 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:32:24 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:32:24 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:32:24 DBG] Header: Content-Type=["application/json"]
[22:32:24 DBG] Header: Origin=["http://localhost:3000"]
[22:32:24 DBG] Header: Referer=["http://localhost:3000/"]
[22:32:24 DBG] Header: Content-Length=["59"]
[22:32:24 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:32:24 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:32:24 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:32:24 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:32:24 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:32:24 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:32:24 DBG] Connection id "0HNCQ1Q4743CQ", Request id "0HNCQ1Q4743CQ:00000004": started reading request body.
[22:32:24 DBG] Connection id "0HNCQ1Q4743CQ", Request id "0HNCQ1Q4743CQ:00000004": done reading request body.
[22:32:24 INF] Request Body: {"email":"anh.anhle012345@gmail.com","password":"12345678"}
[22:32:24 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anh.anhle012345@gmail.com",
  "password": "12345678"
}
[22:32:24 DBG] AuthenticationScheme: Bearer was not authenticated.
[22:32:24 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:32:24 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[22:32:24 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:32:24 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:32:24 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:32:24 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:32:24 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[22:32:24 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[22:32:24 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[22:32:24 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[22:32:24 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[22:32:24 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[22:32:24 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[22:32:24 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:32:24 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:32:24 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[22:32:24 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:32:24 INF] Executing action method SMedia.Controllers.AuthenticationController.Login (SMedia) - Validation state: "Valid"
[22:32:24 INF] Executed DbCommand (36ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[22:32:24 INF] Executed action method SMedia.Controllers.AuthenticationController.Login (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 271.3233ms.
[22:32:24 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:32:24 DBG] No information found on request to perform content negotiation.
[22:32:24 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[22:32:24 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:32:24 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.AuthResponse'.
[22:32:24 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 296.7742ms
[22:32:24 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:32:24 INF] Response (Duration: 311ms): API: POST /api/Authentication/login
StatusCode: 200
Body:
{
  "Token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"
}
[22:32:24 INF] HTTP 200 returned for POST /api/Authentication/login
[22:32:24 DBG] Response Body: {"Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"}
[22:32:24 DBG] Connection id "0HNCQ1Q4743CQ" completed keep alive response.
[22:32:24 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 200 null application/json; charset=utf-8 350.9617ms
[22:32:31 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[22:32:31 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:32:31 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:32:31 DBG] The request has an origin header: 'http://localhost:3000'.
[22:32:31 INF] CORS policy execution successful.
[22:32:31 DBG] The request is a preflight request.
[22:32:31 DBG] Connection id "0HNCQ1Q4743CQ" completed keep alive response.
[22:32:31 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 6.8072ms
[22:32:31 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[22:32:31 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:32:31 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:32:31 DBG] The request has an origin header: 'http://localhost:3000'.
[22:32:31 INF] CORS policy execution successful.
[22:32:31 DBG] Static files was skipped as the request already matched an endpoint.
[22:32:31 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[22:32:31 DBG] Header: Accept=["*/*"]
[22:32:31 DBG] Header: Connection=["keep-alive"]
[22:32:31 DBG] Header: Host=["localhost:5295"]
[22:32:31 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:32:31 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:32:31 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:32:31 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:32:31 DBG] Header: Cache-Control=["max-age=0"]
[22:32:31 DBG] Header: Origin=["http://localhost:3000"]
[22:32:31 DBG] Header: Referer=["http://localhost:3000/"]
[22:32:31 DBG] Header: Content-Length=["0"]
[22:32:31 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:32:31 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[22:32:31 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:32:31 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:32:31 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[22:32:31 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:32:31 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:32:31 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:32:31 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Query Parameters:
  negotiateVersion: 1
[22:32:31 DBG] Successfully validated the token.
[22:32:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:32:31 DBG] Authorization was successful.
[22:32:31 INF] Executing endpoint '/hubs/chat/negotiate'
[22:32:31 DBG] New connection jWovjjWSW73pUuU4KTYAkw created.
[22:32:31 DBG] Sending negotiation response.
[22:32:31 INF] Executed endpoint '/hubs/chat/negotiate'
[22:32:31 INF] Response (Duration: 7ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "jWovjjWSW73pUuU4KTYAkw",
  "connectionToken": "POPavdDW_UCEV3W9EureDg",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[22:32:31 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[22:32:31 DBG] Response Body: {"negotiateVersion":1,"connectionId":"jWovjjWSW73pUuU4KTYAkw","connectionToken":"POPavdDW_UCEV3W9EureDg","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[22:32:31 DBG] Connection id "0HNCQ1Q4743CO" completed keep alive response.
[22:32:31 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 39.9642ms
[22:32:31 DBG] Connection id "0HNCQ1Q4743CR" accepted.
[22:32:31 DBG] Connection id "0HNCQ1Q4743CR" started.
[22:32:31 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=POPavdDW_UCEV3W9EureDg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc - null null
[22:32:31 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[22:32:31 DBG] Request matched endpoint '/hubs/chat'
[22:32:31 DBG] The request has an origin header: 'http://localhost:3000'.
[22:32:31 INF] CORS policy execution successful.
[22:32:31 DBG] Static files was skipped as the request already matched an endpoint.
[22:32:31 INF] HTTP GET /hubs/chat?id=POPavdDW_UCEV3W9EureDg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc received from ::1
[22:32:31 DBG] Header: Connection=["Upgrade"]
[22:32:31 DBG] Header: Host=["localhost:5295"]
[22:32:31 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:32:31 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:32:31 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:32:31 DBG] Header: Cache-Control=["no-cache"]
[22:32:31 DBG] Header: Origin=["http://localhost:3000"]
[22:32:31 DBG] Header: Pragma=["no-cache"]
[22:32:31 DBG] Header: Upgrade=["websocket"]
[22:32:31 DBG] Header: Sec-WebSocket-Version=["13"]
[22:32:31 DBG] Header: Sec-WebSocket-Key=["yyjqmku2/6FZ9V99a3LThQ=="]
[22:32:31 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[22:32:31 INF] Request: URL: http://localhost:5295/hubs/chat?id=POPavdDW_UCEV3W9EureDg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Authenticated: Yes
Query Parameters:
  id: POPavdDW_UCEV3W9EureDg
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
[22:32:31 DBG] Successfully validated the token.
[22:32:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:32:31 DBG] Authorization was successful.
[22:32:31 INF] Executing endpoint '/hubs/chat'
[22:32:31 DBG] Establishing new connection.
[22:32:31 DBG] OnConnectedAsync started.
[22:32:31 DBG] Socket opened using Sub-Protocol: 'null'.
[22:32:31 DBG] Found protocol implementation for requested protocol: json.
[22:32:31 DBG] Completed connection handshake. Using HubProtocol 'json'.
[22:32:31 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:32:31 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:32:31 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:32:31 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:32:31 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:32:31 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:32:31 DBG] The request has an origin header: 'http://localhost:3000'.
[22:32:31 DBG] The request has an origin header: 'http://localhost:3000'.
[22:32:31 INF] CORS policy execution successful.
[22:32:31 INF] CORS policy execution successful.
[22:32:31 DBG] The request is a preflight request.
[22:32:31 DBG] The request is a preflight request.
[22:32:31 DBG] Connection id "0HNCQ1Q4743CQ" completed keep alive response.
[22:32:31 DBG] Connection id "0HNCQ1Q4743CN" completed keep alive response.
[22:32:31 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 11.9872ms
[22:32:31 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 10.4213ms
[22:32:31 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:32:31 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:32:31 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:32:31 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:32:31 DBG] The request has an origin header: 'http://localhost:3000'.
[22:32:31 INF] CORS policy execution successful.
[22:32:31 DBG] Static files was skipped as the request already matched an endpoint.
[22:32:31 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[22:32:31 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:32:31 DBG] Header: Connection=["keep-alive"]
[22:32:31 DBG] Header: Host=["localhost:5295"]
[22:32:31 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:32:31 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:32:31 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:32:31 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:32:31 DBG] Header: Origin=["http://localhost:3000"]
[22:32:31 DBG] Header: Referer=["http://localhost:3000/"]
[22:32:31 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:32:31 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:32:31 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:32:31 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:32:31 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:32:31 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:32:31 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[22:32:31 DBG] Successfully validated the token.
[22:32:31 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:32:31 DBG] Authorization was successful.
[22:32:31 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:32:31 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:32:31 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:32:31 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:32:31 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:32:31 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:32:31 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:32:31 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:32:31 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:32:31 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:32:31 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:32:31 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:32:31 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:32:31 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:32:31 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:32:31 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:32:31 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:32:31 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:32:31 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:32:31 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:32:31 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:32:31 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:32:31 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:32:31 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:32:31 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:32:31 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:32:31 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:32:31 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[22:32:32 INF] Executed DbCommand (540ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:32:32 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 548.0707ms.
[22:32:32 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:32:32 DBG] No information found on request to perform content negotiation.
[22:32:32 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:32:32 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:32:32 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:32:32 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:32:32 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 577.2297ms
[22:32:32 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:32:32 INF] Response (Duration: 590ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 6,
  "Page": 1,
  "PageSize": 20
}
[22:32:32 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[22:32:32 DBG] Response Body: {"Messages":[{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":6,"Page":1,"PageSize":20}
[22:32:32 DBG] Connection id "0HNCQ1Q4743CN" completed keep alive response.
[22:32:32 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:32:32 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 629.2716ms
[22:32:32 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:32:32 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:32:32 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:32:32 DBG] The request has an origin header: 'http://localhost:3000'.
[22:32:32 INF] CORS policy execution successful.
[22:32:32 DBG] Static files was skipped as the request already matched an endpoint.
[22:32:32 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[22:32:32 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:32:32 DBG] Header: Connection=["keep-alive"]
[22:32:32 DBG] Header: Host=["localhost:5295"]
[22:32:32 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:32:32 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:32:32 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:32:32 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:32:32 DBG] Header: Origin=["http://localhost:3000"]
[22:32:32 DBG] Header: Referer=["http://localhost:3000/"]
[22:32:32 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:32:32 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:32:32 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:32:32 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:32:32 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:32:32 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:32:32 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[22:32:32 DBG] Successfully validated the token.
[22:32:32 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:32:32 DBG] Authorization was successful.
[22:32:32 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:32:32 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:32:32 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:32:32 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:32:32 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:32:32 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:32:32 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:32:32 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:32:32 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:32:32 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:32:32 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:32:32 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:32:32 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:32:32 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:32:32 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:32:32 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:32:32 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:32:32 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:32:32 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:32:32 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:32:32 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:32:32 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:32:32 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:32:32 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:32:32 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:32:32 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:32:32 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:32:32 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[22:32:32 INF] Executed DbCommand (545ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:32:32 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 553.4989ms.
[22:32:32 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:32:32 DBG] No information found on request to perform content negotiation.
[22:32:32 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:32:32 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:32:32 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:32:32 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:32:32 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 584.719ms
[22:32:32 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:32:32 INF] Response (Duration: 598ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 6,
  "Page": 1,
  "PageSize": 20
}
[22:32:32 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[22:32:32 DBG] Response Body: {"Messages":[{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":6,"Page":1,"PageSize":20}
[22:32:32 DBG] Connection id "0HNCQ1Q4743CQ" completed keep alive response.
[22:32:32 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 627.4622ms
[22:32:37 DBG] Received hub invocation: InvocationMessage { InvocationId: "0", Target: "SendMessageToUser", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, aaaaaaaa ], StreamIds: [  ] }.
[22:32:37 INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[22:32:37 INF] Executed DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[22:32:37 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages - null null
[22:32:37 DBG] 1 candidate(s) found for the request path '/api/messages'
[22:32:37 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:32:37 DBG] The request has an origin header: 'http://localhost:3000'.
[22:32:37 INF] CORS policy execution successful.
[22:32:37 DBG] The request is a preflight request.
[22:32:37 DBG] Connection id "0HNCQ1Q4743CQ" completed keep alive response.
[22:32:37 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages - 204 null null 21.1495ms
[22:32:37 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/messages - application/json; charset=UTF-8 160
[22:32:37 DBG] 1 candidate(s) found for the request path '/api/messages'
[22:32:37 DBG] Endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)' with route pattern 'api/messages' is valid for the request path '/api/messages'
[22:32:37 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:32:37 DBG] The request has an origin header: 'http://localhost:3000'.
[22:32:37 INF] CORS policy execution successful.
[22:32:37 DBG] Static files was skipped as the request already matched an endpoint.
[22:32:37 INF] HTTP POST /api/messages received from ::1
[22:32:37 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:32:37 DBG] Header: Connection=["keep-alive"]
[22:32:37 DBG] Header: Host=["localhost:5295"]
[22:32:37 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:32:37 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:32:37 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:32:37 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:32:37 DBG] Header: Content-Type=["application/json; charset=UTF-8"]
[22:32:37 DBG] Header: Origin=["http://localhost:3000"]
[22:32:37 DBG] Header: Referer=["http://localhost:3000/"]
[22:32:37 DBG] Header: Content-Length=["160"]
[22:32:37 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:32:37 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:32:37 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:32:37 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:32:37 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:32:37 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:32:37 DBG] Connection id "0HNCQ1Q4743CQ", Request id "0HNCQ1Q4743CQ:00000009": started reading request body.
[22:32:37 DBG] Connection id "0HNCQ1Q4743CQ", Request id "0HNCQ1Q4743CQ:00000009": done reading request body.
[22:32:37 INF] Request Body: {"createMessageDto":{"senderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","receiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","Content":"aaaaaaaa","mediaUrls":[]}}
[22:32:37 INF] Request: URL: http://localhost:5295/api/messages
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Path Parameters:
  action: SendMessage
  controller: Message
Body:
{
  "createMessageDto": {
    "senderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
    "receiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
    "Content": "aaaaaaaa",
    "mediaUrls": []
  }
}
[22:32:37 DBG] Successfully validated the token.
[22:32:37 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:32:37 DBG] Authorization was successful.
[22:32:37 INF] Executing endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:32:37 INF] Route matched with {action = "SendMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.MessageDto]] SendMessage(Application.DTOs.CreateMessageDto) on controller SMedia.Controllers.MessageController (SMedia).
[22:32:37 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:32:37 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:32:37 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:32:37 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:32:37 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:32:37 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:32:37 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:32:37 DBG] Attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto' ...
[22:32:37 DBG] Attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto' using the name '' in request data ...
[22:32:38 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=UTF-8'.
[22:32:38 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.CreateMessageDto'
[22:32:38 DBG] Done attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto'.
[22:32:38 DBG] Done attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto'.
[22:32:38 DBG] Attempting to validate the bound parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto' ...
[22:32:38 DBG] Done attempting to validate the bound parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto'.
[22:32:38 DBG] The request has model state errors, returning an error response.
[22:32:38 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[22:32:38 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:32:38 DBG] No information found on request to perform content negotiation.
[22:32:38 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[22:32:38 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[22:32:38 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[22:32:38 INF] Executed action SMedia.Controllers.MessageController.SendMessage (SMedia) in 39.828ms
[22:32:38 INF] Executed endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:32:38 INF] Response (Duration: 63ms): API: POST /api/messages
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"Content":["The Content field is required."]},"traceId":"00-8dae24e0ccdb40f9b04a29fbe0402214-010bf30ce02237e0-00"}
[22:32:38 INF] HTTP 400 returned for POST /api/messages
[22:32:38 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"Content":["The Content field is required."]},"traceId":"00-8dae24e0ccdb40f9b04a29fbe0402214-010bf30ce02237e0-00"}
[22:32:38 DBG] Connection id "0HNCQ1Q4743CQ" completed keep alive response.
[22:32:38 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/messages - 400 null application/problem+json; charset=utf-8 121.1978ms
[22:34:42 DBG] Connection id "0HNCQ1Q4743CN" disconnecting.
[22:34:42 DBG] Connection id "0HNCQ1Q4743CO" disconnecting.
[22:34:43 DBG] Connection id "0HNCQ1Q4743CN" stopped.
[22:34:43 DBG] Connection id "0HNCQ1Q4743CO" stopped.
[22:34:43 DBG] Connection id "0HNCQ1Q4743CN" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:34:43 DBG] Connection id "0HNCQ1Q4743CO" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:34:49 DBG] Connection id "0HNCQ1Q4743CQ" disconnecting.
[22:34:49 DBG] Connection id "0HNCQ1Q4743CQ" stopped.
[22:34:49 DBG] Connection id "0HNCQ1Q4743CQ" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:36:46 INF] Application is shutting down...
[22:36:46 DBG] Hosting stopping
[22:36:46 DBG] Waiting for the application to finish sending data.
[22:36:46 DBG] Socket closed.
[22:36:46 DBG] OnConnectedAsync ending.
[22:36:46 DBG] Removing connection POPavdDW_UCEV3W9EureDg from the list of connections.
[22:36:46 INF] Executed endpoint '/hubs/chat'
[22:36:46 INF] Response (Duration: 254873ms): API: GET /hubs/chat
StatusCode: 101
[22:36:46 INF] HTTP 101 returned for GET /hubs/chat
[22:36:46 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=POPavdDW_UCEV3W9EureDg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc - 101 null null 254900.8938ms
[22:36:46 DBG] Connection id "0HNCQ1Q4743CR" disconnecting.
[22:36:46 DBG] Connection id "0HNCQ1Q4743CR" stopped.
[22:36:46 DBG] Connection id "0HNCQ1Q4743CR" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:36:46 DBG] Hosting stopped
[22:38:54 DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
[22:38:54 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[22:38:54 DBG] Hosting starting
[22:38:54 INF] User profile is available. Using 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[22:38:54 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-14a3d168-18db-4f02-bf32-5d12a5c3d5f9.xml'.
[22:38:54 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-18e390e9-1029-4eaf-a8ee-1e70e5eef3df.xml'.
[22:38:54 DBG] Found key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9}.
[22:38:54 DBG] Found key {18e390e9-1029-4eaf-a8ee-1e70e5eef3df}.
[22:38:54 DBG] Considering key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} with expiration date 2025-06-01 03:53:05Z as default key.
[22:38:54 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[22:38:54 DBG] Decrypting secret element using Windows DPAPI.
[22:38:54 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[22:38:54 DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
[22:38:54 DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
[22:38:54 DBG] Using key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} as the default key.
[22:38:54 DBG] Key ring with default key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} was loaded during application startup.
[22:38:54 INF] Now listening on: http://localhost:5295
[22:38:54 DBG] Loaded hosting startup assembly SMedia
[22:38:54 INF] Application started. Press Ctrl+C to shut down.
[22:38:54 INF] Hosting environment: Development
[22:38:54 INF] Content root path: E:\hcmue_03_hk02\cn_web\BACK_END\BackEnd-SocialMedia\SMedia
[22:38:54 DBG] Hosting started
[22:39:06 DBG] Connection id "0HNCQ1VPSIDDF" accepted.
[22:39:06 DBG] Connection id "0HNCQ1VPSIDDF" started.
[22:39:06 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[22:39:06 DBG] Wildcard detected, all requests with hosts will be allowed.
[22:39:06 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:39:06 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:39:06 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:06 INF] CORS policy execution successful.
[22:39:06 DBG] The request is a preflight request.
[22:39:06 DBG] Connection id "0HNCQ1VPSIDDF" completed keep alive response.
[22:39:06 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 96.5646ms
[22:39:06 DBG] Connection id "0HNCQ1VPSIDDG" accepted.
[22:39:06 DBG] Connection id "0HNCQ1VPSIDDG" started.
[22:39:06 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[22:39:06 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:39:06 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:39:06 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:06 INF] CORS policy execution successful.
[22:39:06 DBG] Static files was skipped as the request already matched an endpoint.
[22:39:06 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[22:39:06 DBG] Header: Accept=["*/*"]
[22:39:06 DBG] Header: Connection=["keep-alive"]
[22:39:06 DBG] Header: Host=["localhost:5295"]
[22:39:06 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:39:06 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:39:06 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:39:06 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:39:06 DBG] Header: Cache-Control=["max-age=0"]
[22:39:06 DBG] Header: Origin=["http://localhost:3000"]
[22:39:06 DBG] Header: Referer=["http://localhost:3000/"]
[22:39:06 DBG] Header: Content-Length=["0"]
[22:39:06 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:39:06 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[22:39:06 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:39:06 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:39:06 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[22:39:06 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:39:06 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:39:06 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:39:06 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Query Parameters:
  negotiateVersion: 1
[22:39:06 DBG] Successfully validated the token.
[22:39:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:39:06 DBG] Authorization was successful.
[22:39:06 INF] Executing endpoint '/hubs/chat/negotiate'
[22:39:06 DBG] New connection TWN3sWX2CvrAtTgroNODig created.
[22:39:06 DBG] Sending negotiation response.
[22:39:06 INF] Executed endpoint '/hubs/chat/negotiate'
[22:39:06 INF] Response (Duration: 161ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "TWN3sWX2CvrAtTgroNODig",
  "connectionToken": "bTdSYF5dH76YohE1XNfXfA",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[22:39:06 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[22:39:06 DBG] Response Body: {"negotiateVersion":1,"connectionId":"TWN3sWX2CvrAtTgroNODig","connectionToken":"bTdSYF5dH76YohE1XNfXfA","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[22:39:06 DBG] Connection id "0HNCQ1VPSIDDG" completed keep alive response.
[22:39:06 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 321.3486ms
[22:39:06 DBG] Connection id "0HNCQ1VPSIDDH" accepted.
[22:39:06 DBG] Connection id "0HNCQ1VPSIDDH" started.
[22:39:06 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=bTdSYF5dH76YohE1XNfXfA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc - null null
[22:39:06 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[22:39:06 DBG] Request matched endpoint '/hubs/chat'
[22:39:06 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:06 INF] CORS policy execution successful.
[22:39:06 DBG] Static files was skipped as the request already matched an endpoint.
[22:39:06 INF] HTTP GET /hubs/chat?id=bTdSYF5dH76YohE1XNfXfA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc received from ::1
[22:39:06 DBG] Header: Connection=["Upgrade"]
[22:39:06 DBG] Header: Host=["localhost:5295"]
[22:39:06 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:39:06 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:39:06 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:39:06 DBG] Header: Cache-Control=["no-cache"]
[22:39:06 DBG] Header: Origin=["http://localhost:3000"]
[22:39:06 DBG] Header: Pragma=["no-cache"]
[22:39:06 DBG] Header: Upgrade=["websocket"]
[22:39:06 DBG] Header: Sec-WebSocket-Version=["13"]
[22:39:06 DBG] Header: Sec-WebSocket-Key=["YllitH7XBM3SINv6oIuDRQ=="]
[22:39:06 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[22:39:06 INF] Request: URL: http://localhost:5295/hubs/chat?id=bTdSYF5dH76YohE1XNfXfA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Authenticated: Yes
Query Parameters:
  id: bTdSYF5dH76YohE1XNfXfA
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
[22:39:06 DBG] Successfully validated the token.
[22:39:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:39:06 DBG] Authorization was successful.
[22:39:06 INF] Executing endpoint '/hubs/chat'
[22:39:06 DBG] Establishing new connection.
[22:39:06 DBG] OnConnectedAsync started.
[22:39:06 DBG] Socket opened using Sub-Protocol: 'null'.
[22:39:06 DBG] Found protocol implementation for requested protocol: json.
[22:39:06 DBG] Completed connection handshake. Using HubProtocol 'json'.
[22:39:11 DBG] Connection id "0HNCQ1VPSIDDH" received FIN.
[22:39:11 DBG] Waiting for the application to finish sending data.
[22:39:11 DBG] Connection id "0HNCQ1VPSIDDH" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:39:11 DBG] Connection id "0HNCQ1VPSIDDH" disconnecting.
[22:39:11 DBG] Socket closed.
[22:39:11 DBG] OnConnectedAsync ending.
[22:39:11 DBG] Removing connection bTdSYF5dH76YohE1XNfXfA from the list of connections.
[22:39:11 INF] Executed endpoint '/hubs/chat'
[22:39:11 INF] Response (Duration: 5161ms): API: GET /hubs/chat
StatusCode: 101
[22:39:12 INF] HTTP 101 returned for GET /hubs/chat
[22:39:12 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=bTdSYF5dH76YohE1XNfXfA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc - 101 null null 5302.9165ms
[22:39:12 DBG] Connection id "0HNCQ1VPSIDDH" stopped.
[22:39:12 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[22:39:12 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:39:12 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:39:12 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:12 INF] CORS policy execution successful.
[22:39:12 DBG] The request is a preflight request.
[22:39:12 DBG] Connection id "0HNCQ1VPSIDDF" completed keep alive response.
[22:39:12 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 19.9901ms
[22:39:12 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[22:39:12 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:39:12 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:39:12 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:12 INF] CORS policy execution successful.
[22:39:12 DBG] Static files was skipped as the request already matched an endpoint.
[22:39:12 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[22:39:12 DBG] Header: Accept=["*/*"]
[22:39:12 DBG] Header: Connection=["keep-alive"]
[22:39:12 DBG] Header: Host=["localhost:5295"]
[22:39:12 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:39:12 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:39:12 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:39:12 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:39:12 DBG] Header: Cache-Control=["max-age=0"]
[22:39:12 DBG] Header: Origin=["http://localhost:3000"]
[22:39:12 DBG] Header: Referer=["http://localhost:3000/"]
[22:39:12 DBG] Header: Content-Length=["0"]
[22:39:12 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:39:12 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[22:39:12 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:39:12 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:39:12 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[22:39:12 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:39:12 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:39:12 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:39:12 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Query Parameters:
  negotiateVersion: 1
[22:39:12 DBG] Successfully validated the token.
[22:39:12 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:39:12 DBG] Authorization was successful.
[22:39:12 INF] Executing endpoint '/hubs/chat/negotiate'
[22:39:12 DBG] New connection 3Oe86MbbXtgR8gF5TvInVQ created.
[22:39:12 DBG] Sending negotiation response.
[22:39:12 INF] Executed endpoint '/hubs/chat/negotiate'
[22:39:12 INF] Response (Duration: 19ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "3Oe86MbbXtgR8gF5TvInVQ",
  "connectionToken": "sHBd90g2DWH1U8cWGvjItQ",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[22:39:12 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[22:39:12 DBG] Response Body: {"negotiateVersion":1,"connectionId":"3Oe86MbbXtgR8gF5TvInVQ","connectionToken":"sHBd90g2DWH1U8cWGvjItQ","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[22:39:12 DBG] Connection id "0HNCQ1VPSIDDG" completed keep alive response.
[22:39:12 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 108.6214ms
[22:39:12 DBG] Connection id "0HNCQ1VPSIDDI" accepted.
[22:39:12 DBG] Connection id "0HNCQ1VPSIDDI" started.
[22:39:12 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=sHBd90g2DWH1U8cWGvjItQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc - null null
[22:39:12 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[22:39:12 DBG] Request matched endpoint '/hubs/chat'
[22:39:12 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:12 INF] CORS policy execution successful.
[22:39:12 DBG] Static files was skipped as the request already matched an endpoint.
[22:39:12 INF] HTTP GET /hubs/chat?id=sHBd90g2DWH1U8cWGvjItQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc received from ::1
[22:39:12 DBG] Header: Connection=["Upgrade"]
[22:39:12 DBG] Header: Host=["localhost:5295"]
[22:39:12 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:39:12 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:39:12 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:39:12 DBG] Header: Cache-Control=["no-cache"]
[22:39:12 DBG] Header: Origin=["http://localhost:3000"]
[22:39:12 DBG] Header: Pragma=["no-cache"]
[22:39:12 DBG] Header: Upgrade=["websocket"]
[22:39:12 DBG] Header: Sec-WebSocket-Version=["13"]
[22:39:13 DBG] Header: Sec-WebSocket-Key=["n6a4a9ajnNnTHsYN4PjnMQ=="]
[22:39:13 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[22:39:13 INF] Request: URL: http://localhost:5295/hubs/chat?id=sHBd90g2DWH1U8cWGvjItQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Authenticated: Yes
Query Parameters:
  id: sHBd90g2DWH1U8cWGvjItQ
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
[22:39:13 DBG] Successfully validated the token.
[22:39:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:39:13 DBG] Authorization was successful.
[22:39:13 INF] Executing endpoint '/hubs/chat'
[22:39:13 DBG] Establishing new connection.
[22:39:13 DBG] OnConnectedAsync started.
[22:39:13 DBG] Socket opened using Sub-Protocol: 'null'.
[22:39:13 DBG] Found protocol implementation for requested protocol: json.
[22:39:13 DBG] Completed connection handshake. Using HubProtocol 'json'.
[22:39:13 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:39:13 DBG] Connection id "0HNCQ1VPSIDDJ" accepted.
[22:39:13 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:39:13 DBG] Connection id "0HNCQ1VPSIDDJ" started.
[22:39:13 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:39:13 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:39:13 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:13 INF] CORS policy execution successful.
[22:39:13 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:39:13 DBG] The request is a preflight request.
[22:39:13 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:39:13 DBG] Connection id "0HNCQ1VPSIDDF" completed keep alive response.
[22:39:13 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:13 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 23.9923ms
[22:39:13 INF] CORS policy execution successful.
[22:39:13 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:39:13 DBG] The request is a preflight request.
[22:39:13 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:39:13 DBG] Connection id "0HNCQ1VPSIDDJ" completed keep alive response.
[22:39:13 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 28.3542ms
[22:39:13 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:39:13 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:39:13 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:13 INF] CORS policy execution successful.
[22:39:13 DBG] Static files was skipped as the request already matched an endpoint.
[22:39:13 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[22:39:13 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:39:13 DBG] Header: Connection=["keep-alive"]
[22:39:13 DBG] Header: Host=["localhost:5295"]
[22:39:13 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:39:13 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:39:13 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:39:13 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:39:13 DBG] Header: Origin=["http://localhost:3000"]
[22:39:13 DBG] Header: Referer=["http://localhost:3000/"]
[22:39:13 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:39:13 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:39:13 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:39:13 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:39:13 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:39:13 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:39:13 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[22:39:13 DBG] Successfully validated the token.
[22:39:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:39:13 DBG] Authorization was successful.
[22:39:13 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:39:13 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:39:13 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:39:13 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:39:13 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:39:13 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:39:13 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:39:13 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:39:13 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:39:13 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:39:13 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:39:13 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:39:13 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:39:13 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:39:13 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:39:13 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:39:13 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:39:13 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:39:13 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:39:13 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:39:13 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:39:13 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:39:13 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:39:13 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:39:13 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:39:13 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:39:13 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:39:16 INF] Executed DbCommand (615ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:39:16 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:39:16 DBG] No information found on request to perform content negotiation.
[22:39:16 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:39:16 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:39:16 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:39:16 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:39:16 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 3196.0009ms
[22:39:16 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:39:16 INF] Response (Duration: 3402ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 7,
  "Page": 1,
  "PageSize": 20
}
[22:39:16 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[22:39:16 DBG] Response Body: {"Messages":[{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":7,"Page":1,"PageSize":20}
[22:39:16 DBG] Connection id "0HNCQ1VPSIDDF" completed keep alive response.
[22:39:16 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:39:16 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:39:16 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:39:16 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 3524.284ms
[22:39:16 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:39:16 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:16 INF] CORS policy execution successful.
[22:39:16 DBG] Static files was skipped as the request already matched an endpoint.
[22:39:16 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[22:39:16 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:39:16 DBG] Header: Connection=["keep-alive"]
[22:39:16 DBG] Header: Host=["localhost:5295"]
[22:39:16 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:39:16 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:39:16 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:39:16 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:39:16 DBG] Header: Origin=["http://localhost:3000"]
[22:39:16 DBG] Header: Referer=["http://localhost:3000/"]
[22:39:16 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:39:16 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:39:16 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:39:16 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:39:16 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:39:16 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:39:16 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[22:39:16 DBG] Successfully validated the token.
[22:39:16 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:39:16 DBG] Authorization was successful.
[22:39:16 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:39:16 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:39:16 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:39:16 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:39:16 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:39:16 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:39:16 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:39:16 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:39:16 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:39:16 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:39:16 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:39:17 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:39:17 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:39:17 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:39:17 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:39:17 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:39:17 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:39:17 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:39:17 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:39:17 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:39:17 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:39:17 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:39:17 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:39:17 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:39:17 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:39:17 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:39:17 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:39:17 INF] Executed DbCommand (546ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:39:17 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:39:17 DBG] No information found on request to perform content negotiation.
[22:39:17 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:39:17 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:39:17 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:39:17 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:39:17 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 681.6893ms
[22:39:17 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:39:17 INF] Response (Duration: 982ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 7,
  "Page": 1,
  "PageSize": 20
}
[22:39:17 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[22:39:17 DBG] Response Body: {"Messages":[{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":7,"Page":1,"PageSize":20}
[22:39:18 DBG] Connection id "0HNCQ1VPSIDDJ" completed keep alive response.
[22:39:18 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 1416.413ms
[22:39:24 DBG] Received hub invocation: InvocationMessage { InvocationId: "0", Target: "SendMessageToUser", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, qqqqq ], StreamIds: [  ] }.
[22:39:24 INF] Executed DbCommand (56ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[22:39:24 INF] Executed DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[22:39:24 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages - null null
[22:39:24 DBG] 1 candidate(s) found for the request path '/api/messages'
[22:39:24 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:39:24 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:24 INF] CORS policy execution successful.
[22:39:24 DBG] The request is a preflight request.
[22:39:24 DBG] Connection id "0HNCQ1VPSIDDJ" completed keep alive response.
[22:39:24 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages - 204 null null 38.9072ms
[22:39:24 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/messages - application/json; charset=UTF-8 157
[22:39:24 DBG] 1 candidate(s) found for the request path '/api/messages'
[22:39:24 DBG] Endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)' with route pattern 'api/messages' is valid for the request path '/api/messages'
[22:39:24 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:39:24 DBG] The request has an origin header: 'http://localhost:3000'.
[22:39:24 INF] CORS policy execution successful.
[22:39:24 DBG] Static files was skipped as the request already matched an endpoint.
[22:39:24 INF] HTTP POST /api/messages received from ::1
[22:39:24 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:39:24 DBG] Header: Connection=["keep-alive"]
[22:39:24 DBG] Header: Host=["localhost:5295"]
[22:39:24 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:39:24 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:39:24 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:39:24 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:39:24 DBG] Header: Content-Type=["application/json; charset=UTF-8"]
[22:39:24 DBG] Header: Origin=["http://localhost:3000"]
[22:39:24 DBG] Header: Referer=["http://localhost:3000/"]
[22:39:24 DBG] Header: Content-Length=["157"]
[22:39:24 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:39:24 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:39:24 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:39:24 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:39:24 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:39:25 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:39:25 DBG] Connection id "0HNCQ1VPSIDDJ", Request id "0HNCQ1VPSIDDJ:00000004": started reading request body.
[22:39:25 DBG] Connection id "0HNCQ1VPSIDDJ", Request id "0HNCQ1VPSIDDJ:00000004": done reading request body.
[22:39:25 INF] Request Body: {"createMessageDto":{"senderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","receiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","Content":"qqqqq","mediaUrls":[]}}
[22:39:25 INF] Request: URL: http://localhost:5295/api/messages
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Path Parameters:
  action: SendMessage
  controller: Message
Body:
{
  "createMessageDto": {
    "senderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
    "receiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
    "Content": "qqqqq",
    "mediaUrls": []
  }
}
[22:39:25 DBG] Successfully validated the token.
[22:39:25 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:39:25 DBG] Authorization was successful.
[22:39:25 INF] Executing endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:39:25 INF] Route matched with {action = "SendMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.MessageDto]] SendMessage(Application.DTOs.CreateMessageDto) on controller SMedia.Controllers.MessageController (SMedia).
[22:39:25 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:39:25 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:39:25 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:39:25 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:39:25 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:39:25 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:39:25 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:39:25 DBG] Attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto' ...
[22:39:25 DBG] Attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto' using the name '' in request data ...
[22:39:25 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=UTF-8'.
[22:39:25 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.CreateMessageDto'
[22:39:25 DBG] Done attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto'.
[22:39:25 DBG] Done attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto'.
[22:39:25 DBG] Attempting to validate the bound parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto' ...
[22:39:25 DBG] Done attempting to validate the bound parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto'.
[22:39:25 DBG] The request has model state errors, returning an error response.
[22:39:25 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[22:39:25 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:39:25 DBG] No information found on request to perform content negotiation.
[22:39:25 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[22:39:25 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[22:39:25 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[22:39:25 INF] Executed action SMedia.Controllers.MessageController.SendMessage (SMedia) in 187.3477ms
[22:39:25 INF] Executed endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:39:25 INF] Response (Duration: 234ms): API: POST /api/messages
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"Content":["The Content field is required."]},"traceId":"00-04cefba6e2af98ea7cf013e71fbff1d3-9286f5b1cb497aab-00"}
[22:39:25 INF] HTTP 400 returned for POST /api/messages
[22:39:25 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"Content":["The Content field is required."]},"traceId":"00-04cefba6e2af98ea7cf013e71fbff1d3-9286f5b1cb497aab-00"}
[22:39:25 DBG] Connection id "0HNCQ1VPSIDDJ" completed keep alive response.
[22:39:25 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/messages - 400 null application/problem+json; charset=utf-8 491.2069ms
[22:41:24 DBG] Connection id "0HNCQ1VPSIDDG" disconnecting.
[22:41:24 DBG] Connection id "0HNCQ1VPSIDDG" stopped.
[22:41:24 DBG] Connection id "0HNCQ1VPSIDDG" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:41:27 DBG] Connection id "0HNCQ1VPSIDDF" disconnecting.
[22:41:27 DBG] Connection id "0HNCQ1VPSIDDF" stopped.
[22:41:27 DBG] Connection id "0HNCQ1VPSIDDF" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:41:36 DBG] Connection id "0HNCQ1VPSIDDJ" disconnecting.
[22:41:36 DBG] Connection id "0HNCQ1VPSIDDJ" stopped.
[22:41:36 DBG] Connection id "0HNCQ1VPSIDDJ" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:42:36 DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
[22:42:36 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[22:42:36 DBG] Hosting starting
[22:42:36 INF] User profile is available. Using 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[22:42:36 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-14a3d168-18db-4f02-bf32-5d12a5c3d5f9.xml'.
[22:42:36 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-18e390e9-1029-4eaf-a8ee-1e70e5eef3df.xml'.
[22:42:36 DBG] Found key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9}.
[22:42:36 DBG] Found key {18e390e9-1029-4eaf-a8ee-1e70e5eef3df}.
[22:42:36 DBG] Considering key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} with expiration date 2025-06-01 03:53:05Z as default key.
[22:42:36 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[22:42:36 DBG] Decrypting secret element using Windows DPAPI.
[22:42:36 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[22:42:36 DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
[22:42:36 DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
[22:42:36 DBG] Using key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} as the default key.
[22:42:36 DBG] Key ring with default key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} was loaded during application startup.
[22:42:36 INF] Now listening on: http://localhost:5295
[22:42:36 DBG] Loaded hosting startup assembly SMedia
[22:42:36 INF] Application started. Press Ctrl+C to shut down.
[22:42:36 INF] Hosting environment: Development
[22:42:36 INF] Content root path: E:\hcmue_03_hk02\cn_web\BACK_END\BackEnd-SocialMedia\SMedia
[22:42:36 DBG] Hosting started
[22:43:00 DBG] Connection id "0HNCQ21VJLH3K" accepted.
[22:43:00 DBG] Connection id "0HNCQ21VJLH3K" started.
[22:43:00 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[22:43:00 DBG] Wildcard detected, all requests with hosts will be allowed.
[22:43:00 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:43:00 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:43:00 DBG] The request has an origin header: 'http://localhost:3000'.
[22:43:00 INF] CORS policy execution successful.
[22:43:00 DBG] The request is a preflight request.
[22:43:00 DBG] Connection id "0HNCQ21VJLH3K" completed keep alive response.
[22:43:00 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 89.6636ms
[22:43:00 DBG] Connection id "0HNCQ21VJLH3L" accepted.
[22:43:00 DBG] Connection id "0HNCQ21VJLH3L" started.
[22:43:00 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[22:43:00 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:43:00 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:43:00 DBG] The request has an origin header: 'http://localhost:3000'.
[22:43:00 INF] CORS policy execution successful.
[22:43:00 DBG] Static files was skipped as the request already matched an endpoint.
[22:43:00 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[22:43:00 DBG] Header: Accept=["*/*"]
[22:43:00 DBG] Header: Connection=["keep-alive"]
[22:43:00 DBG] Header: Host=["localhost:5295"]
[22:43:00 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:43:00 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:43:00 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:43:00 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:43:00 DBG] Header: Cache-Control=["max-age=0"]
[22:43:00 DBG] Header: Origin=["http://localhost:3000"]
[22:43:00 DBG] Header: Referer=["http://localhost:3000/"]
[22:43:00 DBG] Header: Content-Length=["0"]
[22:43:00 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:43:00 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[22:43:00 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:43:00 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:43:00 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[22:43:00 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:43:00 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:43:00 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:43:00 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Query Parameters:
  negotiateVersion: 1
[22:43:00 DBG] Successfully validated the token.
[22:43:00 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:43:00 DBG] Authorization was successful.
[22:43:00 INF] Executing endpoint '/hubs/chat/negotiate'
[22:43:00 DBG] New connection HBCekgibrTeHgb3d45rgNw created.
[22:43:00 DBG] Sending negotiation response.
[22:43:00 INF] Executed endpoint '/hubs/chat/negotiate'
[22:43:00 INF] Response (Duration: 161ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "HBCekgibrTeHgb3d45rgNw",
  "connectionToken": "RQs2NzjivWyjQmxq7lq7yA",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[22:43:00 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[22:43:00 DBG] Response Body: {"negotiateVersion":1,"connectionId":"HBCekgibrTeHgb3d45rgNw","connectionToken":"RQs2NzjivWyjQmxq7lq7yA","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[22:43:00 DBG] Connection id "0HNCQ21VJLH3L" completed keep alive response.
[22:43:00 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 307.7917ms
[22:43:00 DBG] Connection id "0HNCQ21VJLH3M" accepted.
[22:43:00 DBG] Connection id "0HNCQ21VJLH3M" started.
[22:43:00 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=RQs2NzjivWyjQmxq7lq7yA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc - null null
[22:43:00 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[22:43:00 DBG] Request matched endpoint '/hubs/chat'
[22:43:00 DBG] The request has an origin header: 'http://localhost:3000'.
[22:43:00 INF] CORS policy execution successful.
[22:43:00 DBG] Static files was skipped as the request already matched an endpoint.
[22:43:00 INF] HTTP GET /hubs/chat?id=RQs2NzjivWyjQmxq7lq7yA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc received from ::1
[22:43:00 DBG] Header: Connection=["Upgrade"]
[22:43:00 DBG] Header: Host=["localhost:5295"]
[22:43:00 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:43:00 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:43:00 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:43:00 DBG] Header: Cache-Control=["no-cache"]
[22:43:00 DBG] Header: Origin=["http://localhost:3000"]
[22:43:00 DBG] Header: Pragma=["no-cache"]
[22:43:00 DBG] Header: Upgrade=["websocket"]
[22:43:00 DBG] Header: Sec-WebSocket-Version=["13"]
[22:43:00 DBG] Header: Sec-WebSocket-Key=["vXHhDjphZAPthY62BzAE+w=="]
[22:43:00 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[22:43:00 INF] Request: URL: http://localhost:5295/hubs/chat?id=RQs2NzjivWyjQmxq7lq7yA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Authenticated: Yes
Query Parameters:
  id: RQs2NzjivWyjQmxq7lq7yA
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
[22:43:00 DBG] Successfully validated the token.
[22:43:00 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:43:00 DBG] Authorization was successful.
[22:43:00 INF] Executing endpoint '/hubs/chat'
[22:43:00 DBG] Establishing new connection.
[22:43:00 DBG] OnConnectedAsync started.
[22:43:00 DBG] Socket opened using Sub-Protocol: 'null'.
[22:43:00 DBG] Found protocol implementation for requested protocol: json.
[22:43:00 DBG] Completed connection handshake. Using HubProtocol 'json'.
[22:43:09 DBG] Received hub invocation: InvocationMessage { InvocationId: "1", Target: "SendMessageToUser", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, ABC ], StreamIds: [  ] }.
[22:43:11 INF] Executed DbCommand (95ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[22:43:11 INF] Executed DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[22:43:11 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages - null null
[22:43:11 DBG] 1 candidate(s) found for the request path '/api/messages'
[22:43:11 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:43:11 DBG] The request has an origin header: 'http://localhost:3000'.
[22:43:11 INF] CORS policy execution successful.
[22:43:11 DBG] The request is a preflight request.
[22:43:11 DBG] Connection id "0HNCQ21VJLH3K" completed keep alive response.
[22:43:11 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages - 204 null null 30.1017ms
[22:43:11 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/messages - application/json; charset=UTF-8 155
[22:43:11 DBG] 1 candidate(s) found for the request path '/api/messages'
[22:43:11 DBG] Endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)' with route pattern 'api/messages' is valid for the request path '/api/messages'
[22:43:11 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:43:11 DBG] The request has an origin header: 'http://localhost:3000'.
[22:43:11 INF] CORS policy execution successful.
[22:43:11 DBG] Static files was skipped as the request already matched an endpoint.
[22:43:11 INF] HTTP POST /api/messages received from ::1
[22:43:11 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:43:12 DBG] Header: Connection=["keep-alive"]
[22:43:12 DBG] Header: Host=["localhost:5295"]
[22:43:12 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:43:12 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:43:12 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:43:12 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:43:12 DBG] Header: Content-Type=["application/json; charset=UTF-8"]
[22:43:12 DBG] Header: Origin=["http://localhost:3000"]
[22:43:12 DBG] Header: Referer=["http://localhost:3000/"]
[22:43:12 DBG] Header: Content-Length=["155"]
[22:43:12 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:43:12 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:43:12 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:43:12 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:43:12 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:43:12 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:43:12 DBG] Connection id "0HNCQ21VJLH3K", Request id "0HNCQ21VJLH3K:00000003": started reading request body.
[22:43:12 DBG] Connection id "0HNCQ21VJLH3K", Request id "0HNCQ21VJLH3K:00000003": done reading request body.
[22:43:12 INF] Request Body: {"createMessageDto":{"senderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","receiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","Content":"ABC","mediaUrls":[]}}
[22:43:12 INF] Request: URL: http://localhost:5295/api/messages
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Path Parameters:
  action: SendMessage
  controller: Message
Body:
{
  "createMessageDto": {
    "senderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
    "receiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
    "Content": "ABC",
    "mediaUrls": []
  }
}
[22:43:12 DBG] Successfully validated the token.
[22:43:12 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:43:12 DBG] Authorization was successful.
[22:43:12 INF] Executing endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:43:12 INF] Route matched with {action = "SendMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.MessageDto]] SendMessage(Application.DTOs.CreateMessageDto) on controller SMedia.Controllers.MessageController (SMedia).
[22:43:12 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:43:12 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:43:12 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:43:12 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:43:12 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:43:12 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:43:12 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:43:12 DBG] Attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto' ...
[22:43:12 DBG] Attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto' using the name '' in request data ...
[22:43:12 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=UTF-8'.
[22:43:12 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.CreateMessageDto'
[22:43:12 DBG] Done attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto'.
[22:43:12 DBG] Done attempting to bind parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto'.
[22:43:12 DBG] Attempting to validate the bound parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto' ...
[22:43:12 DBG] Done attempting to validate the bound parameter 'createMessageDto' of type 'Application.DTOs.CreateMessageDto'.
[22:43:12 DBG] The request has model state errors, returning an error response.
[22:43:12 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[22:43:12 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:43:12 DBG] No information found on request to perform content negotiation.
[22:43:12 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[22:43:12 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[22:43:12 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[22:43:12 INF] Executed action SMedia.Controllers.MessageController.SendMessage (SMedia) in 209.3749ms
[22:43:12 INF] Executed endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:43:12 INF] Response (Duration: 324ms): API: POST /api/messages
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"Content":["The Content field is required."]},"traceId":"00-3c88d906727642773403129d698a3ced-78e7a1b1dd7312ee-00"}
[22:43:12 INF] HTTP 400 returned for POST /api/messages
[22:43:12 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"Content":["The Content field is required."]},"traceId":"00-3c88d906727642773403129d698a3ced-78e7a1b1dd7312ee-00"}
[22:43:12 DBG] Connection id "0HNCQ21VJLH3K" completed keep alive response.
[22:43:12 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/messages - 400 null application/problem+json; charset=utf-8 517.5437ms
[22:45:11 DBG] Connection id "0HNCQ21VJLH3L" disconnecting.
[22:45:11 DBG] Connection id "0HNCQ21VJLH3L" stopped.
[22:45:11 DBG] Connection id "0HNCQ21VJLH3L" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:45:23 DBG] Connection id "0HNCQ21VJLH3K" disconnecting.
[22:45:23 DBG] Connection id "0HNCQ21VJLH3K" stopped.
[22:45:23 DBG] Connection id "0HNCQ21VJLH3K" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:49:56 INF] Application is shutting down...
[22:49:56 DBG] Hosting stopping
[22:49:56 DBG] Waiting for the application to finish sending data.
[22:49:56 DBG] Socket closed.
[22:49:56 DBG] OnConnectedAsync ending.
[22:49:56 DBG] Removing connection RQs2NzjivWyjQmxq7lq7yA from the list of connections.
[22:49:56 INF] Executed endpoint '/hubs/chat'
[22:49:56 INF] Response (Duration: 415663ms): API: GET /hubs/chat
StatusCode: 101
[22:49:56 INF] HTTP 101 returned for GET /hubs/chat
[22:49:56 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=RQs2NzjivWyjQmxq7lq7yA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc - 101 null null 415733.1109ms
[22:49:56 DBG] Connection id "0HNCQ21VJLH3M" disconnecting.
[22:49:56 DBG] Connection id "0HNCQ21VJLH3M" stopped.
[22:49:56 DBG] Connection id "0HNCQ21VJLH3M" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:49:56 DBG] Hosting stopped
[22:50:14 DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
[22:50:14 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[22:50:14 DBG] Hosting starting
[22:50:14 INF] User profile is available. Using 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[22:50:14 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-14a3d168-18db-4f02-bf32-5d12a5c3d5f9.xml'.
[22:50:14 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-18e390e9-1029-4eaf-a8ee-1e70e5eef3df.xml'.
[22:50:14 DBG] Found key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9}.
[22:50:14 DBG] Found key {18e390e9-1029-4eaf-a8ee-1e70e5eef3df}.
[22:50:14 DBG] Considering key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} with expiration date 2025-06-01 03:53:05Z as default key.
[22:50:14 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[22:50:14 DBG] Decrypting secret element using Windows DPAPI.
[22:50:14 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[22:50:14 DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
[22:50:14 DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
[22:50:14 DBG] Using key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} as the default key.
[22:50:14 DBG] Key ring with default key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} was loaded during application startup.
[22:50:14 INF] Now listening on: http://localhost:5295
[22:50:14 DBG] Loaded hosting startup assembly SMedia
[22:50:14 INF] Application started. Press Ctrl+C to shut down.
[22:50:14 INF] Hosting environment: Development
[22:50:14 INF] Content root path: E:\hcmue_03_hk02\cn_web\BACK_END\BackEnd-SocialMedia\SMedia
[22:50:14 DBG] Hosting started
[22:50:21 DBG] Connection id "0HNCQ2632GL72" accepted.
[22:50:21 DBG] Connection id "0HNCQ2632GL72" started.
[22:50:21 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[22:50:21 DBG] Wildcard detected, all requests with hosts will be allowed.
[22:50:21 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:50:21 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:50:21 DBG] The request has an origin header: 'http://localhost:3000'.
[22:50:21 INF] CORS policy execution successful.
[22:50:21 DBG] The request is a preflight request.
[22:50:21 DBG] Connection id "0HNCQ2632GL72" completed keep alive response.
[22:50:21 DBG] Connection id "0HNCQ2632GL73" accepted.
[22:50:21 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 95.2298ms
[22:50:21 DBG] Connection id "0HNCQ2632GL73" started.
[22:50:21 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[22:50:21 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:50:21 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:50:21 DBG] The request has an origin header: 'http://localhost:3000'.
[22:50:21 INF] CORS policy execution successful.
[22:50:21 DBG] Static files was skipped as the request already matched an endpoint.
[22:50:21 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[22:50:21 DBG] Header: Accept=["*/*"]
[22:50:21 DBG] Header: Connection=["keep-alive"]
[22:50:21 DBG] Header: Host=["localhost:5295"]
[22:50:21 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:50:21 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:50:21 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:50:21 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:50:21 DBG] Header: Cache-Control=["max-age=0"]
[22:50:21 DBG] Header: Origin=["http://localhost:3000"]
[22:50:21 DBG] Header: Referer=["http://localhost:3000/"]
[22:50:21 DBG] Header: Content-Length=["0"]
[22:50:21 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:50:21 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[22:50:21 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:50:21 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:50:21 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[22:50:21 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:50:21 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:50:21 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:50:21 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Query Parameters:
  negotiateVersion: 1
[22:50:21 DBG] Successfully validated the token.
[22:50:21 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:50:21 DBG] Authorization was successful.
[22:50:21 INF] Executing endpoint '/hubs/chat/negotiate'
[22:50:21 DBG] New connection T_eiEdv1y2KkRpjAl7uErQ created.
[22:50:21 DBG] Sending negotiation response.
[22:50:21 INF] Executed endpoint '/hubs/chat/negotiate'
[22:50:21 INF] Response (Duration: 160ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "T_eiEdv1y2KkRpjAl7uErQ",
  "connectionToken": "X825ldIaEETPeCTrwDuzjg",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[22:50:21 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[22:50:21 DBG] Response Body: {"negotiateVersion":1,"connectionId":"T_eiEdv1y2KkRpjAl7uErQ","connectionToken":"X825ldIaEETPeCTrwDuzjg","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[22:50:21 DBG] Connection id "0HNCQ2632GL73" completed keep alive response.
[22:50:21 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 318.1771ms
[22:50:21 DBG] Connection id "0HNCQ2632GL74" accepted.
[22:50:21 DBG] Connection id "0HNCQ2632GL74" started.
[22:50:21 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=X825ldIaEETPeCTrwDuzjg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc - null null
[22:50:21 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[22:50:21 DBG] Request matched endpoint '/hubs/chat'
[22:50:21 DBG] The request has an origin header: 'http://localhost:3000'.
[22:50:21 INF] CORS policy execution successful.
[22:50:21 DBG] Static files was skipped as the request already matched an endpoint.
[22:50:21 INF] HTTP GET /hubs/chat?id=X825ldIaEETPeCTrwDuzjg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc received from ::1
[22:50:21 DBG] Header: Connection=["Upgrade"]
[22:50:21 DBG] Header: Host=["localhost:5295"]
[22:50:21 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:50:21 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:50:21 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:50:21 DBG] Header: Cache-Control=["no-cache"]
[22:50:21 DBG] Header: Origin=["http://localhost:3000"]
[22:50:21 DBG] Header: Pragma=["no-cache"]
[22:50:21 DBG] Header: Upgrade=["websocket"]
[22:50:21 DBG] Header: Sec-WebSocket-Version=["13"]
[22:50:21 DBG] Header: Sec-WebSocket-Key=["zd2l/70utwl8o7n/mDpZig=="]
[22:50:21 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[22:50:21 INF] Request: URL: http://localhost:5295/hubs/chat?id=X825ldIaEETPeCTrwDuzjg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Authenticated: Yes
Query Parameters:
  id: X825ldIaEETPeCTrwDuzjg
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
[22:50:21 DBG] Successfully validated the token.
[22:50:21 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:50:21 DBG] Authorization was successful.
[22:50:21 INF] Executing endpoint '/hubs/chat'
[22:50:21 DBG] Establishing new connection.
[22:50:21 DBG] OnConnectedAsync started.
[22:50:21 DBG] Socket opened using Sub-Protocol: 'null'.
[22:50:21 DBG] Found protocol implementation for requested protocol: json.
[22:50:21 DBG] Completed connection handshake. Using HubProtocol 'json'.
[22:50:21 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:50:21 DBG] Connection id "0HNCQ2632GL75" accepted.
[22:50:21 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:50:21 DBG] Connection id "0HNCQ2632GL75" started.
[22:50:21 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:50:21 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:50:21 DBG] The request has an origin header: 'http://localhost:3000'.
[22:50:21 INF] CORS policy execution successful.
[22:50:21 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:50:21 DBG] The request is a preflight request.
[22:50:22 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:50:22 DBG] Connection id "0HNCQ2632GL72" completed keep alive response.
[22:50:22 DBG] The request has an origin header: 'http://localhost:3000'.
[22:50:22 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 57.8925ms
[22:50:22 INF] CORS policy execution successful.
[22:50:22 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:50:22 DBG] The request is a preflight request.
[22:50:22 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:50:22 DBG] Connection id "0HNCQ2632GL75" completed keep alive response.
[22:50:22 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 61.546ms
[22:50:22 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:50:22 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:50:22 DBG] The request has an origin header: 'http://localhost:3000'.
[22:50:22 INF] CORS policy execution successful.
[22:50:22 DBG] Static files was skipped as the request already matched an endpoint.
[22:50:22 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[22:50:22 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:50:22 DBG] Header: Connection=["keep-alive"]
[22:50:22 DBG] Header: Host=["localhost:5295"]
[22:50:22 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:50:22 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:50:22 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:50:22 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:50:22 DBG] Header: Origin=["http://localhost:3000"]
[22:50:22 DBG] Header: Referer=["http://localhost:3000/"]
[22:50:22 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:50:22 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:50:22 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:50:22 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:50:22 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:50:22 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:50:22 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[22:50:22 DBG] Successfully validated the token.
[22:50:22 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:50:22 DBG] Authorization was successful.
[22:50:22 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:50:22 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:50:22 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:50:22 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:50:22 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:50:22 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:50:22 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:50:22 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:50:22 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:50:22 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:50:22 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:50:22 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:50:22 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:50:22 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:50:22 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:50:22 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:50:22 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:50:22 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:50:22 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:50:22 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:50:22 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:50:22 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:50:22 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:50:22 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:50:22 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:50:22 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:50:22 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:50:25 INF] Executed DbCommand (596ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:50:25 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:50:25 DBG] No information found on request to perform content negotiation.
[22:50:25 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:50:25 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:50:25 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:50:25 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:50:25 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 3565.7275ms
[22:50:25 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:50:25 INF] Response (Duration: 3732ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 9,
  "Page": 1,
  "PageSize": 20
}
[22:50:25 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[22:50:25 DBG] Response Body: {"Messages":[{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":9,"Page":1,"PageSize":20}
[22:50:25 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:50:25 DBG] Connection id "0HNCQ2632GL72" completed keep alive response.
[22:50:25 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:50:26 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:50:26 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:50:26 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 3980.8816ms
[22:50:26 DBG] The request has an origin header: 'http://localhost:3000'.
[22:50:26 INF] CORS policy execution successful.
[22:50:26 DBG] Static files was skipped as the request already matched an endpoint.
[22:50:26 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[22:50:26 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:50:26 DBG] Header: Connection=["keep-alive"]
[22:50:26 DBG] Header: Host=["localhost:5295"]
[22:50:26 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:50:26 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:50:26 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:50:26 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:50:26 DBG] Header: Origin=["http://localhost:3000"]
[22:50:26 DBG] Header: Referer=["http://localhost:3000/"]
[22:50:26 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:50:26 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:50:26 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:50:26 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:50:26 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:50:26 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:50:26 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[22:50:26 DBG] Successfully validated the token.
[22:50:26 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:50:26 DBG] Authorization was successful.
[22:50:26 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:50:26 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:50:26 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:50:26 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:50:26 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:50:26 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:50:26 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:50:26 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:50:26 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:50:26 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:50:26 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:50:26 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:50:26 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:50:26 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:50:26 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:50:26 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:50:26 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:50:26 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:50:26 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:50:26 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:50:26 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:50:26 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:50:26 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:50:26 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:50:26 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:50:26 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:50:26 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:50:27 INF] Executed DbCommand (543ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:50:27 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:50:27 DBG] No information found on request to perform content negotiation.
[22:50:27 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:50:27 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:50:27 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:50:27 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:50:27 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 1195.8619ms
[22:50:27 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:50:27 INF] Response (Duration: 1233ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 9,
  "Page": 1,
  "PageSize": 20
}
[22:50:27 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[22:50:27 DBG] Response Body: {"Messages":[{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":9,"Page":1,"PageSize":20}
[22:50:27 DBG] Connection id "0HNCQ2632GL75" completed keep alive response.
[22:50:27 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 1544.0446ms
[22:50:29 DBG] Received hub invocation: InvocationMessage { InvocationId: "0", Target: "SendMessageToUser", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, adsfasfdas ], StreamIds: [  ] }.
[22:50:30 INF] Executed DbCommand (56ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[22:50:30 INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[22:50:30 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=adsfasfdas - null null
[22:50:30 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[22:50:30 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:50:30 DBG] The request has an origin header: 'http://localhost:3000'.
[22:50:30 INF] CORS policy execution successful.
[22:50:30 DBG] The request is a preflight request.
[22:50:30 DBG] Connection id "0HNCQ2632GL75" completed keep alive response.
[22:50:30 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=adsfasfdas - 204 null null 25.1983ms
[22:50:30 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=adsfasfdas - application/x-www-form-urlencoded 0
[22:50:30 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[22:50:30 DBG] Endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)' with route pattern 'api/messages/send-message' is valid for the request path '/api/messages/send-message'
[22:50:30 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:50:30 DBG] The request has an origin header: 'http://localhost:3000'.
[22:50:30 INF] CORS policy execution successful.
[22:50:30 DBG] Static files was skipped as the request already matched an endpoint.
[22:50:30 INF] HTTP POST /api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=adsfasfdas received from ::1
[22:50:30 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:50:30 DBG] Header: Connection=["keep-alive"]
[22:50:30 DBG] Header: Host=["localhost:5295"]
[22:50:30 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:50:30 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:50:30 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:50:30 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:50:30 DBG] Header: Content-Type=["application/x-www-form-urlencoded"]
[22:50:30 DBG] Header: Origin=["http://localhost:3000"]
[22:50:30 DBG] Header: Referer=["http://localhost:3000/"]
[22:50:30 DBG] Header: Content-Length=["0"]
[22:50:30 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:50:30 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:50:30 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:50:30 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:50:30 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:50:30 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:50:30 INF] Request: URL: http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=adsfasfdas
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Path Parameters:
  action: SendMessage
  controller: Message
Query Parameters:
  senderId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
  content: adsfasfdas
[22:50:30 DBG] Successfully validated the token.
[22:50:30 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:50:30 DBG] Authorization was successful.
[22:50:30 INF] Executing endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:50:30 INF] Route matched with {action = "SendMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.MessageDto]] SendMessage(System.Guid, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.Collections.Generic.List`1[System.String]) on controller SMedia.Controllers.MessageController (SMedia).
[22:50:30 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:50:30 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:50:30 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:50:30 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:50:30 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:50:30 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:50:30 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:50:30 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' ...
[22:50:30 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' using the name 'senderId' in request data ...
[22:50:30 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[22:50:30 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[22:50:30 DBG] Attempting to validate the bound parameter 'senderId' of type 'System.Guid' ...
[22:50:30 DBG] Done attempting to validate the bound parameter 'senderId' of type 'System.Guid'.
[22:50:30 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[22:50:30 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' using the name 'receiverId' in request data ...
[22:50:30 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:50:30 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:50:30 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[22:50:30 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:50:30 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[22:50:30 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' using the name '' in request data ...
[22:50:30 DBG] Could not find a value in the request with name '' for binding parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:50:30 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:50:31 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:50:31 DBG] Attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[22:50:31 DBG] Done attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:50:31 DBG] Attempting to bind parameter 'content' of type 'System.String' ...
[22:50:31 DBG] Attempting to bind parameter 'content' of type 'System.String' using the name 'content' in request data ...
[22:50:31 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[22:50:31 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[22:50:31 DBG] Attempting to validate the bound parameter 'content' of type 'System.String' ...
[22:50:31 DBG] Done attempting to validate the bound parameter 'content' of type 'System.String'.
[22:50:31 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[22:50:31 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' using the name '' in request data ...
[22:50:31 DBG] Could not bind to collection using a format like =value1&=value2
[22:50:31 DBG] Attempting to bind model using indices. Example formats include: [0]=value1&[1]=value2, [0]=value1&[1]=value2, .index=zero&.index=one&[zero]=value1&[one]=value2
[22:50:31 DBG] Attempting to bind model of type 'System.String' using the name '[0]' in request data ...
[22:50:31 DBG] Could not find a value in the request with name '[0]' of type 'System.String'.
[22:50:31 DBG] Done attempting to bind model of type 'System.String' using the name '[0]'.
[22:50:31 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:50:31 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:50:31 DBG] Attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[22:50:31 DBG] Done attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:50:31 INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[22:50:31 INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[22:50:31 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:50:31 DBG] No information found on request to perform content negotiation.
[22:50:31 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:50:31 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:50:31 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:50:31 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.MessageDto'.
[22:50:31 INF] Executed action SMedia.Controllers.MessageController.SendMessage (SMedia) in 456.2511ms
[22:50:31 INF] Executed endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:50:31 INF] Response (Duration: 794ms): API: POST /api/messages/send-message
StatusCode: 200
Body:
{
  "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
  "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
  "SenderUsername": null,
  "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
  "GroupChatId": null,
  "Content": "adsfasfdas",
  "SentAt": "2025-05-23T15:50:31.1951068Z",
  "IsRead": false,
  "Media": []
}
[22:50:31 INF] HTTP 200 returned for POST /api/messages/send-message
[22:50:31 DBG] Response Body: {"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":null,"ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068Z","IsRead":false,"Media":[]}
[22:50:31 DBG] Connection id "0HNCQ2632GL75" completed keep alive response.
[22:50:31 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=adsfasfdas - 200 null application/json; charset=utf-8 1039.786ms
[22:50:57 DBG] Received hub invocation: InvocationMessage { InvocationId: "1", Target: "SendMessageToUser", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, àSFASDF ], StreamIds: [  ] }.
[22:50:57 INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[22:50:57 INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[22:50:57 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C3%A0SFASDF - null null
[22:50:57 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[22:50:57 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:50:57 DBG] The request has an origin header: 'http://localhost:3000'.
[22:50:57 INF] CORS policy execution successful.
[22:50:57 DBG] The request is a preflight request.
[22:50:57 DBG] Connection id "0HNCQ2632GL75" completed keep alive response.
[22:50:57 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C3%A0SFASDF - 204 null null 39.5076ms
[22:50:57 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C3%A0SFASDF - application/x-www-form-urlencoded 0
[22:50:57 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[22:50:57 DBG] Endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)' with route pattern 'api/messages/send-message' is valid for the request path '/api/messages/send-message'
[22:50:57 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:50:57 DBG] The request has an origin header: 'http://localhost:3000'.
[22:50:57 INF] CORS policy execution successful.
[22:50:57 DBG] Static files was skipped as the request already matched an endpoint.
[22:50:57 INF] HTTP POST /api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C3%A0SFASDF received from ::1
[22:50:57 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:50:57 DBG] Header: Connection=["keep-alive"]
[22:50:57 DBG] Header: Host=["localhost:5295"]
[22:50:57 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:50:57 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:50:57 DBG] Header: Accept-Language=["en-US,en;q=0.9,vi;q=0.8"]
[22:50:57 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc"]
[22:50:57 DBG] Header: Content-Type=["application/x-www-form-urlencoded"]
[22:50:57 DBG] Header: Origin=["http://localhost:3000"]
[22:50:57 DBG] Header: Referer=["http://localhost:3000/"]
[22:50:57 DBG] Header: Content-Length=["0"]
[22:50:57 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:50:57 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:50:57 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:50:57 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:50:57 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:50:58 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:50:58 INF] Request: URL: http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C3%A0SFASDF
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc
Path Parameters:
  action: SendMessage
  controller: Message
Query Parameters:
  senderId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
  content: àSFASDF
[22:50:58 DBG] Successfully validated the token.
[22:50:58 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:50:58 DBG] Authorization was successful.
[22:50:58 INF] Executing endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:50:58 INF] Route matched with {action = "SendMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.MessageDto]] SendMessage(System.Guid, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.Collections.Generic.List`1[System.String]) on controller SMedia.Controllers.MessageController (SMedia).
[22:50:58 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:50:58 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:50:58 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:50:58 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:50:58 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:50:58 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:50:58 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:50:58 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' ...
[22:50:58 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' using the name 'senderId' in request data ...
[22:50:58 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[22:50:58 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[22:50:58 DBG] Attempting to validate the bound parameter 'senderId' of type 'System.Guid' ...
[22:50:58 DBG] Done attempting to validate the bound parameter 'senderId' of type 'System.Guid'.
[22:50:58 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[22:50:58 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' using the name 'receiverId' in request data ...
[22:50:58 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:50:58 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:50:58 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[22:50:58 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:50:58 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[22:50:58 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' using the name '' in request data ...
[22:50:58 DBG] Could not find a value in the request with name '' for binding parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:50:58 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:50:58 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:50:58 DBG] Attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[22:50:58 DBG] Done attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:50:58 DBG] Attempting to bind parameter 'content' of type 'System.String' ...
[22:50:58 DBG] Attempting to bind parameter 'content' of type 'System.String' using the name 'content' in request data ...
[22:50:58 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[22:50:58 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[22:50:58 DBG] Attempting to validate the bound parameter 'content' of type 'System.String' ...
[22:50:58 DBG] Done attempting to validate the bound parameter 'content' of type 'System.String'.
[22:50:58 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[22:50:58 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' using the name '' in request data ...
[22:50:58 DBG] Could not bind to collection using a format like =value1&=value2
[22:50:58 DBG] Attempting to bind model using indices. Example formats include: [0]=value1&[1]=value2, [0]=value1&[1]=value2, .index=zero&.index=one&[zero]=value1&[one]=value2
[22:50:58 DBG] Attempting to bind model of type 'System.String' using the name '[0]' in request data ...
[22:50:58 DBG] Could not find a value in the request with name '[0]' of type 'System.String'.
[22:50:59 DBG] Done attempting to bind model of type 'System.String' using the name '[0]'.
[22:50:59 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:50:59 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:50:59 DBG] Attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[22:50:59 DBG] Done attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:50:59 INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[22:50:59 INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[22:50:59 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:50:59 DBG] No information found on request to perform content negotiation.
[22:50:59 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:50:59 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:50:59 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:50:59 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.MessageDto'.
[22:50:59 INF] Executed action SMedia.Controllers.MessageController.SendMessage (SMedia) in 1185.074ms
[22:50:59 INF] Executed endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:50:59 INF] Response (Duration: 1799ms): API: POST /api/messages/send-message
StatusCode: 200
Body:
{
  "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
  "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
  "SenderUsername": null,
  "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
  "GroupChatId": null,
  "Content": "\u00E0SFASDF",
  "SentAt": "2025-05-23T15:50:59.3372603Z",
  "IsRead": false,
  "Media": []
}
[22:50:59 INF] HTTP 200 returned for POST /api/messages/send-message
[22:50:59 DBG] Response Body: {"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":null,"ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603Z","IsRead":false,"Media":[]}
[22:50:59 DBG] Connection id "0HNCQ2632GL75" completed keep alive response.
[22:50:59 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C3%A0SFASDF - 200 null application/json; charset=utf-8 1893.8845ms
[22:51:16 DBG] Connection id "0HNCQ2632GL74" received FIN.
[22:51:16 DBG] Waiting for the application to finish sending data.
[22:51:16 DBG] Connection id "0HNCQ2632GL74" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:51:16 DBG] Connection id "0HNCQ2632GL74" disconnecting.
[22:51:16 DBG] OnConnectedAsync ending.
[22:51:16 DBG] Socket closed.
[22:51:16 DBG] Removing connection X825ldIaEETPeCTrwDuzjg from the list of connections.
[22:51:16 INF] Executed endpoint '/hubs/chat'
[22:51:16 INF] Response (Duration: 54175ms): API: GET /hubs/chat
StatusCode: 101
[22:51:16 INF] HTTP 101 returned for GET /hubs/chat
[22:51:16 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=X825ldIaEETPeCTrwDuzjg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNjM0NCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.jNtdEH96NHwmB1trXUuC_89UF_47_96XPUFsu57znhc - 101 null null 54301.621ms
[22:51:16 DBG] Connection id "0HNCQ2632GL74" stopped.
[22:51:38 DBG] Connection id "0HNCQ2632GL76" accepted.
[22:51:38 DBG] Connection id "0HNCQ2632GL76" started.
[22:51:38 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[22:51:38 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[22:51:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:51:38 DBG] The request has an origin header: 'http://localhost:3000'.
[22:51:38 INF] CORS policy execution successful.
[22:51:38 DBG] The request is a preflight request.
[22:51:38 DBG] Connection id "0HNCQ2632GL76" completed keep alive response.
[22:51:38 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 26.1318ms
[22:51:38 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 59
[22:51:38 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[22:51:38 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[22:51:38 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:51:38 DBG] The request has an origin header: 'http://localhost:3000'.
[22:51:38 INF] CORS policy execution successful.
[22:51:38 DBG] Static files was skipped as the request already matched an endpoint.
[22:51:38 INF] HTTP POST /api/Authentication/login received from ::1
[22:51:38 DBG] Header: Accept=["*/*"]
[22:51:38 DBG] Header: Connection=["keep-alive"]
[22:51:38 DBG] Header: Host=["localhost:5295"]
[22:51:38 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:51:38 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:51:38 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:51:38 DBG] Header: Content-Type=["application/json"]
[22:51:38 DBG] Header: Origin=["http://localhost:3000"]
[22:51:38 DBG] Header: Referer=["http://localhost:3000/"]
[22:51:38 DBG] Header: Content-Length=["59"]
[22:51:38 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:51:38 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:51:38 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:51:38 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:51:38 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:51:38 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:51:38 DBG] Connection id "0HNCQ2632GL76", Request id "0HNCQ2632GL76:00000002": started reading request body.
[22:51:38 DBG] Connection id "0HNCQ2632GL76", Request id "0HNCQ2632GL76:00000002": done reading request body.
[22:51:38 INF] Request Body: {"email":"anh.anhle012345@gmail.com","password":"12345678"}
[22:51:38 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anh.anhle012345@gmail.com",
  "password": "12345678"
}
[22:51:38 DBG] AuthenticationScheme: Bearer was not authenticated.
[22:51:38 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:51:38 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[22:51:38 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:51:38 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:51:38 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:51:38 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:51:38 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[22:51:38 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[22:51:38 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[22:51:38 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[22:51:38 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[22:51:38 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[22:51:38 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[22:51:38 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:51:38 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:51:38 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[22:51:38 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:51:38 INF] Executed DbCommand (34ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[22:51:39 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:51:39 DBG] No information found on request to perform content negotiation.
[22:51:39 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[22:51:39 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:51:39 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.AuthResponse'.
[22:51:39 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 544.8826ms
[22:51:39 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:51:39 INF] Response (Duration: 802ms): API: POST /api/Authentication/login
StatusCode: 200
Body:
{
  "Token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc"
}
[22:51:39 INF] HTTP 200 returned for POST /api/Authentication/login
[22:51:39 DBG] Response Body: {"Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc"}
[22:51:39 DBG] Connection id "0HNCQ2632GL76" completed keep alive response.
[22:51:39 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 200 null application/json; charset=utf-8 930.3287ms
[22:51:49 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[22:51:49 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:51:49 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:51:49 DBG] The request has an origin header: 'http://localhost:3000'.
[22:51:49 INF] CORS policy execution successful.
[22:51:49 DBG] The request is a preflight request.
[22:51:49 DBG] Connection id "0HNCQ2632GL76" completed keep alive response.
[22:51:49 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 14.5581ms
[22:51:49 DBG] Connection id "0HNCQ2632GL77" accepted.
[22:51:49 DBG] Connection id "0HNCQ2632GL77" started.
[22:51:49 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[22:51:49 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:51:49 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:51:49 DBG] The request has an origin header: 'http://localhost:3000'.
[22:51:49 INF] CORS policy execution successful.
[22:51:49 DBG] Static files was skipped as the request already matched an endpoint.
[22:51:49 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[22:51:49 DBG] Header: Accept=["*/*"]
[22:51:49 DBG] Header: Connection=["keep-alive"]
[22:51:49 DBG] Header: Host=["localhost:5295"]
[22:51:49 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:51:49 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:51:49 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:51:49 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc"]
[22:51:49 DBG] Header: Cache-Control=["max-age=0"]
[22:51:49 DBG] Header: Origin=["http://localhost:3000"]
[22:51:49 DBG] Header: Referer=["http://localhost:3000/"]
[22:51:49 DBG] Header: Content-Length=["0"]
[22:51:49 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:51:49 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[22:51:49 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:51:49 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:51:49 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[22:51:49 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:51:49 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:51:49 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:51:49 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc
Query Parameters:
  negotiateVersion: 1
[22:51:49 DBG] Successfully validated the token.
[22:51:49 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:51:49 DBG] Authorization was successful.
[22:51:49 INF] Executing endpoint '/hubs/chat/negotiate'
[22:51:49 DBG] New connection rXhpx0o-tTvnQBEM__8hpg created.
[22:51:49 DBG] Sending negotiation response.
[22:51:49 INF] Executed endpoint '/hubs/chat/negotiate'
[22:51:49 INF] Response (Duration: 11ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "rXhpx0o-tTvnQBEM__8hpg",
  "connectionToken": "5iRiQr8Xp8pNCC8rgPgjpw",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[22:51:49 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[22:51:49 DBG] Response Body: {"negotiateVersion":1,"connectionId":"rXhpx0o-tTvnQBEM__8hpg","connectionToken":"5iRiQr8Xp8pNCC8rgPgjpw","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[22:51:49 DBG] Connection id "0HNCQ2632GL77" completed keep alive response.
[22:51:49 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 75.77ms
[22:51:49 DBG] Connection id "0HNCQ2632GL78" accepted.
[22:51:49 DBG] Connection id "0HNCQ2632GL78" started.
[22:51:49 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=5iRiQr8Xp8pNCC8rgPgjpw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc - null null
[22:51:49 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[22:51:49 DBG] Request matched endpoint '/hubs/chat'
[22:51:49 DBG] The request has an origin header: 'http://localhost:3000'.
[22:51:49 INF] CORS policy execution successful.
[22:51:49 DBG] Static files was skipped as the request already matched an endpoint.
[22:51:49 INF] HTTP GET /hubs/chat?id=5iRiQr8Xp8pNCC8rgPgjpw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc received from ::1
[22:51:49 DBG] Header: Connection=["Upgrade"]
[22:51:49 DBG] Header: Host=["localhost:5295"]
[22:51:49 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:51:49 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:51:49 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:51:49 DBG] Header: Cache-Control=["no-cache"]
[22:51:49 DBG] Header: Origin=["http://localhost:3000"]
[22:51:49 DBG] Header: Pragma=["no-cache"]
[22:51:49 DBG] Header: Upgrade=["websocket"]
[22:51:49 DBG] Header: Sec-WebSocket-Version=["13"]
[22:51:49 DBG] Header: Sec-WebSocket-Key=["lQUMBQEaD3Oalhbff9kofw=="]
[22:51:49 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[22:51:49 INF] Request: URL: http://localhost:5295/hubs/chat?id=5iRiQr8Xp8pNCC8rgPgjpw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc
Authenticated: Yes
Query Parameters:
  id: 5iRiQr8Xp8pNCC8rgPgjpw
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc
[22:51:49 DBG] Successfully validated the token.
[22:51:49 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:51:49 DBG] Authorization was successful.
[22:51:49 INF] Executing endpoint '/hubs/chat'
[22:51:49 DBG] Establishing new connection.
[22:51:49 DBG] OnConnectedAsync started.
[22:51:49 DBG] Socket opened using Sub-Protocol: 'null'.
[22:51:49 DBG] Found protocol implementation for requested protocol: json.
[22:51:49 DBG] Completed connection handshake. Using HubProtocol 'json'.
[22:51:49 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:51:49 DBG] Connection id "0HNCQ2632GL79" accepted.
[22:51:49 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:51:49 DBG] Connection id "0HNCQ2632GL79" started.
[22:51:49 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:51:49 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:51:49 DBG] The request has an origin header: 'http://localhost:3000'.
[22:51:49 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:51:49 INF] CORS policy execution successful.
[22:51:49 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:51:49 DBG] The request is a preflight request.
[22:51:49 DBG] The request has an origin header: 'http://localhost:3000'.
[22:51:49 DBG] Connection id "0HNCQ2632GL76" completed keep alive response.
[22:51:49 INF] CORS policy execution successful.
[22:51:49 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 21.4317ms
[22:51:49 DBG] The request is a preflight request.
[22:51:49 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:51:49 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:51:49 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:51:49 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 24.3508ms
[22:51:49 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:51:49 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:51:49 DBG] The request has an origin header: 'http://localhost:3000'.
[22:51:49 INF] CORS policy execution successful.
[22:51:49 DBG] Static files was skipped as the request already matched an endpoint.
[22:51:49 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[22:51:49 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:51:49 DBG] Header: Connection=["keep-alive"]
[22:51:49 DBG] Header: Host=["localhost:5295"]
[22:51:49 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:51:49 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:51:49 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:51:49 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc"]
[22:51:49 DBG] Header: Origin=["http://localhost:3000"]
[22:51:49 DBG] Header: Referer=["http://localhost:3000/"]
[22:51:49 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:51:49 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:51:49 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:51:49 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:51:49 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:51:49 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:51:49 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[22:51:49 DBG] Successfully validated the token.
[22:51:49 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:51:49 DBG] Authorization was successful.
[22:51:49 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:51:49 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:51:49 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:51:49 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:51:49 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:51:49 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:51:49 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:51:49 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:51:49 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:51:49 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:51:49 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:51:49 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:51:49 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:51:49 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:51:49 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:51:49 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:51:49 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:51:49 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:51:49 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:51:49 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:51:49 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:51:49 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:51:49 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:51:49 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:51:49 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:51:49 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:51:49 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:51:50 INF] Executed DbCommand (538ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:51:50 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:51:50 DBG] No information found on request to perform content negotiation.
[22:51:50 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:51:50 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:51:50 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:51:50 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:51:50 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 623.252ms
[22:51:50 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:51:50 INF] Response (Duration: 655ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 13,
  "Page": 1,
  "PageSize": 20
}
[22:51:50 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[22:51:50 DBG] Response Body: {"Messages":[{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":13,"Page":1,"PageSize":20}
[22:51:50 DBG] Connection id "0HNCQ2632GL76" completed keep alive response.
[22:51:50 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[22:51:50 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 935.75ms
[22:51:50 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:51:50 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[22:51:50 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:51:50 DBG] The request has an origin header: 'http://localhost:3000'.
[22:51:50 INF] CORS policy execution successful.
[22:51:50 DBG] Static files was skipped as the request already matched an endpoint.
[22:51:50 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[22:51:50 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:51:50 DBG] Header: Connection=["keep-alive"]
[22:51:50 DBG] Header: Host=["localhost:5295"]
[22:51:50 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:51:50 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:51:50 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:51:50 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc"]
[22:51:50 DBG] Header: Origin=["http://localhost:3000"]
[22:51:50 DBG] Header: Referer=["http://localhost:3000/"]
[22:51:50 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:51:50 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:51:50 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:51:50 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:51:50 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:51:50 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:51:50 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[22:51:50 DBG] Successfully validated the token.
[22:51:50 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:51:50 DBG] Authorization was successful.
[22:51:50 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:51:50 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:51:50 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:51:50 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:51:50 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:51:50 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:51:50 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:51:50 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:51:50 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:51:50 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:51:50 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:51:50 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:51:50 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:51:50 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:51:50 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:51:50 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:51:51 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:51:51 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:51:51 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:51:51 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:51:51 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:51:51 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:51:51 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:51:51 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:51:51 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:51:51 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:51:51 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:51:51 INF] Executed DbCommand (542ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:51:51 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:51:51 DBG] No information found on request to perform content negotiation.
[22:51:51 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:51:51 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:51:51 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:51:51 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:51:51 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 936.3193ms
[22:51:51 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:51:51 INF] Response (Duration: 979ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 13,
  "Page": 1,
  "PageSize": 20
}
[22:51:51 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[22:51:51 DBG] Response Body: {"Messages":[{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":13,"Page":1,"PageSize":20}
[22:51:51 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:51:51 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 1238.4827ms
[22:52:06 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[22:52:06 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[22:52:06 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:52:06 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:06 INF] CORS policy execution successful.
[22:52:06 DBG] The request is a preflight request.
[22:52:06 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:52:06 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 20.8022ms
[22:52:06 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 57
[22:52:06 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[22:52:06 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[22:52:06 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:52:06 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:06 INF] CORS policy execution successful.
[22:52:06 DBG] Static files was skipped as the request already matched an endpoint.
[22:52:06 INF] HTTP POST /api/Authentication/login received from ::1
[22:52:06 DBG] Header: Accept=["*/*"]
[22:52:06 DBG] Header: Connection=["keep-alive"]
[22:52:06 DBG] Header: Host=["localhost:5295"]
[22:52:06 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:52:06 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:52:06 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:52:06 DBG] Header: Content-Type=["application/json"]
[22:52:06 DBG] Header: Origin=["http://localhost:3000"]
[22:52:06 DBG] Header: Referer=["http://localhost:3000/"]
[22:52:06 DBG] Header: Content-Length=["57"]
[22:52:06 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:52:06 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:52:06 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:52:06 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:52:06 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:52:06 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:52:06 DBG] Connection id "0HNCQ2632GL79", Request id "0HNCQ2632GL79:00000004": started reading request body.
[22:52:06 DBG] Connection id "0HNCQ2632GL79", Request id "0HNCQ2632GL79:00000004": done reading request body.
[22:52:06 INF] Request Body: {"email":"anhlehongwork@gmail.com","password":"12345678"}
[22:52:06 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anhlehongwork@gmail.com",
  "password": "12345678"
}
[22:52:06 DBG] AuthenticationScheme: Bearer was not authenticated.
[22:52:06 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:52:06 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[22:52:06 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:52:06 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:52:06 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:52:06 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:52:06 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[22:52:06 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[22:52:06 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[22:52:06 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[22:52:06 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[22:52:06 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[22:52:06 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[22:52:06 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:52:06 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:52:06 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[22:52:06 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[22:52:07 INF] Executed DbCommand (35ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[22:52:07 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:52:07 DBG] No information found on request to perform content negotiation.
[22:52:07 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[22:52:07 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:52:07 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.AuthResponse'.
[22:52:07 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 702.3083ms
[22:52:07 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[22:52:07 INF] Response (Duration: 742ms): API: POST /api/Authentication/login
StatusCode: 200
Body:
{
  "Token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA"
}
[22:52:07 INF] HTTP 200 returned for POST /api/Authentication/login
[22:52:07 DBG] Response Body: {"Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA"}
[22:52:07 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:52:07 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 200 null application/json; charset=utf-8 850.1625ms
[22:52:13 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[22:52:13 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:52:13 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:52:13 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:13 INF] CORS policy execution successful.
[22:52:13 DBG] The request is a preflight request.
[22:52:13 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:52:13 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 13.7342ms
[22:52:13 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[22:52:13 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:52:13 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:52:13 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:13 INF] CORS policy execution successful.
[22:52:13 DBG] Static files was skipped as the request already matched an endpoint.
[22:52:13 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[22:52:13 DBG] Header: Accept=["*/*"]
[22:52:13 DBG] Header: Connection=["keep-alive"]
[22:52:13 DBG] Header: Host=["localhost:5295"]
[22:52:13 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:52:13 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:52:13 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:52:13 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA"]
[22:52:13 DBG] Header: Cache-Control=["max-age=0"]
[22:52:13 DBG] Header: Origin=["http://localhost:3000"]
[22:52:13 DBG] Header: Referer=["http://localhost:3000/"]
[22:52:13 DBG] Header: Content-Length=["0"]
[22:52:13 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:52:13 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[22:52:13 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:52:13 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:52:13 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[22:52:13 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:52:13 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:52:13 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:52:13 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA
Query Parameters:
  negotiateVersion: 1
[22:52:13 DBG] Successfully validated the token.
[22:52:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:52:13 DBG] Authorization was successful.
[22:52:13 INF] Executing endpoint '/hubs/chat/negotiate'
[22:52:13 DBG] New connection _xLjssqKBdVobVWj07JBVQ created.
[22:52:13 DBG] Sending negotiation response.
[22:52:13 INF] Executed endpoint '/hubs/chat/negotiate'
[22:52:13 INF] Response (Duration: 10ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "_xLjssqKBdVobVWj07JBVQ",
  "connectionToken": "OS4uYVirR2P7Cg5nQLtMgw",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[22:52:13 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[22:52:13 DBG] Response Body: {"negotiateVersion":1,"connectionId":"_xLjssqKBdVobVWj07JBVQ","connectionToken":"OS4uYVirR2P7Cg5nQLtMgw","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[22:52:13 DBG] Connection id "0HNCQ2632GL77" completed keep alive response.
[22:52:13 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 77.5183ms
[22:52:13 DBG] Connection id "0HNCQ2632GL7A" accepted.
[22:52:13 DBG] Connection id "0HNCQ2632GL7A" started.
[22:52:13 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=OS4uYVirR2P7Cg5nQLtMgw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA - null null
[22:52:13 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[22:52:13 DBG] Request matched endpoint '/hubs/chat'
[22:52:13 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:13 INF] CORS policy execution successful.
[22:52:13 DBG] Static files was skipped as the request already matched an endpoint.
[22:52:13 INF] HTTP GET /hubs/chat?id=OS4uYVirR2P7Cg5nQLtMgw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA received from ::1
[22:52:13 DBG] Header: Connection=["Upgrade"]
[22:52:13 DBG] Header: Host=["localhost:5295"]
[22:52:13 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:52:13 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:52:13 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:52:13 DBG] Header: Cache-Control=["no-cache"]
[22:52:13 DBG] Header: Origin=["http://localhost:3000"]
[22:52:13 DBG] Header: Pragma=["no-cache"]
[22:52:13 DBG] Header: Upgrade=["websocket"]
[22:52:13 DBG] Header: Sec-WebSocket-Version=["13"]
[22:52:13 DBG] Header: Sec-WebSocket-Key=["WklsnUU802Sy2W8UHNfNZA=="]
[22:52:13 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[22:52:13 INF] Request: URL: http://localhost:5295/hubs/chat?id=OS4uYVirR2P7Cg5nQLtMgw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA
Authenticated: Yes
Query Parameters:
  id: OS4uYVirR2P7Cg5nQLtMgw
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA
[22:52:13 DBG] Successfully validated the token.
[22:52:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:52:13 DBG] Authorization was successful.
[22:52:13 INF] Executing endpoint '/hubs/chat'
[22:52:13 DBG] Establishing new connection.
[22:52:13 DBG] OnConnectedAsync started.
[22:52:13 DBG] Socket opened using Sub-Protocol: 'null'.
[22:52:13 DBG] Found protocol implementation for requested protocol: json.
[22:52:13 DBG] Completed connection handshake. Using HubProtocol 'json'.
[22:52:13 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[22:52:13 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[22:52:13 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:13 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:13 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:52:13 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:52:13 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:13 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:13 INF] CORS policy execution successful.
[22:52:13 INF] CORS policy execution successful.
[22:52:13 DBG] The request is a preflight request.
[22:52:13 DBG] The request is a preflight request.
[22:52:13 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:52:13 DBG] Connection id "0HNCQ2632GL76" completed keep alive response.
[22:52:13 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 204 null null 22.7417ms
[22:52:13 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 204 null null 23.4915ms
[22:52:13 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[22:52:13 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:13 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:13 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:13 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:13 INF] CORS policy execution successful.
[22:52:13 DBG] Static files was skipped as the request already matched an endpoint.
[22:52:13 INF] HTTP GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 received from ::1
[22:52:13 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:52:13 DBG] Header: Connection=["keep-alive"]
[22:52:13 DBG] Header: Host=["localhost:5295"]
[22:52:13 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:52:13 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:52:13 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:52:13 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA"]
[22:52:13 DBG] Header: Origin=["http://localhost:3000"]
[22:52:13 DBG] Header: Referer=["http://localhost:3000/"]
[22:52:13 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:52:13 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:52:13 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:52:13 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:52:13 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:52:13 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:52:13 INF] Request: URL: http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
Query Parameters:
  page: 1
  pageSize: 20
[22:52:13 DBG] Successfully validated the token.
[22:52:13 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:52:13 DBG] Authorization was successful.
[22:52:13 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:13 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:52:13 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:52:13 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:52:14 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:52:14 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:52:14 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:52:14 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:14 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:14 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:52:14 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:52:14 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:52:14 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:52:14 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:52:14 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:52:14 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:52:14 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:52:14 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:52:14 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:52:14 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:52:14 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:52:14 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:52:14 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:52:14 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:52:14 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:52:14 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:52:14 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:52:14 INF] Executed DbCommand (544ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:52:14 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:52:14 DBG] No information found on request to perform content negotiation.
[22:52:14 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:52:14 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:52:14 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:52:14 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:52:14 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 661.7446ms
[22:52:14 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:14 INF] Response (Duration: 695ms): API: GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 13,
  "Page": 1,
  "PageSize": 20
}
[22:52:14 INF] HTTP 200 returned for GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
[22:52:14 DBG] Response Body: {"Messages":[{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":13,"Page":1,"PageSize":20}
[22:52:14 DBG] Connection id "0HNCQ2632GL76" completed keep alive response.
[22:52:14 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[22:52:14 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 200 null application/json; charset=utf-8 818.941ms
[22:52:14 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:14 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:14 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:14 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:14 INF] CORS policy execution successful.
[22:52:14 DBG] Static files was skipped as the request already matched an endpoint.
[22:52:14 INF] HTTP GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 received from ::1
[22:52:14 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:52:14 DBG] Header: Connection=["keep-alive"]
[22:52:14 DBG] Header: Host=["localhost:5295"]
[22:52:14 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:52:14 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:52:14 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:52:14 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA"]
[22:52:14 DBG] Header: Origin=["http://localhost:3000"]
[22:52:14 DBG] Header: Referer=["http://localhost:3000/"]
[22:52:14 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:52:14 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:52:14 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:52:14 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:52:14 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:52:14 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:52:14 INF] Request: URL: http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
Query Parameters:
  page: 1
  pageSize: 20
[22:52:14 DBG] Successfully validated the token.
[22:52:14 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:52:14 DBG] Authorization was successful.
[22:52:14 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:14 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:52:14 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:52:14 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:52:14 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:52:14 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:52:14 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:52:14 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:14 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:14 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:52:14 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:52:14 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:52:14 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:52:14 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:52:14 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:52:14 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:52:14 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:52:14 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:52:14 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:52:14 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:52:14 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:52:14 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:52:14 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:52:14 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:52:14 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:52:14 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:52:14 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:52:15 INF] Executed DbCommand (546ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:52:15 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:52:15 DBG] No information found on request to perform content negotiation.
[22:52:15 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:52:15 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:52:15 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:52:15 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:52:15 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 648.32ms
[22:52:15 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:15 INF] Response (Duration: 689ms): API: GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 13,
  "Page": 1,
  "PageSize": 20
}
[22:52:15 INF] HTTP 200 returned for GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
[22:52:15 DBG] Response Body: {"Messages":[{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":13,"Page":1,"PageSize":20}
[22:52:15 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:52:15 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 200 null application/json; charset=utf-8 977.3113ms
[22:52:23 DBG] Received hub invocation: InvocationMessage { InvocationId: "0", Target: "SendMessageToUser", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, thành công chưa ], StreamIds: [  ] }.
[22:52:23 INF] Executed DbCommand (41ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[22:52:23 INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[22:52:23 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=th%C3%A0nh+c%C3%B4ng+ch%C6%B0a - null null
[22:52:23 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[22:52:23 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:52:23 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:23 INF] CORS policy execution successful.
[22:52:23 DBG] The request is a preflight request.
[22:52:23 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:52:23 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=th%C3%A0nh+c%C3%B4ng+ch%C6%B0a - 204 null null 17.2943ms
[22:52:23 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=th%C3%A0nh+c%C3%B4ng+ch%C6%B0a - application/x-www-form-urlencoded 0
[22:52:23 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[22:52:23 DBG] Endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)' with route pattern 'api/messages/send-message' is valid for the request path '/api/messages/send-message'
[22:52:23 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:52:23 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:23 INF] CORS policy execution successful.
[22:52:23 DBG] Static files was skipped as the request already matched an endpoint.
[22:52:23 INF] HTTP POST /api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=th%C3%A0nh+c%C3%B4ng+ch%C6%B0a received from ::1
[22:52:23 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:52:23 DBG] Header: Connection=["keep-alive"]
[22:52:23 DBG] Header: Host=["localhost:5295"]
[22:52:23 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:52:23 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:52:23 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:52:23 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc"]
[22:52:23 DBG] Header: Content-Type=["application/x-www-form-urlencoded"]
[22:52:23 DBG] Header: Origin=["http://localhost:3000"]
[22:52:23 DBG] Header: Referer=["http://localhost:3000/"]
[22:52:23 DBG] Header: Content-Length=["0"]
[22:52:23 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:52:24 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:52:24 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:52:24 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:52:24 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:52:24 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:52:24 INF] Request: URL: http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=th%C3%A0nh+c%C3%B4ng+ch%C6%B0a
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc
Path Parameters:
  action: SendMessage
  controller: Message
Query Parameters:
  senderId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
  content: thành công chưa
[22:52:24 DBG] Successfully validated the token.
[22:52:24 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:52:24 DBG] Authorization was successful.
[22:52:24 INF] Executing endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:52:24 INF] Route matched with {action = "SendMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.MessageDto]] SendMessage(System.Guid, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.Collections.Generic.List`1[System.String]) on controller SMedia.Controllers.MessageController (SMedia).
[22:52:24 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:52:24 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:52:24 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:52:24 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:52:24 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:52:24 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:24 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:24 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' ...
[22:52:24 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' using the name 'senderId' in request data ...
[22:52:24 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[22:52:24 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[22:52:24 DBG] Attempting to validate the bound parameter 'senderId' of type 'System.Guid' ...
[22:52:24 DBG] Done attempting to validate the bound parameter 'senderId' of type 'System.Guid'.
[22:52:24 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[22:52:24 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' using the name 'receiverId' in request data ...
[22:52:24 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:52:24 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:52:24 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[22:52:24 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:52:24 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[22:52:24 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' using the name '' in request data ...
[22:52:24 DBG] Could not find a value in the request with name '' for binding parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:52:24 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:52:24 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:52:24 DBG] Attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[22:52:24 DBG] Done attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:52:24 DBG] Attempting to bind parameter 'content' of type 'System.String' ...
[22:52:24 DBG] Attempting to bind parameter 'content' of type 'System.String' using the name 'content' in request data ...
[22:52:24 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[22:52:24 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[22:52:24 DBG] Attempting to validate the bound parameter 'content' of type 'System.String' ...
[22:52:24 DBG] Done attempting to validate the bound parameter 'content' of type 'System.String'.
[22:52:24 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[22:52:24 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' using the name '' in request data ...
[22:52:24 DBG] Could not bind to collection using a format like =value1&=value2
[22:52:24 DBG] Attempting to bind model using indices. Example formats include: [0]=value1&[1]=value2, [0]=value1&[1]=value2, .index=zero&.index=one&[zero]=value1&[one]=value2
[22:52:24 DBG] Attempting to bind model of type 'System.String' using the name '[0]' in request data ...
[22:52:24 DBG] Could not find a value in the request with name '[0]' of type 'System.String'.
[22:52:25 DBG] Done attempting to bind model of type 'System.String' using the name '[0]'.
[22:52:25 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:52:25 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:52:25 DBG] Attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[22:52:25 DBG] Done attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:52:25 INF] Executed DbCommand (41ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[22:52:25 INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[22:52:25 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:52:25 DBG] No information found on request to perform content negotiation.
[22:52:25 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:52:25 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:52:25 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:52:25 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.MessageDto'.
[22:52:25 INF] Executed action SMedia.Controllers.MessageController.SendMessage (SMedia) in 864.3196ms
[22:52:25 INF] Executed endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:52:25 INF] Response (Duration: 1495ms): API: POST /api/messages/send-message
StatusCode: 200
Body:
{
  "MessageId": "6449b592-d74b-46b4-8aec-158e6258020c",
  "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
  "SenderUsername": null,
  "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
  "GroupChatId": null,
  "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
  "SentAt": "2025-05-23T15:52:25.1446238Z",
  "IsRead": false,
  "Media": []
}
[22:52:25 INF] HTTP 200 returned for POST /api/messages/send-message
[22:52:25 DBG] Response Body: {"MessageId":"6449b592-d74b-46b4-8aec-158e6258020c","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":null,"ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:25.1446238Z","IsRead":false,"Media":[]}
[22:52:25 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:52:25 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=th%C3%A0nh+c%C3%B4ng+ch%C6%B0a - 200 null application/json; charset=utf-8 1571.7995ms
[22:52:32 DBG] Connection id "0HNCQ2632GL73" disconnecting.
[22:52:32 DBG] Connection id "0HNCQ2632GL73" stopped.
[22:52:32 DBG] Connection id "0HNCQ2632GL73" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:52:37 DBG] Connection id "0HNCQ2632GL72" disconnecting.
[22:52:37 DBG] Connection id "0HNCQ2632GL72" stopped.
[22:52:37 DBG] Connection id "0HNCQ2632GL72" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:52:37 DBG] Connection id "0HNCQ2632GL7A" received FIN.
[22:52:37 DBG] Waiting for the application to finish sending data.
[22:52:37 DBG] OnConnectedAsync ending.
[22:52:37 DBG] Connection id "0HNCQ2632GL7A" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:52:37 DBG] Connection id "0HNCQ2632GL7A" disconnecting.
[22:52:37 DBG] Socket closed.
[22:52:37 DBG] Removing connection OS4uYVirR2P7Cg5nQLtMgw from the list of connections.
[22:52:37 INF] Executed endpoint '/hubs/chat'
[22:52:37 INF] Response (Duration: 23981ms): API: GET /hubs/chat
StatusCode: 101
[22:52:37 INF] HTTP 101 returned for GET /hubs/chat
[22:52:37 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=OS4uYVirR2P7Cg5nQLtMgw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA - 101 null null 24040.0112ms
[22:52:37 DBG] Connection id "0HNCQ2632GL7A" stopped.
[22:52:38 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[22:52:38 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:52:38 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:52:38 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:38 INF] CORS policy execution successful.
[22:52:38 DBG] The request is a preflight request.
[22:52:38 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:52:38 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 13.5006ms
[22:52:38 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[22:52:38 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[22:52:38 DBG] Request matched endpoint '/hubs/chat/negotiate'
[22:52:38 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:38 INF] CORS policy execution successful.
[22:52:38 DBG] Static files was skipped as the request already matched an endpoint.
[22:52:38 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[22:52:38 DBG] Header: Accept=["*/*"]
[22:52:38 DBG] Header: Connection=["keep-alive"]
[22:52:38 DBG] Header: Host=["localhost:5295"]
[22:52:38 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:52:38 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:52:38 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:52:38 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA"]
[22:52:38 DBG] Header: Cache-Control=["max-age=0"]
[22:52:38 DBG] Header: Origin=["http://localhost:3000"]
[22:52:38 DBG] Header: Referer=["http://localhost:3000/"]
[22:52:38 DBG] Header: Content-Length=["0"]
[22:52:38 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:52:38 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[22:52:38 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:52:38 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:52:38 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[22:52:38 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:52:38 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:52:38 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:52:38 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA
Query Parameters:
  negotiateVersion: 1
[22:52:38 DBG] Successfully validated the token.
[22:52:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:52:38 DBG] Authorization was successful.
[22:52:38 INF] Executing endpoint '/hubs/chat/negotiate'
[22:52:38 DBG] New connection vCj5KxYezYB91H2LIf9PaA created.
[22:52:38 DBG] Sending negotiation response.
[22:52:38 INF] Executed endpoint '/hubs/chat/negotiate'
[22:52:38 INF] Response (Duration: 11ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "vCj5KxYezYB91H2LIf9PaA",
  "connectionToken": "tkwT6SRc6D-PuIPOAxjK4w",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[22:52:38 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[22:52:38 DBG] Response Body: {"negotiateVersion":1,"connectionId":"vCj5KxYezYB91H2LIf9PaA","connectionToken":"tkwT6SRc6D-PuIPOAxjK4w","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[22:52:38 DBG] Connection id "0HNCQ2632GL77" completed keep alive response.
[22:52:38 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 82.9652ms
[22:52:38 DBG] Connection id "0HNCQ2632GL7B" accepted.
[22:52:38 DBG] Connection id "0HNCQ2632GL7B" started.
[22:52:38 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=tkwT6SRc6D-PuIPOAxjK4w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA - null null
[22:52:38 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[22:52:38 DBG] Request matched endpoint '/hubs/chat'
[22:52:38 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:38 INF] CORS policy execution successful.
[22:52:38 DBG] Static files was skipped as the request already matched an endpoint.
[22:52:38 INF] HTTP GET /hubs/chat?id=tkwT6SRc6D-PuIPOAxjK4w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA received from ::1
[22:52:38 DBG] Header: Connection=["Upgrade"]
[22:52:38 DBG] Header: Host=["localhost:5295"]
[22:52:38 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:52:38 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:52:38 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:52:38 DBG] Header: Cache-Control=["no-cache"]
[22:52:38 DBG] Header: Origin=["http://localhost:3000"]
[22:52:38 DBG] Header: Pragma=["no-cache"]
[22:52:38 DBG] Header: Upgrade=["websocket"]
[22:52:38 DBG] Header: Sec-WebSocket-Version=["13"]
[22:52:38 DBG] Header: Sec-WebSocket-Key=["zdVvW0BkFFeFLnyuLG5/jw=="]
[22:52:38 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[22:52:38 INF] Request: URL: http://localhost:5295/hubs/chat?id=tkwT6SRc6D-PuIPOAxjK4w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA
Authenticated: Yes
Query Parameters:
  id: tkwT6SRc6D-PuIPOAxjK4w
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA
[22:52:38 DBG] Successfully validated the token.
[22:52:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:52:38 DBG] Authorization was successful.
[22:52:38 INF] Executing endpoint '/hubs/chat'
[22:52:38 DBG] Establishing new connection.
[22:52:38 DBG] OnConnectedAsync started.
[22:52:38 DBG] Socket opened using Sub-Protocol: 'null'.
[22:52:38 DBG] Found protocol implementation for requested protocol: json.
[22:52:38 DBG] Completed connection handshake. Using HubProtocol 'json'.
[22:52:38 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[22:52:38 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[22:52:38 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:38 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:52:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:52:38 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:38 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:38 INF] CORS policy execution successful.
[22:52:38 INF] CORS policy execution successful.
[22:52:38 DBG] The request is a preflight request.
[22:52:38 DBG] The request is a preflight request.
[22:52:38 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:52:38 DBG] Connection id "0HNCQ2632GL76" completed keep alive response.
[22:52:38 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 204 null null 28.2659ms
[22:52:38 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 204 null null 28.694ms
[22:52:38 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[22:52:38 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:38 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:38 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:38 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:38 INF] CORS policy execution successful.
[22:52:38 DBG] Static files was skipped as the request already matched an endpoint.
[22:52:38 INF] HTTP GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 received from ::1
[22:52:38 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:52:38 DBG] Header: Connection=["keep-alive"]
[22:52:38 DBG] Header: Host=["localhost:5295"]
[22:52:38 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:52:38 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:52:38 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:52:38 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA"]
[22:52:38 DBG] Header: Origin=["http://localhost:3000"]
[22:52:38 DBG] Header: Referer=["http://localhost:3000/"]
[22:52:38 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:52:38 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:52:38 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:52:38 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:52:38 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:52:38 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:52:38 INF] Request: URL: http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
Query Parameters:
  page: 1
  pageSize: 20
[22:52:38 DBG] Successfully validated the token.
[22:52:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:52:38 DBG] Authorization was successful.
[22:52:38 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:38 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:52:38 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:52:38 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:52:38 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:52:38 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:52:38 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:52:38 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:38 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:38 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:52:38 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:52:38 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:52:38 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:52:38 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:52:38 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:52:38 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:52:38 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:52:38 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:52:38 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:52:38 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:52:38 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:52:38 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:52:38 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:52:38 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:52:38 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:52:38 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:52:38 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:52:38 INF] Executed DbCommand (540ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:52:38 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:52:38 DBG] No information found on request to perform content negotiation.
[22:52:38 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:52:38 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:52:38 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:52:38 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:52:38 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 634.0625ms
[22:52:38 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:38 INF] Response (Duration: 675ms): API: GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "6449b592-d74b-46b4-8aec-158e6258020c",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:25.1446238",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fbcef994-c640-4c95-883d-3734389c1af6",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:23.8157184",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 15,
  "Page": 1,
  "PageSize": 20
}
[22:52:39 INF] HTTP 200 returned for GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
[22:52:39 DBG] Response Body: {"Messages":[{"MessageId":"6449b592-d74b-46b4-8aec-158e6258020c","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:25.1446238","IsRead":false,"Media":[]},{"MessageId":"fbcef994-c640-4c95-883d-3734389c1af6","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:23.8157184","IsRead":false,"Media":[]},{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":15,"Page":1,"PageSize":20}
[22:52:39 DBG] Connection id "0HNCQ2632GL79" completed keep alive response.
[22:52:39 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[22:52:39 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 200 null application/json; charset=utf-8 895.04ms
[22:52:39 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:39 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[22:52:39 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:39 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:39 INF] CORS policy execution successful.
[22:52:39 DBG] Static files was skipped as the request already matched an endpoint.
[22:52:39 INF] HTTP GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 received from ::1
[22:52:39 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:52:39 DBG] Header: Connection=["keep-alive"]
[22:52:39 DBG] Header: Host=["localhost:5295"]
[22:52:39 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:52:39 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:52:39 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:52:39 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA"]
[22:52:39 DBG] Header: Origin=["http://localhost:3000"]
[22:52:39 DBG] Header: Referer=["http://localhost:3000/"]
[22:52:39 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:52:39 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:52:39 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:52:39 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:52:39 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:52:39 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:52:39 INF] Request: URL: http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
Query Parameters:
  page: 1
  pageSize: 20
[22:52:39 DBG] Successfully validated the token.
[22:52:39 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:52:39 DBG] Authorization was successful.
[22:52:39 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:39 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[22:52:39 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:52:39 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:52:39 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:52:39 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:52:39 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:52:39 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:39 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:39 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[22:52:39 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[22:52:39 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:52:39 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[22:52:39 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[22:52:39 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[22:52:39 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[22:52:39 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[22:52:39 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:52:39 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[22:52:39 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[22:52:39 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[22:52:39 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[22:52:39 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[22:52:39 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:52:39 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[22:52:39 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[22:52:39 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[22:52:40 INF] Executed DbCommand (544ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[22:52:40 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:52:40 DBG] No information found on request to perform content negotiation.
[22:52:40 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:52:40 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:52:40 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:52:40 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[22:52:40 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 954.3519ms
[22:52:40 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[22:52:40 INF] Response (Duration: 1165ms): API: GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "6449b592-d74b-46b4-8aec-158e6258020c",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:25.1446238",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fbcef994-c640-4c95-883d-3734389c1af6",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:23.8157184",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 15,
  "Page": 1,
  "PageSize": 20
}
[22:52:40 INF] HTTP 200 returned for GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
[22:52:40 DBG] Response Body: {"Messages":[{"MessageId":"6449b592-d74b-46b4-8aec-158e6258020c","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:25.1446238","IsRead":false,"Media":[]},{"MessageId":"fbcef994-c640-4c95-883d-3734389c1af6","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:23.8157184","IsRead":false,"Media":[]},{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":15,"Page":1,"PageSize":20}
[22:52:40 DBG] Connection id "0HNCQ2632GL76" completed keep alive response.
[22:52:40 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 200 null application/json; charset=utf-8 1260.5487ms
[22:52:46 DBG] Received hub invocation: InvocationMessage { InvocationId: "0", Target: "SendMessageToUser", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, đã thành công rồi ], StreamIds: [  ] }.
[22:52:46 INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[22:52:46 INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[22:52:46 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91%C3%A3+th%C3%A0nh+c%C3%B4ng+r%E1%BB%93i - null null
[22:52:46 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[22:52:46 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[22:52:46 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:46 INF] CORS policy execution successful.
[22:52:46 DBG] The request is a preflight request.
[22:52:46 DBG] Connection id "0HNCQ2632GL76" completed keep alive response.
[22:52:46 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91%C3%A3+th%C3%A0nh+c%C3%B4ng+r%E1%BB%93i - 204 null null 37.534ms
[22:52:46 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91%C3%A3+th%C3%A0nh+c%C3%B4ng+r%E1%BB%93i - application/x-www-form-urlencoded 0
[22:52:46 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[22:52:46 DBG] Endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)' with route pattern 'api/messages/send-message' is valid for the request path '/api/messages/send-message'
[22:52:46 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:52:46 DBG] The request has an origin header: 'http://localhost:3000'.
[22:52:46 INF] CORS policy execution successful.
[22:52:46 DBG] Static files was skipped as the request already matched an endpoint.
[22:52:46 INF] HTTP POST /api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91%C3%A3+th%C3%A0nh+c%C3%B4ng+r%E1%BB%93i received from ::1
[22:52:46 DBG] Header: Accept=["application/json, text/plain, */*"]
[22:52:46 DBG] Header: Connection=["keep-alive"]
[22:52:46 DBG] Header: Host=["localhost:5295"]
[22:52:46 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[22:52:46 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[22:52:46 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[22:52:46 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA"]
[22:52:46 DBG] Header: Content-Type=["application/x-www-form-urlencoded"]
[22:52:46 DBG] Header: Origin=["http://localhost:3000"]
[22:52:46 DBG] Header: Referer=["http://localhost:3000/"]
[22:52:46 DBG] Header: Content-Length=["0"]
[22:52:46 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[22:52:46 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[22:52:46 DBG] Header: sec-ch-ua-mobile=["?0"]
[22:52:46 DBG] Header: Sec-Fetch-Site=["same-site"]
[22:52:46 DBG] Header: Sec-Fetch-Mode=["cors"]
[22:52:46 DBG] Header: Sec-Fetch-Dest=["empty"]
[22:52:46 INF] Request: URL: http://localhost:5295/api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91%C3%A3+th%C3%A0nh+c%C3%B4ng+r%E1%BB%93i
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA
Path Parameters:
  action: SendMessage
  controller: Message
Query Parameters:
  senderId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
  content: đã thành công rồi
[22:52:46 DBG] Successfully validated the token.
[22:52:46 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[22:52:46 DBG] Authorization was successful.
[22:52:46 INF] Executing endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:52:46 INF] Route matched with {action = "SendMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.MessageDto]] SendMessage(System.Guid, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.Collections.Generic.List`1[System.String]) on controller SMedia.Controllers.MessageController (SMedia).
[22:52:46 DBG] Execution plan of authorization filters (in the following order): ["None"]
[22:52:46 DBG] Execution plan of resource filters (in the following order): ["None"]
[22:52:46 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[22:52:46 DBG] Execution plan of exception filters (in the following order): ["None"]
[22:52:46 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[22:52:46 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:46 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[22:52:46 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' ...
[22:52:46 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' using the name 'senderId' in request data ...
[22:52:46 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[22:52:46 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[22:52:46 DBG] Attempting to validate the bound parameter 'senderId' of type 'System.Guid' ...
[22:52:46 DBG] Done attempting to validate the bound parameter 'senderId' of type 'System.Guid'.
[22:52:46 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[22:52:46 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' using the name 'receiverId' in request data ...
[22:52:47 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:52:47 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:52:47 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[22:52:47 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[22:52:47 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[22:52:47 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' using the name '' in request data ...
[22:52:47 DBG] Could not find a value in the request with name '' for binding parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:52:47 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:52:47 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:52:47 DBG] Attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[22:52:47 DBG] Done attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[22:52:47 DBG] Attempting to bind parameter 'content' of type 'System.String' ...
[22:52:47 DBG] Attempting to bind parameter 'content' of type 'System.String' using the name 'content' in request data ...
[22:52:47 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[22:52:47 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[22:52:47 DBG] Attempting to validate the bound parameter 'content' of type 'System.String' ...
[22:52:47 DBG] Done attempting to validate the bound parameter 'content' of type 'System.String'.
[22:52:47 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[22:52:47 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' using the name '' in request data ...
[22:52:47 DBG] Could not bind to collection using a format like =value1&=value2
[22:52:47 DBG] Attempting to bind model using indices. Example formats include: [0]=value1&[1]=value2, [0]=value1&[1]=value2, .index=zero&.index=one&[zero]=value1&[one]=value2
[22:52:47 DBG] Attempting to bind model of type 'System.String' using the name '[0]' in request data ...
[22:52:47 DBG] Could not find a value in the request with name '[0]' of type 'System.String'.
[22:52:47 DBG] Done attempting to bind model of type 'System.String' using the name '[0]'.
[22:52:47 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:52:47 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:52:47 DBG] Attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[22:52:47 DBG] Done attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[22:52:47 INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[22:52:47 INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[22:52:47 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[22:52:47 DBG] No information found on request to perform content negotiation.
[22:52:47 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[22:52:47 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[22:52:47 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[22:52:47 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.MessageDto'.
[22:52:47 INF] Executed action SMedia.Controllers.MessageController.SendMessage (SMedia) in 450.9253ms
[22:52:47 INF] Executed endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[22:52:47 INF] Response (Duration: 530ms): API: POST /api/messages/send-message
StatusCode: 200
Body:
{
  "MessageId": "96334ad5-9f39-4be8-9e06-0835033617dd",
  "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
  "SenderUsername": null,
  "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
  "GroupChatId": null,
  "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
  "SentAt": "2025-05-23T15:52:47.2499887Z",
  "IsRead": false,
  "Media": []
}
[22:52:47 INF] HTTP 200 returned for POST /api/messages/send-message
[22:52:47 DBG] Response Body: {"MessageId":"96334ad5-9f39-4be8-9e06-0835033617dd","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":null,"ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:47.2499887Z","IsRead":false,"Media":[]}
[22:52:47 DBG] Connection id "0HNCQ2632GL76" completed keep alive response.
[22:52:47 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91%C3%A3+th%C3%A0nh+c%C3%B4ng+r%E1%BB%93i - 200 null application/json; charset=utf-8 720.5584ms
[22:53:10 DBG] Connection id "0HNCQ2632GL75" disconnecting.
[22:53:10 DBG] Connection id "0HNCQ2632GL75" stopped.
[22:53:10 DBG] Connection id "0HNCQ2632GL75" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:54:49 DBG] Connection id "0HNCQ2632GL77" disconnecting.
[22:54:49 DBG] Connection id "0HNCQ2632GL77" stopped.
[22:54:49 DBG] Connection id "0HNCQ2632GL77" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:54:50 DBG] Connection id "0HNCQ2632GL79" disconnecting.
[22:54:50 DBG] Connection id "0HNCQ2632GL79" stopped.
[22:54:50 DBG] Connection id "0HNCQ2632GL79" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:54:58 DBG] Connection id "0HNCQ2632GL76" disconnecting.
[22:54:58 DBG] Connection id "0HNCQ2632GL76" stopped.
[22:54:58 DBG] Connection id "0HNCQ2632GL76" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:56:07 INF] Application is shutting down...
[22:56:07 DBG] Hosting stopping
[22:56:07 DBG] Waiting for the application to finish sending data.
[22:56:07 DBG] Waiting for the application to finish sending data.
[22:56:07 DBG] Socket closed.
[22:56:07 DBG] Socket closed.
[22:56:07 DBG] OnConnectedAsync ending.
[22:56:07 DBG] OnConnectedAsync ending.
[22:56:07 DBG] Removing connection tkwT6SRc6D-PuIPOAxjK4w from the list of connections.
[22:56:07 INF] Executed endpoint '/hubs/chat'
[22:56:07 DBG] Removing connection 5iRiQr8Xp8pNCC8rgPgjpw from the list of connections.
[22:56:07 INF] Executed endpoint '/hubs/chat'
[22:56:07 INF] Response (Duration: 209098ms): API: GET /hubs/chat
StatusCode: 101
[22:56:07 INF] Response (Duration: 257835ms): API: GET /hubs/chat
StatusCode: 101
[22:56:07 INF] HTTP 101 returned for GET /hubs/chat
[22:56:07 INF] HTTP 101 returned for GET /hubs/chat
[22:56:07 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=tkwT6SRc6D-PuIPOAxjK4w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA3NTI3LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.wv1rEUimrezk6Pvymoff_ILg6k3bDu7MA8hRG2flEuA - 101 null null 209150.9358ms
[22:56:07 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=5iRiQr8Xp8pNCC8rgPgjpw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYwNzQ5OSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.dS-ea2jOfCdo9N14HbpuGnUvXIDBvWt_foxMKFoY9Oc - 101 null null 257889.0066ms
[22:56:07 DBG] Connection id "0HNCQ2632GL7B" disconnecting.
[22:56:07 DBG] Connection id "0HNCQ2632GL78" disconnecting.
[22:56:07 DBG] Connection id "0HNCQ2632GL7B" stopped.
[22:56:07 DBG] Connection id "0HNCQ2632GL78" stopped.
[22:56:07 DBG] Connection id "0HNCQ2632GL7B" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:56:07 DBG] Connection id "0HNCQ2632GL78" sending FIN because: "The Socket transport's send loop completed gracefully."
[22:56:07 DBG] Hosting stopped
[23:12:29 DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
[23:12:29 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[23:12:29 DBG] Hosting starting
[23:12:29 INF] User profile is available. Using 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:12:29 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-14a3d168-18db-4f02-bf32-5d12a5c3d5f9.xml'.
[23:12:29 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-18e390e9-1029-4eaf-a8ee-1e70e5eef3df.xml'.
[23:12:29 DBG] Found key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9}.
[23:12:29 DBG] Found key {18e390e9-1029-4eaf-a8ee-1e70e5eef3df}.
[23:12:29 DBG] Considering key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} with expiration date 2025-06-01 03:53:05Z as default key.
[23:12:29 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[23:12:29 DBG] Decrypting secret element using Windows DPAPI.
[23:12:29 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[23:12:29 DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
[23:12:29 DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
[23:12:29 DBG] Using key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} as the default key.
[23:12:29 DBG] Key ring with default key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} was loaded during application startup.
[23:12:29 INF] Now listening on: http://localhost:5295
[23:12:29 DBG] Loaded hosting startup assembly SMedia
[23:12:29 INF] Application started. Press Ctrl+C to shut down.
[23:12:29 INF] Hosting environment: Development
[23:12:29 INF] Content root path: E:\hcmue_03_hk02\cn_web\BACK_END\BackEnd-SocialMedia\SMedia
[23:12:29 DBG] Hosting started
[23:12:29 DBG] Connection id "0HNCQ2IF1U84F" received FIN.
[23:12:29 DBG] Connection id "0HNCQ2IF1U84F" accepted.
[23:12:29 DBG] Connection id "0HNCQ2IF1U84F" started.
[23:12:29 DBG] Connection id "0HNCQ2IF1U84F" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:12:29 DBG] Connection id "0HNCQ2IF1U84F" disconnecting.
[23:12:29 DBG] Connection id "0HNCQ2IF1U84F" stopped.
[23:12:30 DBG] Connection id "0HNCQ2IF1U84G" accepted.
[23:12:30 DBG] Connection id "0HNCQ2IF1U84G" started.
[23:12:30 INF] Request starting HTTP/1.1 GET http://localhost:5295/swagger/index.html - null null
[23:12:30 DBG] Wildcard detected, all requests with hosts will be allowed.
[23:12:30 DBG] No candidates found for the request path '/swagger/index.html'
[23:12:30 DBG] Request did not match any endpoints
[23:12:30 DBG] Connection id "0HNCQ2IF1U84G" completed keep alive response.
[23:12:30 INF] Request finished HTTP/1.1 GET http://localhost:5295/swagger/index.html - 200 null text/html;charset=utf-8 115.9811ms
[23:12:30 INF] Request starting HTTP/1.1 GET http://localhost:5295/swagger/v1/swagger.json - null null
[23:12:30 DBG] No candidates found for the request path '/swagger/v1/swagger.json'
[23:12:30 DBG] Request did not match any endpoints
[23:12:30 DBG] Connection id "0HNCQ2IF1U84G" completed keep alive response.
[23:12:30 INF] Request finished HTTP/1.1 GET http://localhost:5295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 128.8794ms
[23:12:38 DBG] Connection id "0HNCQ2IF1U84H" accepted.
[23:12:38 DBG] Connection id "0HNCQ2IF1U84H" started.
[23:12:38 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[23:12:38 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:12:38 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:12:38 DBG] The request has an origin header: 'http://localhost:3000'.
[23:12:38 INF] CORS policy execution successful.
[23:12:38 DBG] The request is a preflight request.
[23:12:38 DBG] Connection id "0HNCQ2IF1U84H" completed keep alive response.
[23:12:38 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 58.3741ms
[23:12:38 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 55
[23:12:38 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:12:38 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[23:12:38 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:12:38 DBG] The request has an origin header: 'http://localhost:3000'.
[23:12:38 INF] CORS policy execution successful.
[23:12:38 DBG] Static files was skipped as the request already matched an endpoint.
[23:12:39 INF] HTTP POST /api/Authentication/login received from ::1
[23:12:39 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:12:39 DBG] Header: Connection=["keep-alive"]
[23:12:39 DBG] Header: Host=["localhost:5295"]
[23:12:39 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:12:39 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:12:39 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:12:39 DBG] Header: Content-Type=["application/json"]
[23:12:39 DBG] Header: Origin=["http://localhost:3000"]
[23:12:39 DBG] Header: Referer=["http://localhost:3000/"]
[23:12:39 DBG] Header: Content-Length=["55"]
[23:12:39 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:12:39 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:12:39 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:12:39 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:12:39 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:12:39 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:12:39 DBG] Connection id "0HNCQ2IF1U84H", Request id "0HNCQ2IF1U84H:00000002": started reading request body.
[23:12:39 DBG] Connection id "0HNCQ2IF1U84H", Request id "0HNCQ2IF1U84H:00000002": done reading request body.
[23:12:39 INF] Request Body: {"email":"anhlehongwork@gmail.com","password":"123456"}
[23:12:39 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anhlehongwork@gmail.com",
  "password": "123456"
}
[23:12:39 DBG] AuthenticationScheme: Bearer was not authenticated.
[23:12:39 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:12:39 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[23:12:39 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:12:39 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:12:39 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:12:39 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:12:39 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[23:12:39 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:12:39 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:12:39 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:12:39 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[23:12:39 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[23:12:39 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[23:12:39 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:12:39 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:12:39 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:12:39 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:12:39 INF] Executing action method SMedia.Controllers.AuthenticationController.Login (SMedia) - Validation state: "Valid"
[23:12:43 INF] Executed DbCommand (124ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[23:12:43 INF] Executed action method SMedia.Controllers.AuthenticationController.Login (SMedia), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 4243.2444ms.
[23:12:43 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:12:43 DBG] No information found on request to perform content negotiation.
[23:12:43 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[23:12:43 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:12:43 INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
[23:12:43 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 4635.5242ms
[23:12:43 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:12:43 INF] Response (Duration: 4825ms): API: POST /api/Authentication/login
StatusCode: 401
Body:
"Incorrect email or password."
[23:12:43 INF] HTTP 401 returned for POST /api/Authentication/login
[23:12:43 DBG] Response Body: "Incorrect email or password."
[23:12:44 DBG] Connection id "0HNCQ2IF1U84H" completed keep alive response.
[23:12:44 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 401 null application/json; charset=utf-8 5083.8889ms
[23:13:05 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[23:13:05 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:13:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:13:05 DBG] The request has an origin header: 'http://localhost:3000'.
[23:13:05 INF] CORS policy execution successful.
[23:13:05 DBG] The request is a preflight request.
[23:13:05 DBG] Connection id "0HNCQ2IF1U84H" completed keep alive response.
[23:13:05 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 33.0201ms
[23:13:06 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 57
[23:13:06 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:13:06 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[23:13:06 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:13:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:13:06 INF] CORS policy execution successful.
[23:13:06 DBG] Static files was skipped as the request already matched an endpoint.
[23:13:06 INF] HTTP POST /api/Authentication/login received from ::1
[23:13:06 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:13:06 DBG] Header: Connection=["keep-alive"]
[23:13:06 DBG] Header: Host=["localhost:5295"]
[23:13:06 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:13:06 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:13:06 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:13:06 DBG] Header: Content-Type=["application/json"]
[23:13:06 DBG] Header: Origin=["http://localhost:3000"]
[23:13:06 DBG] Header: Referer=["http://localhost:3000/"]
[23:13:06 DBG] Header: Content-Length=["57"]
[23:13:06 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:13:06 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:13:06 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:13:06 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:13:06 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:13:06 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:13:06 DBG] Connection id "0HNCQ2IF1U84H", Request id "0HNCQ2IF1U84H:00000004": started reading request body.
[23:13:06 DBG] Connection id "0HNCQ2IF1U84H", Request id "0HNCQ2IF1U84H:00000004": done reading request body.
[23:13:06 INF] Request Body: {"email":"anhlehongwork@gmail.com","password":"12345678"}
[23:13:06 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anhlehongwork@gmail.com",
  "password": "12345678"
}
[23:13:06 DBG] AuthenticationScheme: Bearer was not authenticated.
[23:13:06 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:13:06 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[23:13:06 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:13:06 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:13:06 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:13:06 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:13:06 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[23:13:06 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:13:06 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:13:06 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:13:06 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[23:13:06 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[23:13:06 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[23:13:06 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:13:06 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:13:06 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:13:06 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:13:06 INF] Executing action method SMedia.Controllers.AuthenticationController.Login (SMedia) - Validation state: "Valid"
[23:13:06 INF] Executed DbCommand (40ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[23:13:06 INF] Executed action method SMedia.Controllers.AuthenticationController.Login (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 573.2662ms.
[23:13:06 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:13:06 DBG] No information found on request to perform content negotiation.
[23:13:06 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[23:13:06 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:13:06 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.AuthResponse'.
[23:13:06 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 657.3431ms
[23:13:06 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:13:06 INF] Response (Duration: 706ms): API: POST /api/Authentication/login
StatusCode: 200
Body:
{
  "Token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8"
}
[23:13:06 INF] HTTP 200 returned for POST /api/Authentication/login
[23:13:06 DBG] Response Body: {"Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8"}
[23:13:06 DBG] Connection id "0HNCQ2IF1U84H" completed keep alive response.
[23:13:06 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 200 null application/json; charset=utf-8 824.1827ms
[23:13:06 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[23:13:06 DBG] Connection id "0HNCQ2IF1U84I" accepted.
[23:13:06 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:13:06 DBG] Connection id "0HNCQ2IF1U84I" started.
[23:13:06 DBG] Connection id "0HNCQ2IF1U84J" accepted.
[23:13:06 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:13:06 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - null null
[23:13:06 DBG] Connection id "0HNCQ2IF1U84J" started.
[23:13:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:13:06 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:13:06 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - null null
[23:13:06 INF] CORS policy execution successful.
[23:13:06 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:13:06 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:13:06 DBG] The request is a preflight request.
[23:13:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:13:06 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:13:06 DBG] Connection id "0HNCQ2IF1U84H" completed keep alive response.
[23:13:06 INF] CORS policy execution successful.
[23:13:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:13:06 DBG] Connection id "0HNCQ2IF1U84K" accepted.
[23:13:06 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 52.58ms
[23:13:06 DBG] The request is a preflight request.
[23:13:06 INF] CORS policy execution successful.
[23:13:06 DBG] Connection id "0HNCQ2IF1U84K" started.
[23:13:06 DBG] Connection id "0HNCQ2IF1U84I" completed keep alive response.
[23:13:06 DBG] The request is a preflight request.
[23:13:06 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[23:13:06 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - 204 null null 71.1951ms
[23:13:06 DBG] Connection id "0HNCQ2IF1U84J" completed keep alive response.
[23:13:06 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:13:06 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/search - null null
[23:13:06 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - 204 null null 78.3171ms
[23:13:06 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:13:06 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:13:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:13:06 DBG] Endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)' with route pattern 'api/Users/{userId}' is valid for the request path '/api/users/search'
[23:13:06 INF] CORS policy execution successful.
[23:13:06 DBG] Request matched endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:13:06 DBG] Static files was skipped as the request already matched an endpoint.
[23:13:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:13:06 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[23:13:06 INF] CORS policy execution successful.
[23:13:07 DBG] Header: Accept=["*/*"]
[23:13:07 DBG] Static files was skipped as the request already matched an endpoint.
[23:13:07 DBG] Header: Connection=["keep-alive"]
[23:13:07 INF] HTTP GET /api/users/search received from ::1
[23:13:07 DBG] Header: Host=["localhost:5295"]
[23:13:07 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:13:07 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:13:07 DBG] Header: Connection=["keep-alive"]
[23:13:07 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:13:07 DBG] Header: Host=["localhost:5295"]
[23:13:07 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:13:07 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:13:07 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8"]
[23:13:07 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:13:07 DBG] Header: Cache-Control=["max-age=0"]
[23:13:07 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:13:07 DBG] Header: Origin=["http://localhost:3000"]
[23:13:07 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8"]
[23:13:07 DBG] Header: Referer=["http://localhost:3000/"]
[23:13:07 DBG] Header: Origin=["http://localhost:3000"]
[23:13:07 DBG] Header: Content-Length=["0"]
[23:13:07 DBG] Header: Referer=["http://localhost:3000/"]
[23:13:07 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:13:07 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:13:07 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[23:13:07 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:13:07 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:13:07 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:13:07 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:13:07 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:13:07 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[23:13:07 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:13:07 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:13:07 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:13:07 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:13:07 INF] Request: URL: http://localhost:5295/api/users/search
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Path Parameters:
  action: GetUser
  controller: Users
  userId: search
[23:13:07 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:13:07 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Query Parameters:
  negotiateVersion: 1
[23:13:07 DBG] Successfully validated the token.
[23:13:07 DBG] Successfully validated the token.
[23:13:07 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:13:07 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:13:07 DBG] Authorization was successful.
[23:13:07 DBG] Authorization was successful.
[23:13:07 INF] Executing endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:13:07 INF] Executing endpoint '/hubs/chat/negotiate'
[23:13:07 DBG] New connection mtTkJsL-lTgXuIWYNuPQig created.
[23:13:07 INF] Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUser(System.Guid) on controller Presentation.Controllers.UsersController (SMedia).
[23:13:07 DBG] Sending negotiation response.
[23:13:07 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:13:07 INF] Executed endpoint '/hubs/chat/negotiate'
[23:13:07 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:13:07 INF] Response (Duration: 196ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "mtTkJsL-lTgXuIWYNuPQig",
  "connectionToken": "BCdzTFR1cHVw5_QGKrSp3w",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[23:13:07 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:13:07 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[23:13:07 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:13:07 DBG] Response Body: {"negotiateVersion":1,"connectionId":"mtTkJsL-lTgXuIWYNuPQig","connectionToken":"BCdzTFR1cHVw5_QGKrSp3w","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[23:13:07 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:13:07 DBG] Connection id "0HNCQ2IF1U84K" completed keep alive response.
[23:13:07 DBG] Executing controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:13:07 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 469.1561ms
[23:13:07 DBG] Connection id "0HNCQ2IF1U84L" accepted.
[23:13:07 DBG] Executed controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:13:07 DBG] Connection id "0HNCQ2IF1U84L" started.
[23:13:07 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
[23:13:07 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=BCdzTFR1cHVw5_QGKrSp3w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8 - null null
[23:13:07 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
[23:13:07 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[23:13:07 DBG] Request matched endpoint '/hubs/chat'
[23:13:07 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:13:07 DBG] The request has an origin header: 'http://localhost:3000'.
[23:13:07 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:13:07 INF] CORS policy execution successful.
[23:13:07 DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
[23:13:07 DBG] Static files was skipped as the request already matched an endpoint.
[23:13:07 DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
[23:13:07 INF] HTTP GET /hubs/chat?id=BCdzTFR1cHVw5_QGKrSp3w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8 received from ::1
[23:13:07 DBG] The request has model state errors, returning an error response.
[23:13:07 DBG] Header: Connection=["Upgrade"]
[23:13:07 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:13:07 DBG] Header: Host=["localhost:5295"]
[23:13:07 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:13:07 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:13:07 DBG] No information found on request to perform content negotiation.
[23:13:07 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:13:07 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:13:07 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:13:07 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:13:07 DBG] Header: Cache-Control=["no-cache"]
[23:13:07 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:13:07 DBG] Header: Origin=["http://localhost:3000"]
[23:13:07 DBG] Header: Pragma=["no-cache"]
[23:13:07 DBG] Header: Upgrade=["websocket"]
[23:13:07 DBG] Header: Sec-WebSocket-Version=["13"]
[23:13:07 DBG] Header: Sec-WebSocket-Key=["SwmaESmX42ZM46vNpYM+Lw=="]
[23:13:07 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[23:13:07 INF] Request: URL: http://localhost:5295/hubs/chat?id=BCdzTFR1cHVw5_QGKrSp3w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Authenticated: Yes
Query Parameters:
  id: BCdzTFR1cHVw5_QGKrSp3w
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
[23:13:07 DBG] Successfully validated the token.
[23:13:07 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:13:07 INF] Executed action Presentation.Controllers.UsersController.GetUser (SMedia) in 134.62ms
[23:13:07 DBG] Authorization was successful.
[23:13:07 INF] Executed endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:13:07 INF] Executing endpoint '/hubs/chat'
[23:13:07 INF] Response (Duration: 380ms): API: GET /api/users/search
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-d6ee5e64cd5c15ec4850ae73c71d82a8-84d69a82303d86a6-00"}
[23:13:07 INF] HTTP 400 returned for GET /api/users/search
[23:13:07 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-d6ee5e64cd5c15ec4850ae73c71d82a8-84d69a82303d86a6-00"}
[23:13:07 DBG] Establishing new connection.
[23:13:07 DBG] Connection id "0HNCQ2IF1U84I" completed keep alive response.
[23:13:07 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/search - null null
[23:13:07 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/search - 400 null application/problem+json; charset=utf-8 598.868ms
[23:13:07 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:13:07 DBG] OnConnectedAsync started.
[23:13:07 DBG] Socket opened using Sub-Protocol: 'null'.
[23:13:07 DBG] Endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)' with route pattern 'api/Users/{userId}' is valid for the request path '/api/users/search'
[23:13:07 DBG] Request matched endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:13:07 DBG] The request has an origin header: 'http://localhost:3000'.
[23:13:07 INF] CORS policy execution successful.
[23:13:07 DBG] Static files was skipped as the request already matched an endpoint.
[23:13:07 INF] HTTP GET /api/users/search received from ::1
[23:13:07 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:13:07 DBG] Found protocol implementation for requested protocol: json.
[23:13:07 DBG] Header: Connection=["keep-alive"]
[23:13:07 DBG] Completed connection handshake. Using HubProtocol 'json'.
[23:13:07 DBG] Header: Host=["localhost:5295"]
[23:13:07 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:13:07 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:13:07 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:13:07 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8"]
[23:13:07 DBG] Header: Origin=["http://localhost:3000"]
[23:13:07 DBG] Header: Referer=["http://localhost:3000/"]
[23:13:07 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:13:07 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:13:07 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:13:07 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:13:07 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:13:07 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:13:07 INF] Request: URL: http://localhost:5295/api/users/search
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Path Parameters:
  action: GetUser
  controller: Users
  userId: search
[23:13:07 DBG] Successfully validated the token.
[23:13:07 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:13:07 DBG] Authorization was successful.
[23:13:07 INF] Executing endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:13:07 INF] Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUser(System.Guid) on controller Presentation.Controllers.UsersController (SMedia).
[23:13:07 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:13:07 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:13:07 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:13:07 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:13:07 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:13:07 DBG] Executing controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:13:07 DBG] Executed controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:13:07 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
[23:13:07 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
[23:13:07 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:13:07 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:13:07 DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
[23:13:07 DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
[23:13:07 DBG] The request has model state errors, returning an error response.
[23:13:07 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:13:07 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:13:07 DBG] No information found on request to perform content negotiation.
[23:13:07 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:13:07 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:13:07 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:13:07 INF] Executed action Presentation.Controllers.UsersController.GetUser (SMedia) in 39.3733ms
[23:13:07 INF] Executed endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:13:07 INF] Response (Duration: 67ms): API: GET /api/users/search
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-f4e39f554587979791b570cfb5ae0888-88e5976273bbf1bd-00"}
[23:13:07 INF] HTTP 400 returned for GET /api/users/search
[23:13:07 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-f4e39f554587979791b570cfb5ae0888-88e5976273bbf1bd-00"}
[23:13:07 DBG] Connection id "0HNCQ2IF1U84J" completed keep alive response.
[23:13:07 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/search - 400 null application/problem+json; charset=utf-8 142.4151ms
[23:14:41 DBG] Connection id "0HNCQ2IF1U84G" disconnecting.
[23:14:41 DBG] Connection id "0HNCQ2IF1U84G" stopped.
[23:14:41 DBG] Connection id "0HNCQ2IF1U84G" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:15:17 DBG] Connection id "0HNCQ2IF1U84H" disconnecting.
[23:15:17 DBG] Connection id "0HNCQ2IF1U84H" stopped.
[23:15:17 DBG] Connection id "0HNCQ2IF1U84H" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:15:18 DBG] Connection id "0HNCQ2IF1U84I" disconnecting.
[23:15:18 DBG] Connection id "0HNCQ2IF1U84J" disconnecting.
[23:15:18 DBG] Connection id "0HNCQ2IF1U84J" stopped.
[23:15:18 DBG] Connection id "0HNCQ2IF1U84I" stopped.
[23:15:18 DBG] Connection id "0HNCQ2IF1U84K" disconnecting.
[23:15:18 DBG] Connection id "0HNCQ2IF1U84J" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:15:18 DBG] Connection id "0HNCQ2IF1U84I" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:15:18 DBG] Connection id "0HNCQ2IF1U84K" stopped.
[23:15:18 DBG] Connection id "0HNCQ2IF1U84K" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:25:09 DBG] Connection id "0HNCQ2IF1U84L" received FIN.
[23:25:09 DBG] Waiting for the application to finish sending data.
[23:25:09 DBG] Connection id "0HNCQ2IF1U84L" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:25:09 DBG] Connection id "0HNCQ2IF1U84L" disconnecting.
[23:25:09 DBG] OnConnectedAsync ending.
[23:25:09 DBG] Socket closed.
[23:25:09 DBG] Removing connection BCdzTFR1cHVw5_QGKrSp3w from the list of connections.
[23:25:09 INF] Executed endpoint '/hubs/chat'
[23:25:09 INF] Response (Duration: 722199ms): API: GET /hubs/chat
StatusCode: 101
[23:25:09 INF] HTTP 101 returned for GET /hubs/chat
[23:25:09 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=BCdzTFR1cHVw5_QGKrSp3w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8 - 101 null null 722300.8807ms
[23:25:09 DBG] Connection id "0HNCQ2IF1U84L" stopped.
[23:26:53 DBG] Connection id "0HNCQ2IF1U84M" accepted.
[23:26:53 DBG] Connection id "0HNCQ2IF1U84M" started.
[23:26:53 DBG] Connection id "0HNCQ2IF1U84N" accepted.
[23:26:53 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - null null
[23:26:53 DBG] Connection id "0HNCQ2IF1U84N" started.
[23:26:53 DBG] Connection id "0HNCQ2IF1U84O" accepted.
[23:26:53 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:26:53 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - null null
[23:26:53 DBG] Connection id "0HNCQ2IF1U84O" started.
[23:26:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:26:53 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:26:53 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[23:26:53 DBG] The request has an origin header: 'http://localhost:3000'.
[23:26:53 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:26:53 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:26:53 INF] CORS policy execution successful.
[23:26:53 DBG] The request has an origin header: 'http://localhost:3000'.
[23:26:53 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:26:53 DBG] The request is a preflight request.
[23:26:53 INF] CORS policy execution successful.
[23:26:53 DBG] The request has an origin header: 'http://localhost:3000'.
[23:26:53 DBG] Connection id "0HNCQ2IF1U84M" completed keep alive response.
[23:26:53 DBG] The request is a preflight request.
[23:26:53 INF] CORS policy execution successful.
[23:26:53 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - 204 null null 36.7095ms
[23:26:53 DBG] Connection id "0HNCQ2IF1U84N" completed keep alive response.
[23:26:53 DBG] The request is a preflight request.
[23:26:53 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/search - null null
[23:26:53 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - 204 null null 36.6548ms
[23:26:53 DBG] Connection id "0HNCQ2IF1U84O" completed keep alive response.
[23:26:53 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:26:53 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 34.1113ms
[23:26:53 DBG] Endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)' with route pattern 'api/Users/{userId}' is valid for the request path '/api/users/search'
[23:26:53 DBG] Connection id "0HNCQ2IF1U84P" accepted.
[23:26:53 DBG] Request matched endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:26:53 DBG] Connection id "0HNCQ2IF1U84P" started.
[23:26:53 DBG] The request has an origin header: 'http://localhost:3000'.
[23:26:53 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[23:26:53 INF] CORS policy execution successful.
[23:26:53 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:26:53 DBG] Static files was skipped as the request already matched an endpoint.
[23:26:53 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:26:53 INF] HTTP GET /api/users/search received from ::1
[23:26:53 DBG] The request has an origin header: 'http://localhost:3000'.
[23:26:53 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:26:53 INF] CORS policy execution successful.
[23:26:53 DBG] Header: Connection=["keep-alive"]
[23:26:53 DBG] Header: Host=["localhost:5295"]
[23:26:53 DBG] Static files was skipped as the request already matched an endpoint.
[23:26:53 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:26:53 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[23:26:53 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:26:53 DBG] Header: Accept=["*/*"]
[23:26:53 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:26:53 DBG] Header: Connection=["keep-alive"]
[23:26:53 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8"]
[23:26:53 DBG] Header: Host=["localhost:5295"]
[23:26:53 DBG] Header: Origin=["http://localhost:3000"]
[23:26:53 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:26:53 DBG] Header: Referer=["http://localhost:3000/"]
[23:26:53 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:26:53 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:26:53 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:26:53 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:26:53 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8"]
[23:26:53 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:26:53 DBG] Header: Cache-Control=["max-age=0"]
[23:26:53 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:26:53 DBG] Header: Origin=["http://localhost:3000"]
[23:26:53 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:26:53 DBG] Header: Referer=["http://localhost:3000/"]
[23:26:53 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:26:53 DBG] Header: Content-Length=["0"]
[23:26:53 INF] Request: URL: http://localhost:5295/api/users/search
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Path Parameters:
  action: GetUser
  controller: Users
  userId: search
[23:26:53 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:26:53 DBG] Successfully validated the token.
[23:26:53 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[23:26:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:26:53 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:26:53 DBG] Authorization was successful.
[23:26:53 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:26:53 INF] Executing endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:26:53 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[23:26:53 INF] Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUser(System.Guid) on controller Presentation.Controllers.UsersController (SMedia).
[23:26:53 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:26:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:26:53 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:26:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:26:53 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:26:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:26:53 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Query Parameters:
  negotiateVersion: 1
[23:26:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:26:53 DBG] Successfully validated the token.
[23:26:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:26:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:26:53 DBG] Executing controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:26:53 DBG] Authorization was successful.
[23:26:53 DBG] Executed controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:26:53 INF] Executing endpoint '/hubs/chat/negotiate'
[23:26:53 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
[23:26:53 DBG] New connection 2cuAL6gOByMwrPnMMuq5aw created.
[23:26:53 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
[23:26:53 DBG] Sending negotiation response.
[23:26:53 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:26:53 INF] Executed endpoint '/hubs/chat/negotiate'
[23:26:53 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:26:53 INF] Response (Duration: 19ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "2cuAL6gOByMwrPnMMuq5aw",
  "connectionToken": "cEyKk7tTdV_J1oLCrB8g-Q",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[23:26:53 DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
[23:26:53 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[23:26:53 DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
[23:26:53 DBG] Response Body: {"negotiateVersion":1,"connectionId":"2cuAL6gOByMwrPnMMuq5aw","connectionToken":"cEyKk7tTdV_J1oLCrB8g-Q","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[23:26:53 DBG] The request has model state errors, returning an error response.
[23:26:53 DBG] Connection id "0HNCQ2IF1U84P" completed keep alive response.
[23:26:53 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:26:53 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 109.9957ms
[23:26:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:26:53 DBG] No information found on request to perform content negotiation.
[23:26:53 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:26:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:26:53 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:26:53 INF] Executed action Presentation.Controllers.UsersController.GetUser (SMedia) in 35.9783ms
[23:26:53 INF] Executed endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:26:53 INF] Response (Duration: 70ms): API: GET /api/users/search
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-327f0ebe021b5ef75f45388ae50b5268-493abd2b5cf41479-00"}
[23:26:53 INF] HTTP 400 returned for GET /api/users/search
[23:26:53 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-327f0ebe021b5ef75f45388ae50b5268-493abd2b5cf41479-00"}
[23:26:53 DBG] Connection id "0HNCQ2IF1U84M" completed keep alive response.
[23:26:53 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/search - null null
[23:26:53 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/search - 400 null application/problem+json; charset=utf-8 151.2281ms
[23:26:53 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:26:53 DBG] Endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)' with route pattern 'api/Users/{userId}' is valid for the request path '/api/users/search'
[23:26:53 DBG] Request matched endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:26:53 DBG] The request has an origin header: 'http://localhost:3000'.
[23:26:53 INF] CORS policy execution successful.
[23:26:53 DBG] Static files was skipped as the request already matched an endpoint.
[23:26:53 INF] HTTP GET /api/users/search received from ::1
[23:26:53 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:26:53 DBG] Header: Connection=["keep-alive"]
[23:26:53 DBG] Header: Host=["localhost:5295"]
[23:26:53 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:26:53 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:26:53 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:26:53 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8"]
[23:26:53 DBG] Header: Origin=["http://localhost:3000"]
[23:26:53 DBG] Header: Referer=["http://localhost:3000/"]
[23:26:53 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:26:53 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:26:53 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:26:53 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:26:53 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:26:53 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:26:53 INF] Request: URL: http://localhost:5295/api/users/search
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Path Parameters:
  action: GetUser
  controller: Users
  userId: search
[23:26:53 DBG] Successfully validated the token.
[23:26:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:26:53 DBG] Authorization was successful.
[23:26:53 INF] Executing endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:26:53 INF] Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUser(System.Guid) on controller Presentation.Controllers.UsersController (SMedia).
[23:26:53 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:26:53 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:26:53 DBG] Connection id "0HNCQ2IF1U84Q" accepted.
[23:26:53 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:26:53 DBG] Connection id "0HNCQ2IF1U84Q" started.
[23:26:53 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:26:53 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=cEyKk7tTdV_J1oLCrB8g-Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8 - null null
[23:26:53 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:26:53 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[23:26:53 DBG] Executing controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:26:53 DBG] Request matched endpoint '/hubs/chat'
[23:26:53 DBG] Executed controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:26:53 DBG] The request has an origin header: 'http://localhost:3000'.
[23:26:53 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
[23:26:53 INF] CORS policy execution successful.
[23:26:53 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
[23:26:53 DBG] Static files was skipped as the request already matched an endpoint.
[23:26:53 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:26:53 INF] HTTP GET /hubs/chat?id=cEyKk7tTdV_J1oLCrB8g-Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8 received from ::1
[23:26:53 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:26:53 DBG] Header: Connection=["Upgrade"]
[23:26:53 DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
[23:26:53 DBG] Header: Host=["localhost:5295"]
[23:26:53 DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
[23:26:53 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:26:53 DBG] The request has model state errors, returning an error response.
[23:26:53 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:26:53 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:26:53 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:26:53 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:26:53 DBG] Header: Cache-Control=["no-cache"]
[23:26:53 DBG] No information found on request to perform content negotiation.
[23:26:53 DBG] Header: Origin=["http://localhost:3000"]
[23:26:53 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:26:53 DBG] Header: Pragma=["no-cache"]
[23:26:53 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:26:53 DBG] Header: Upgrade=["websocket"]
[23:26:53 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:26:53 DBG] Header: Sec-WebSocket-Version=["13"]
[23:26:53 INF] Executed action Presentation.Controllers.UsersController.GetUser (SMedia) in 35.7767ms
[23:26:53 DBG] Header: Sec-WebSocket-Key=["Be6Jb9Qp2ToJZeg6iI/5GQ=="]
[23:26:53 INF] Executed endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:26:53 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[23:26:53 INF] Response (Duration: 58ms): API: GET /api/users/search
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-f7d5f1ccaa397cd7e2b6d155baaed1aa-42a6f85843f87fd1-00"}
[23:26:53 INF] Request: URL: http://localhost:5295/hubs/chat?id=cEyKk7tTdV_J1oLCrB8g-Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Authenticated: Yes
Query Parameters:
  id: cEyKk7tTdV_J1oLCrB8g-Q
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
[23:26:53 INF] HTTP 400 returned for GET /api/users/search
[23:26:53 DBG] Successfully validated the token.
[23:26:53 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-f7d5f1ccaa397cd7e2b6d155baaed1aa-42a6f85843f87fd1-00"}
[23:26:53 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:26:53 DBG] Connection id "0HNCQ2IF1U84O" completed keep alive response.
[23:26:53 DBG] Authorization was successful.
[23:26:53 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/search - 400 null application/problem+json; charset=utf-8 107.1999ms
[23:26:53 INF] Executing endpoint '/hubs/chat'
[23:26:53 DBG] Establishing new connection.
[23:26:53 DBG] OnConnectedAsync started.
[23:26:53 DBG] Socket opened using Sub-Protocol: 'null'.
[23:26:53 DBG] Found protocol implementation for requested protocol: json.
[23:26:53 DBG] Completed connection handshake. Using HubProtocol 'json'.
[23:27:44 DBG] Connection id "0HNCQ2IF1U84Q" received FIN.
[23:27:44 DBG] Waiting for the application to finish sending data.
[23:27:44 DBG] OnConnectedAsync ending.
[23:27:44 DBG] Connection id "0HNCQ2IF1U84Q" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:27:44 DBG] Connection id "0HNCQ2IF1U84Q" disconnecting.
[23:27:44 DBG] Socket closed.
[23:27:44 DBG] Removing connection cEyKk7tTdV_J1oLCrB8g-Q from the list of connections.
[23:27:44 INF] Executed endpoint '/hubs/chat'
[23:27:44 INF] Response (Duration: 50646ms): API: GET /hubs/chat
StatusCode: 101
[23:27:44 INF] HTTP 101 returned for GET /hubs/chat
[23:27:44 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=cEyKk7tTdV_J1oLCrB8g-Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8 - 101 null null 50701.6459ms
[23:27:44 DBG] Connection id "0HNCQ2IF1U84Q" stopped.
[23:27:44 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - null null
[23:27:44 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:27:44 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:27:44 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - null null
[23:27:44 DBG] The request has an origin header: 'http://localhost:3000'.
[23:27:44 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[23:27:44 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:27:44 INF] CORS policy execution successful.
[23:27:44 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:27:44 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:27:44 DBG] The request is a preflight request.
[23:27:44 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:27:44 DBG] The request has an origin header: 'http://localhost:3000'.
[23:27:44 INF] CORS policy execution successful.
[23:27:44 DBG] The request has an origin header: 'http://localhost:3000'.
[23:27:44 DBG] Connection id "0HNCQ2IF1U84O" completed keep alive response.
[23:27:44 DBG] The request is a preflight request.
[23:27:44 INF] CORS policy execution successful.
[23:27:44 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - 204 null null 36.6018ms
[23:27:44 DBG] Connection id "0HNCQ2IF1U84M" completed keep alive response.
[23:27:44 DBG] The request is a preflight request.
[23:27:44 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/search - null null
[23:27:44 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - 204 null null 38.2244ms
[23:27:44 DBG] Connection id "0HNCQ2IF1U84N" completed keep alive response.
[23:27:44 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:27:44 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[23:27:44 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 49.3162ms
[23:27:44 DBG] Endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)' with route pattern 'api/Users/{userId}' is valid for the request path '/api/users/search'
[23:27:44 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:27:44 DBG] Request matched endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:27:44 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:27:44 DBG] The request has an origin header: 'http://localhost:3000'.
[23:27:44 DBG] The request has an origin header: 'http://localhost:3000'.
[23:27:44 INF] CORS policy execution successful.
[23:27:44 INF] CORS policy execution successful.
[23:27:44 DBG] Static files was skipped as the request already matched an endpoint.
[23:27:44 DBG] Static files was skipped as the request already matched an endpoint.
[23:27:44 INF] HTTP GET /api/users/search received from ::1
[23:27:44 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[23:27:44 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:27:44 DBG] Header: Accept=["*/*"]
[23:27:44 DBG] Header: Connection=["keep-alive"]
[23:27:44 DBG] Header: Connection=["keep-alive"]
[23:27:44 DBG] Header: Host=["localhost:5295"]
[23:27:44 DBG] Header: Host=["localhost:5295"]
[23:27:44 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:27:44 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:27:44 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:27:44 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:27:44 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:27:44 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8"]
[23:27:44 DBG] Header: Origin=["http://localhost:3000"]
[23:27:44 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:27:44 DBG] Header: Referer=["http://localhost:3000/"]
[23:27:44 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8"]
[23:27:44 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:27:44 DBG] Header: Cache-Control=["max-age=0"]
[23:27:44 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:27:44 DBG] Header: Origin=["http://localhost:3000"]
[23:27:44 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:27:44 DBG] Header: Referer=["http://localhost:3000/"]
[23:27:44 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:27:44 DBG] Header: Content-Length=["0"]
[23:27:44 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:27:44 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:27:44 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:27:44 INF] Request: URL: http://localhost:5295/api/users/search
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Path Parameters:
  action: GetUser
  controller: Users
  userId: search
[23:27:44 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[23:27:44 DBG] Successfully validated the token.
[23:27:44 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:27:44 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:27:44 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:27:44 DBG] Authorization was successful.
[23:27:44 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[23:27:44 INF] Executing endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:27:44 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:27:44 INF] Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUser(System.Guid) on controller Presentation.Controllers.UsersController (SMedia).
[23:27:44 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:27:44 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:27:44 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:27:44 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:27:44 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Query Parameters:
  negotiateVersion: 1
[23:27:44 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:27:44 DBG] Successfully validated the token.
[23:27:44 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:27:44 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:27:44 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:27:44 DBG] Authorization was successful.
[23:27:44 DBG] Executing controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:27:44 INF] Executing endpoint '/hubs/chat/negotiate'
[23:27:44 DBG] Executed controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:27:44 DBG] New connection GITWNJlvfsQ08t9cfjN1OA created.
[23:27:44 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
[23:27:44 DBG] Sending negotiation response.
[23:27:44 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
[23:27:44 INF] Executed endpoint '/hubs/chat/negotiate'
[23:27:44 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:27:44 INF] Response (Duration: 21ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "GITWNJlvfsQ08t9cfjN1OA",
  "connectionToken": "343aJLicAFqC0_s_SN4eXw",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[23:27:44 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:27:44 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[23:27:44 DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
[23:27:44 DBG] Response Body: {"negotiateVersion":1,"connectionId":"GITWNJlvfsQ08t9cfjN1OA","connectionToken":"343aJLicAFqC0_s_SN4eXw","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[23:27:44 DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
[23:27:44 DBG] Connection id "0HNCQ2IF1U84P" completed keep alive response.
[23:27:44 DBG] The request has model state errors, returning an error response.
[23:27:44 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 128.2051ms
[23:27:44 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:27:44 DBG] Connection id "0HNCQ2IF1U84R" accepted.
[23:27:44 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:27:44 DBG] Connection id "0HNCQ2IF1U84R" started.
[23:27:44 DBG] No information found on request to perform content negotiation.
[23:27:44 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=343aJLicAFqC0_s_SN4eXw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8 - null null
[23:27:44 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:27:44 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[23:27:44 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:27:44 DBG] Request matched endpoint '/hubs/chat'
[23:27:44 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:27:44 DBG] The request has an origin header: 'http://localhost:3000'.
[23:27:44 INF] Executed action Presentation.Controllers.UsersController.GetUser (SMedia) in 49.2167ms
[23:27:44 INF] CORS policy execution successful.
[23:27:44 INF] Executed endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:27:44 DBG] Static files was skipped as the request already matched an endpoint.
[23:27:44 INF] Response (Duration: 87ms): API: GET /api/users/search
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-cd12d0ab4b5a35e4cb2183cf0a61aa30-ef03b6fe0e2e3184-00"}
[23:27:44 INF] HTTP GET /hubs/chat?id=343aJLicAFqC0_s_SN4eXw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8 received from ::1
[23:27:44 INF] HTTP 400 returned for GET /api/users/search
[23:27:44 DBG] Header: Connection=["Upgrade"]
[23:27:44 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-cd12d0ab4b5a35e4cb2183cf0a61aa30-ef03b6fe0e2e3184-00"}
[23:27:44 DBG] Header: Host=["localhost:5295"]
[23:27:44 DBG] Connection id "0HNCQ2IF1U84O" completed keep alive response.
[23:27:44 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/search - null null
[23:27:44 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:27:44 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/search - 400 null application/problem+json; charset=utf-8 177.0711ms
[23:27:44 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:27:44 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:27:44 DBG] Endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)' with route pattern 'api/Users/{userId}' is valid for the request path '/api/users/search'
[23:27:44 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:27:44 DBG] Request matched endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:27:44 DBG] Header: Cache-Control=["no-cache"]
[23:27:44 DBG] The request has an origin header: 'http://localhost:3000'.
[23:27:44 DBG] Header: Origin=["http://localhost:3000"]
[23:27:44 INF] CORS policy execution successful.
[23:27:44 DBG] Header: Pragma=["no-cache"]
[23:27:44 DBG] Static files was skipped as the request already matched an endpoint.
[23:27:44 DBG] Header: Upgrade=["websocket"]
[23:27:44 INF] HTTP GET /api/users/search received from ::1
[23:27:44 DBG] Header: Sec-WebSocket-Version=["13"]
[23:27:44 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:27:44 DBG] Header: Connection=["keep-alive"]
[23:27:44 DBG] Header: Host=["localhost:5295"]
[23:27:44 DBG] Header: Sec-WebSocket-Key=["1z+pPNadSwsUwzXmrjtpwA=="]
[23:27:44 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:27:44 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[23:27:44 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:27:44 INF] Request: URL: http://localhost:5295/hubs/chat?id=343aJLicAFqC0_s_SN4eXw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Authenticated: Yes
Query Parameters:
  id: 343aJLicAFqC0_s_SN4eXw
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
[23:27:44 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:27:44 DBG] Successfully validated the token.
[23:27:44 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8"]
[23:27:44 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:27:44 DBG] Header: Origin=["http://localhost:3000"]
[23:27:44 DBG] Authorization was successful.
[23:27:44 DBG] Header: Referer=["http://localhost:3000/"]
[23:27:44 INF] Executing endpoint '/hubs/chat'
[23:27:44 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:27:45 DBG] Establishing new connection.
[23:27:45 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:27:45 DBG] OnConnectedAsync started.
[23:27:45 DBG] Socket opened using Sub-Protocol: 'null'.
[23:27:45 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:27:45 DBG] Found protocol implementation for requested protocol: json.
[23:27:45 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:27:45 DBG] Completed connection handshake. Using HubProtocol 'json'.
[23:27:45 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:27:45 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:27:45 INF] Request: URL: http://localhost:5295/api/users/search
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8
Path Parameters:
  action: GetUser
  controller: Users
  userId: search
[23:27:45 DBG] Successfully validated the token.
[23:27:45 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:27:45 DBG] Authorization was successful.
[23:27:45 INF] Executing endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:27:45 INF] Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUser(System.Guid) on controller Presentation.Controllers.UsersController (SMedia).
[23:27:45 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:27:45 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:27:45 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:27:45 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:27:45 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:27:45 DBG] Executing controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:27:45 DBG] Executed controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:27:45 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
[23:27:45 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
[23:27:45 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:27:45 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:27:45 DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
[23:27:45 DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
[23:27:45 DBG] The request has model state errors, returning an error response.
[23:27:45 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:27:45 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:27:45 DBG] No information found on request to perform content negotiation.
[23:27:45 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:27:45 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:27:45 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:27:45 INF] Executed action Presentation.Controllers.UsersController.GetUser (SMedia) in 20.9608ms
[23:27:45 INF] Executed endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:27:45 INF] Response (Duration: 42ms): API: GET /api/users/search
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-f0be3d593b09fb6799ca05c6e35cff88-92f21d37f7061206-00"}
[23:27:45 INF] HTTP 400 returned for GET /api/users/search
[23:27:45 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-f0be3d593b09fb6799ca05c6e35cff88-92f21d37f7061206-00"}
[23:27:45 DBG] Connection id "0HNCQ2IF1U84N" completed keep alive response.
[23:27:45 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/search - 400 null application/problem+json; charset=utf-8 134.8861ms
[23:27:55 DBG] Connection id "0HNCQ2IF1U84R" received FIN.
[23:27:55 DBG] Waiting for the application to finish sending data.
[23:27:55 DBG] OnConnectedAsync ending.
[23:27:55 DBG] Connection id "0HNCQ2IF1U84R" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:27:55 DBG] Connection id "0HNCQ2IF1U84R" disconnecting.
[23:27:55 DBG] Socket closed.
[23:27:55 DBG] Removing connection 343aJLicAFqC0_s_SN4eXw from the list of connections.
[23:27:55 INF] Executed endpoint '/hubs/chat'
[23:27:55 INF] Response (Duration: 10716ms): API: GET /hubs/chat
StatusCode: 101
[23:27:55 INF] HTTP 101 returned for GET /hubs/chat
[23:27:55 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=343aJLicAFqC0_s_SN4eXw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA4Nzg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.s4KYBEwqzko-LFsJLHoJ2tYOXdFPzRjYeD_bMvjioF8 - 101 null null 10787.4999ms
[23:27:55 DBG] Connection id "0HNCQ2IF1U84R" stopped.
[23:28:05 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[23:28:05 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:28:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:28:05 DBG] The request has an origin header: 'http://localhost:3000'.
[23:28:05 INF] CORS policy execution successful.
[23:28:05 DBG] The request is a preflight request.
[23:28:05 DBG] Connection id "0HNCQ2IF1U84N" completed keep alive response.
[23:28:05 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 18.7044ms
[23:28:05 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 57
[23:28:05 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:28:05 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[23:28:05 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:28:05 DBG] The request has an origin header: 'http://localhost:3000'.
[23:28:05 INF] CORS policy execution successful.
[23:28:05 DBG] Static files was skipped as the request already matched an endpoint.
[23:28:05 INF] HTTP POST /api/Authentication/login received from ::1
[23:28:05 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:28:05 DBG] Header: Connection=["keep-alive"]
[23:28:05 DBG] Header: Host=["localhost:5295"]
[23:28:05 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:28:05 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:28:05 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:28:05 DBG] Header: Content-Type=["application/json"]
[23:28:05 DBG] Header: Origin=["http://localhost:3000"]
[23:28:05 DBG] Header: Referer=["http://localhost:3000/"]
[23:28:05 DBG] Header: Content-Length=["57"]
[23:28:05 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:28:05 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:28:05 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:28:05 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:28:05 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:28:05 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:28:05 DBG] Connection id "0HNCQ2IF1U84N", Request id "0HNCQ2IF1U84N:00000005": started reading request body.
[23:28:05 DBG] Connection id "0HNCQ2IF1U84N", Request id "0HNCQ2IF1U84N:00000005": done reading request body.
[23:28:05 INF] Request Body: {"email":"anhlehongwork@gmail.com","password":"12345678"}
[23:28:05 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anhlehongwork@gmail.com",
  "password": "12345678"
}
[23:28:05 DBG] AuthenticationScheme: Bearer was not authenticated.
[23:28:05 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:28:05 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[23:28:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:28:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:28:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:28:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:28:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[23:28:05 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:28:05 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:28:05 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:28:05 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[23:28:05 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[23:28:05 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[23:28:05 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:28:05 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:28:05 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:28:05 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:28:05 INF] Executing action method SMedia.Controllers.AuthenticationController.Login (SMedia) - Validation state: "Valid"
[23:28:06 INF] Executed DbCommand (34ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[23:28:06 INF] Executed action method SMedia.Controllers.AuthenticationController.Login (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 554.705ms.
[23:28:06 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:28:06 DBG] No information found on request to perform content negotiation.
[23:28:06 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[23:28:06 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:28:06 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.AuthResponse'.
[23:28:06 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 579.8584ms
[23:28:06 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:28:06 INF] Response (Duration: 595ms): API: POST /api/Authentication/login
StatusCode: 200
Body:
{
  "Token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A"
}
[23:28:06 INF] HTTP 200 returned for POST /api/Authentication/login
[23:28:06 DBG] Response Body: {"Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A"}
[23:28:06 DBG] Connection id "0HNCQ2IF1U84N" completed keep alive response.
[23:28:06 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 200 null application/json; charset=utf-8 635.8611ms
[23:28:06 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[23:28:06 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:28:06 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - null null
[23:28:06 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - null null
[23:28:06 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:28:06 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:28:06 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:28:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:28:06 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:28:06 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:28:06 INF] CORS policy execution successful.
[23:28:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:28:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:28:06 DBG] The request is a preflight request.
[23:28:06 INF] CORS policy execution successful.
[23:28:06 DBG] The request is a preflight request.
[23:28:06 DBG] Connection id "0HNCQ2IF1U84N" completed keep alive response.
[23:28:06 INF] CORS policy execution successful.
[23:28:06 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[23:28:06 DBG] Connection id "0HNCQ2IF1U84O" completed keep alive response.
[23:28:06 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 28.9717ms
[23:28:06 DBG] The request is a preflight request.
[23:28:06 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:28:06 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - 204 null null 28.2654ms
[23:28:06 DBG] Connection id "0HNCQ2IF1U84M" completed keep alive response.
[23:28:06 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:28:06 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/search - null null
[23:28:06 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/search - 204 null null 36.4387ms
[23:28:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:28:06 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:28:06 INF] CORS policy execution successful.
[23:28:06 DBG] Endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)' with route pattern 'api/Users/{userId}' is valid for the request path '/api/users/search'
[23:28:06 DBG] Static files was skipped as the request already matched an endpoint.
[23:28:06 DBG] Request matched endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:28:06 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[23:28:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:28:06 DBG] Header: Accept=["*/*"]
[23:28:06 INF] CORS policy execution successful.
[23:28:06 DBG] Header: Connection=["keep-alive"]
[23:28:06 DBG] Static files was skipped as the request already matched an endpoint.
[23:28:06 DBG] Header: Host=["localhost:5295"]
[23:28:06 INF] HTTP GET /api/users/search received from ::1
[23:28:06 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:28:06 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:28:06 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:28:06 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:28:06 DBG] Header: Connection=["keep-alive"]
[23:28:06 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A"]
[23:28:06 DBG] Header: Host=["localhost:5295"]
[23:28:06 DBG] Header: Cache-Control=["max-age=0"]
[23:28:06 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:28:06 DBG] Header: Origin=["http://localhost:3000"]
[23:28:06 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:28:06 DBG] Header: Referer=["http://localhost:3000/"]
[23:28:06 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:28:06 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A"]
[23:28:06 DBG] Header: Origin=["http://localhost:3000"]
[23:28:06 DBG] Header: Referer=["http://localhost:3000/"]
[23:28:06 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:28:06 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:28:06 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:28:06 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:28:06 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:28:06 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:28:06 DBG] Header: Content-Length=["0"]
[23:28:06 INF] Request: URL: http://localhost:5295/api/users/search
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A
Path Parameters:
  action: GetUser
  controller: Users
  userId: search
[23:28:06 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:28:06 DBG] Successfully validated the token.
[23:28:06 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[23:28:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:28:06 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:28:06 DBG] Authorization was successful.
[23:28:06 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:28:06 INF] Executing endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:28:06 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[23:28:06 INF] Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUser(System.Guid) on controller Presentation.Controllers.UsersController (SMedia).
[23:28:06 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:28:06 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:28:06 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:28:06 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:28:06 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:28:06 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:28:06 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:28:06 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:28:06 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A
Query Parameters:
  negotiateVersion: 1
[23:28:06 DBG] Executing controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:28:06 DBG] Successfully validated the token.
[23:28:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:28:06 DBG] Executed controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:28:06 DBG] Authorization was successful.
[23:28:06 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
[23:28:06 INF] Executing endpoint '/hubs/chat/negotiate'
[23:28:06 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
[23:28:06 DBG] New connection f7ticOlj1Na3tvPN5xCjpg created.
[23:28:06 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:28:06 DBG] Sending negotiation response.
[23:28:06 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:28:06 INF] Executed endpoint '/hubs/chat/negotiate'
[23:28:06 DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
[23:28:06 INF] Response (Duration: 16ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "f7ticOlj1Na3tvPN5xCjpg",
  "connectionToken": "QV_ysiNOMAiJIujDjxsd6Q",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[23:28:06 DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
[23:28:06 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[23:28:06 DBG] The request has model state errors, returning an error response.
[23:28:06 DBG] Response Body: {"negotiateVersion":1,"connectionId":"f7ticOlj1Na3tvPN5xCjpg","connectionToken":"QV_ysiNOMAiJIujDjxsd6Q","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[23:28:06 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:28:06 DBG] Connection id "0HNCQ2IF1U84P" completed keep alive response.
[23:28:06 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:28:06 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 124.8141ms
[23:28:06 DBG] No information found on request to perform content negotiation.
[23:28:06 DBG] Connection id "0HNCQ2IF1U84S" accepted.
[23:28:06 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:28:06 DBG] Connection id "0HNCQ2IF1U84S" started.
[23:28:06 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:28:06 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=QV_ysiNOMAiJIujDjxsd6Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A - null null
[23:28:06 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:28:06 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[23:28:06 INF] Executed action Presentation.Controllers.UsersController.GetUser (SMedia) in 39.1841ms
[23:28:06 DBG] Request matched endpoint '/hubs/chat'
[23:28:06 INF] Executed endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:28:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:28:06 INF] Response (Duration: 73ms): API: GET /api/users/search
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-8db8b31562840f37b91064d3d200ee09-eff9d1682033febc-00"}
[23:28:06 INF] CORS policy execution successful.
[23:28:06 INF] HTTP 400 returned for GET /api/users/search
[23:28:06 DBG] Static files was skipped as the request already matched an endpoint.
[23:28:06 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-8db8b31562840f37b91064d3d200ee09-eff9d1682033febc-00"}
[23:28:06 INF] HTTP GET /hubs/chat?id=QV_ysiNOMAiJIujDjxsd6Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A received from ::1
[23:28:06 DBG] Connection id "0HNCQ2IF1U84O" completed keep alive response.
[23:28:06 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/search - null null
[23:28:06 DBG] Header: Connection=["Upgrade"]
[23:28:06 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/search - 400 null application/problem+json; charset=utf-8 138.2153ms
[23:28:06 DBG] 1 candidate(s) found for the request path '/api/users/search'
[23:28:06 DBG] Header: Host=["localhost:5295"]
[23:28:06 DBG] Endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)' with route pattern 'api/Users/{userId}' is valid for the request path '/api/users/search'
[23:28:06 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:28:06 DBG] Request matched endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:28:06 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:28:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:28:06 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:28:06 INF] CORS policy execution successful.
[23:28:06 DBG] Header: Cache-Control=["no-cache"]
[23:28:06 DBG] Static files was skipped as the request already matched an endpoint.
[23:28:06 DBG] Header: Origin=["http://localhost:3000"]
[23:28:06 INF] HTTP GET /api/users/search received from ::1
[23:28:06 DBG] Header: Pragma=["no-cache"]
[23:28:06 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:28:06 DBG] Header: Upgrade=["websocket"]
[23:28:06 DBG] Header: Connection=["keep-alive"]
[23:28:06 DBG] Header: Sec-WebSocket-Version=["13"]
[23:28:06 DBG] Header: Host=["localhost:5295"]
[23:28:06 DBG] Header: Sec-WebSocket-Key=["AeQNYqUe4FrQimBai3T22A=="]
[23:28:06 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:28:06 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[23:28:06 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:28:06 INF] Request: URL: http://localhost:5295/hubs/chat?id=QV_ysiNOMAiJIujDjxsd6Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A
Authenticated: Yes
Query Parameters:
  id: QV_ysiNOMAiJIujDjxsd6Q
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A
[23:28:06 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:28:06 DBG] Successfully validated the token.
[23:28:06 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A"]
[23:28:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:28:06 DBG] Header: Origin=["http://localhost:3000"]
[23:28:06 DBG] Authorization was successful.
[23:28:06 DBG] Header: Referer=["http://localhost:3000/"]
[23:28:06 INF] Executing endpoint '/hubs/chat'
[23:28:06 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:28:06 DBG] Establishing new connection.
[23:28:06 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:28:06 DBG] OnConnectedAsync started.
[23:28:06 DBG] Socket opened using Sub-Protocol: 'null'.
[23:28:06 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:28:06 DBG] Found protocol implementation for requested protocol: json.
[23:28:06 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:28:06 DBG] Completed connection handshake. Using HubProtocol 'json'.
[23:28:06 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:28:06 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:28:06 INF] Request: URL: http://localhost:5295/api/users/search
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A
Path Parameters:
  action: GetUser
  controller: Users
  userId: search
[23:28:06 DBG] Successfully validated the token.
[23:28:06 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:28:06 DBG] Authorization was successful.
[23:28:06 INF] Executing endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:28:06 INF] Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUser(System.Guid) on controller Presentation.Controllers.UsersController (SMedia).
[23:28:06 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:28:06 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:28:06 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:28:06 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:28:06 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:28:06 DBG] Executing controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:28:06 DBG] Executed controller factory for controller Presentation.Controllers.UsersController (SMedia)
[23:28:06 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
[23:28:06 DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
[23:28:06 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:28:06 DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
[23:28:06 DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
[23:28:06 DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
[23:28:06 DBG] The request has model state errors, returning an error response.
[23:28:06 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:28:06 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:28:06 DBG] No information found on request to perform content negotiation.
[23:28:06 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:28:06 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:28:06 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:28:06 INF] Executed action Presentation.Controllers.UsersController.GetUser (SMedia) in 20.996ms
[23:28:06 INF] Executed endpoint 'Presentation.Controllers.UsersController.GetUser (SMedia)'
[23:28:06 INF] Response (Duration: 37ms): API: GET /api/users/search
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-6f8cb18c197f5dc83de337be87872377-8b0eaad8e81f4b85-00"}
[23:28:06 INF] HTTP 400 returned for GET /api/users/search
[23:28:06 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"userId":["The value 'search' is not valid."]},"traceId":"00-6f8cb18c197f5dc83de337be87872377-8b0eaad8e81f4b85-00"}
[23:28:06 DBG] Connection id "0HNCQ2IF1U84M" completed keep alive response.
[23:28:06 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/search - 400 null application/problem+json; charset=utf-8 112.3912ms
[23:30:17 DBG] Connection id "0HNCQ2IF1U84M" disconnecting.
[23:30:17 DBG] Connection id "0HNCQ2IF1U84N" disconnecting.
[23:30:17 DBG] Connection id "0HNCQ2IF1U84O" disconnecting.
[23:30:17 DBG] Connection id "0HNCQ2IF1U84P" disconnecting.
[23:30:17 DBG] Connection id "0HNCQ2IF1U84P" stopped.
[23:30:17 DBG] Connection id "0HNCQ2IF1U84N" stopped.
[23:30:17 DBG] Connection id "0HNCQ2IF1U84O" stopped.
[23:30:17 DBG] Connection id "0HNCQ2IF1U84O" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:30:17 DBG] Connection id "0HNCQ2IF1U84P" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:30:17 DBG] Connection id "0HNCQ2IF1U84N" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:30:17 DBG] Connection id "0HNCQ2IF1U84M" stopped.
[23:30:17 DBG] Connection id "0HNCQ2IF1U84M" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:38:37 DBG] Connection id "0HNCQ2IF1U84S" received FIN.
[23:38:37 DBG] Waiting for the application to finish sending data.
[23:38:37 DBG] OnConnectedAsync ending.
[23:38:37 DBG] Connection id "0HNCQ2IF1U84S" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:38:37 DBG] Connection id "0HNCQ2IF1U84S" disconnecting.
[23:38:37 DBG] Socket closed.
[23:38:37 DBG] Removing connection QV_ysiNOMAiJIujDjxsd6Q from the list of connections.
[23:38:37 INF] Executed endpoint '/hubs/chat'
[23:38:37 INF] Response (Duration: 631076ms): API: GET /hubs/chat
StatusCode: 101
[23:38:37 INF] HTTP 101 returned for GET /hubs/chat
[23:38:37 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=QV_ysiNOMAiJIujDjxsd6Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A - 101 null null 631139.7755ms
[23:38:37 DBG] Connection id "0HNCQ2IF1U84S" stopped.
[23:38:38 DBG] Connection id "0HNCQ2IF1U84T" accepted.
[23:38:38 DBG] Connection id "0HNCQ2IF1U84T" started.
[23:38:38 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[23:38:38 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:38:38 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:38:38 DBG] The request has an origin header: 'http://localhost:3000'.
[23:38:38 INF] CORS policy execution successful.
[23:38:38 DBG] The request is a preflight request.
[23:38:38 DBG] Connection id "0HNCQ2IF1U84T" completed keep alive response.
[23:38:38 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 25.3496ms
[23:38:38 DBG] Connection id "0HNCQ2IF1U84U" accepted.
[23:38:38 DBG] Connection id "0HNCQ2IF1U84U" started.
[23:38:38 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[23:38:38 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:38:38 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:38:38 DBG] The request has an origin header: 'http://localhost:3000'.
[23:38:38 INF] CORS policy execution successful.
[23:38:38 DBG] Static files was skipped as the request already matched an endpoint.
[23:38:38 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[23:38:38 DBG] Header: Accept=["*/*"]
[23:38:38 DBG] Header: Connection=["keep-alive"]
[23:38:38 DBG] Header: Host=["localhost:5295"]
[23:38:38 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:38:38 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:38:38 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:38:38 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A"]
[23:38:38 DBG] Header: Cache-Control=["max-age=0"]
[23:38:38 DBG] Header: Origin=["http://localhost:3000"]
[23:38:38 DBG] Header: Referer=["http://localhost:3000/"]
[23:38:38 DBG] Header: Content-Length=["0"]
[23:38:38 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:38:38 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[23:38:38 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:38:38 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:38:38 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[23:38:38 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:38:38 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:38:38 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:38:38 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A
Query Parameters:
  negotiateVersion: 1
[23:38:38 DBG] Successfully validated the token.
[23:38:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:38:38 DBG] Authorization was successful.
[23:38:38 INF] Executing endpoint '/hubs/chat/negotiate'
[23:38:38 DBG] New connection zpQ7f1LHgsNNZF2UF-WtrQ created.
[23:38:38 DBG] Sending negotiation response.
[23:38:38 INF] Executed endpoint '/hubs/chat/negotiate'
[23:38:38 INF] Response (Duration: 35ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "zpQ7f1LHgsNNZF2UF-WtrQ",
  "connectionToken": "Ppg3C-FdFQkvu4irAVPl0A",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[23:38:38 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[23:38:38 DBG] Response Body: {"negotiateVersion":1,"connectionId":"zpQ7f1LHgsNNZF2UF-WtrQ","connectionToken":"Ppg3C-FdFQkvu4irAVPl0A","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[23:38:38 DBG] Connection id "0HNCQ2IF1U84U" completed keep alive response.
[23:38:38 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 184.7853ms
[23:38:38 DBG] Connection id "0HNCQ2IF1U84V" accepted.
[23:38:38 DBG] Connection id "0HNCQ2IF1U84V" started.
[23:38:38 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=Ppg3C-FdFQkvu4irAVPl0A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A - null null
[23:38:38 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[23:38:38 DBG] Request matched endpoint '/hubs/chat'
[23:38:38 DBG] The request has an origin header: 'http://localhost:3000'.
[23:38:38 INF] CORS policy execution successful.
[23:38:38 DBG] Static files was skipped as the request already matched an endpoint.
[23:38:38 INF] HTTP GET /hubs/chat?id=Ppg3C-FdFQkvu4irAVPl0A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A received from ::1
[23:38:38 DBG] Header: Connection=["Upgrade"]
[23:38:38 DBG] Header: Host=["localhost:5295"]
[23:38:38 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:38:38 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:38:38 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:38:38 DBG] Header: Cache-Control=["no-cache"]
[23:38:38 DBG] Header: Origin=["http://localhost:3000"]
[23:38:38 DBG] Header: Pragma=["no-cache"]
[23:38:38 DBG] Header: Upgrade=["websocket"]
[23:38:38 DBG] Header: Sec-WebSocket-Version=["13"]
[23:38:38 DBG] Header: Sec-WebSocket-Key=["CU4O69RTRQML4g8f17HitQ=="]
[23:38:38 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[23:38:38 INF] Request: URL: http://localhost:5295/hubs/chat?id=Ppg3C-FdFQkvu4irAVPl0A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A
Authenticated: Yes
Query Parameters:
  id: Ppg3C-FdFQkvu4irAVPl0A
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A
[23:38:38 DBG] Successfully validated the token.
[23:38:38 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:38:38 DBG] Authorization was successful.
[23:38:38 INF] Executing endpoint '/hubs/chat'
[23:38:38 DBG] Establishing new connection.
[23:38:38 DBG] OnConnectedAsync started.
[23:38:38 DBG] Socket opened using Sub-Protocol: 'null'.
[23:38:38 DBG] Found protocol implementation for requested protocol: json.
[23:38:38 DBG] Completed connection handshake. Using HubProtocol 'json'.
[23:38:44 DBG] Connection id "0HNCQ2IF1U84V" received FIN.
[23:38:44 DBG] Waiting for the application to finish sending data.
[23:38:44 DBG] OnConnectedAsync ending.
[23:38:44 DBG] Connection id "0HNCQ2IF1U84V" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:38:44 DBG] Connection id "0HNCQ2IF1U84V" disconnecting.
[23:38:44 DBG] Socket closed.
[23:38:44 DBG] Removing connection Ppg3C-FdFQkvu4irAVPl0A from the list of connections.
[23:38:44 INF] Executed endpoint '/hubs/chat'
[23:38:44 INF] Response (Duration: 5891ms): API: GET /hubs/chat
StatusCode: 101
[23:38:44 INF] HTTP 101 returned for GET /hubs/chat
[23:38:44 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=Ppg3C-FdFQkvu4irAVPl0A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjA5Njg2LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jK02zIY2TfuYgnI0SPPgaMkC4VC8KbtuxEoHVI8XR_A - 101 null null 5993.2141ms
[23:38:44 DBG] Connection id "0HNCQ2IF1U84V" stopped.
[23:40:49 DBG] Connection id "0HNCQ2IF1U84T" disconnecting.
[23:40:49 DBG] Connection id "0HNCQ2IF1U84U" disconnecting.
[23:40:49 DBG] Connection id "0HNCQ2IF1U84T" stopped.
[23:40:49 DBG] Connection id "0HNCQ2IF1U84U" stopped.
[23:40:49 DBG] Connection id "0HNCQ2IF1U84T" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:40:49 DBG] Connection id "0HNCQ2IF1U84U" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:40:56 INF] Application is shutting down...
[23:40:56 DBG] Hosting stopping
[23:40:56 DBG] Hosting stopped
[23:41:00 DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
[23:41:00 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[23:41:00 DBG] Hosting starting
[23:41:00 INF] User profile is available. Using 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:41:00 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-14a3d168-18db-4f02-bf32-5d12a5c3d5f9.xml'.
[23:41:00 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-18e390e9-1029-4eaf-a8ee-1e70e5eef3df.xml'.
[23:41:00 DBG] Found key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9}.
[23:41:00 DBG] Found key {18e390e9-1029-4eaf-a8ee-1e70e5eef3df}.
[23:41:00 DBG] Considering key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} with expiration date 2025-06-01 03:53:05Z as default key.
[23:41:00 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[23:41:00 DBG] Decrypting secret element using Windows DPAPI.
[23:41:00 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[23:41:00 DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
[23:41:00 DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
[23:41:00 DBG] Using key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} as the default key.
[23:41:00 DBG] Key ring with default key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} was loaded during application startup.
[23:41:00 INF] Now listening on: http://localhost:5295
[23:41:00 DBG] Loaded hosting startup assembly SMedia
[23:41:00 INF] Application started. Press Ctrl+C to shut down.
[23:41:00 INF] Hosting environment: Development
[23:41:00 INF] Content root path: E:\hcmue_03_hk02\cn_web\BACK_END\BackEnd-SocialMedia\SMedia
[23:41:00 DBG] Hosting started
[23:41:01 DBG] Connection id "0HNCQ32D05FOS" received FIN.
[23:41:01 DBG] Connection id "0HNCQ32D05FOS" accepted.
[23:41:01 DBG] Connection id "0HNCQ32D05FOS" started.
[23:41:01 DBG] Connection id "0HNCQ32D05FOS" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:41:01 DBG] Connection id "0HNCQ32D05FOS" disconnecting.
[23:41:01 DBG] Connection id "0HNCQ32D05FOS" stopped.
[23:41:01 DBG] Connection id "0HNCQ32D05FOT" accepted.
[23:41:01 DBG] Connection id "0HNCQ32D05FOT" started.
[23:41:01 INF] Request starting HTTP/1.1 GET http://localhost:5295/swagger/index.html - null null
[23:41:01 DBG] Wildcard detected, all requests with hosts will be allowed.
[23:41:01 DBG] No candidates found for the request path '/swagger/index.html'
[23:41:01 DBG] Request did not match any endpoints
[23:41:01 DBG] Connection id "0HNCQ32D05FOT" completed keep alive response.
[23:41:01 INF] Request finished HTTP/1.1 GET http://localhost:5295/swagger/index.html - 200 null text/html;charset=utf-8 160.611ms
[23:41:01 INF] Request starting HTTP/1.1 GET http://localhost:5295/swagger/v1/swagger.json - null null
[23:41:01 DBG] No candidates found for the request path '/swagger/v1/swagger.json'
[23:41:01 DBG] Request did not match any endpoints
[23:41:01 DBG] Connection id "0HNCQ32D05FOT" completed keep alive response.
[23:41:01 INF] Request finished HTTP/1.1 GET http://localhost:5295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 195.1556ms
[23:41:05 DBG] Connection id "0HNCQ32D05FOU" accepted.
[23:41:05 DBG] Connection id "0HNCQ32D05FOU" started.
[23:41:05 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[23:41:05 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:41:05 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:41:05 DBG] The request has an origin header: 'http://localhost:3000'.
[23:41:05 INF] CORS policy execution successful.
[23:41:05 DBG] The request is a preflight request.
[23:41:05 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:41:05 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 55.379ms
[23:41:05 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 55
[23:41:05 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:41:05 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[23:41:05 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:41:05 DBG] The request has an origin header: 'http://localhost:3000'.
[23:41:05 INF] CORS policy execution successful.
[23:41:05 DBG] Static files was skipped as the request already matched an endpoint.
[23:41:05 INF] HTTP POST /api/Authentication/login received from ::1
[23:41:05 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:41:05 DBG] Header: Connection=["keep-alive"]
[23:41:05 DBG] Header: Host=["localhost:5295"]
[23:41:05 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:41:05 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:41:05 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:41:05 DBG] Header: Content-Type=["application/json"]
[23:41:05 DBG] Header: Origin=["http://localhost:3000"]
[23:41:05 DBG] Header: Referer=["http://localhost:3000/"]
[23:41:05 DBG] Header: Content-Length=["55"]
[23:41:05 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:41:05 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:41:05 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:41:05 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:41:05 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:41:05 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:41:05 DBG] Connection id "0HNCQ32D05FOU", Request id "0HNCQ32D05FOU:00000002": started reading request body.
[23:41:05 DBG] Connection id "0HNCQ32D05FOU", Request id "0HNCQ32D05FOU:00000002": done reading request body.
[23:41:05 INF] Request Body: {"email":"anhlehongwork@gmail.com","password":"123456"}
[23:41:05 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anhlehongwork@gmail.com",
  "password": "123456"
}
[23:41:05 DBG] AuthenticationScheme: Bearer was not authenticated.
[23:41:05 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:41:05 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[23:41:05 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:41:05 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:41:05 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:41:05 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:41:05 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[23:41:05 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:41:06 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:41:06 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:41:06 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[23:41:06 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[23:41:06 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[23:41:06 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:41:06 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:41:06 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:41:06 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:41:06 INF] Executing action method SMedia.Controllers.AuthenticationController.Login (SMedia) - Validation state: "Valid"
[23:41:09 INF] Executed DbCommand (189ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[23:41:10 INF] Executed action method SMedia.Controllers.AuthenticationController.Login (SMedia), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 4177.5579ms.
[23:41:10 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:41:10 DBG] No information found on request to perform content negotiation.
[23:41:10 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[23:41:10 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:41:10 INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
[23:41:10 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 4465.7279ms
[23:41:10 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:41:10 INF] Response (Duration: 4616ms): API: POST /api/Authentication/login
StatusCode: 401
Body:
"Incorrect email or password."
[23:41:10 INF] HTTP 401 returned for POST /api/Authentication/login
[23:41:10 DBG] Response Body: "Incorrect email or password."
[23:41:10 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:41:10 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 401 null application/json; charset=utf-8 4783.3093ms
[23:41:18 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[23:41:18 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:41:18 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:41:18 DBG] The request has an origin header: 'http://localhost:3000'.
[23:41:18 INF] CORS policy execution successful.
[23:41:18 DBG] The request is a preflight request.
[23:41:18 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:41:18 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 50.2075ms
[23:41:18 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 57
[23:41:18 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:41:18 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[23:41:18 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:41:18 DBG] The request has an origin header: 'http://localhost:3000'.
[23:41:18 INF] CORS policy execution successful.
[23:41:18 DBG] Static files was skipped as the request already matched an endpoint.
[23:41:18 INF] HTTP POST /api/Authentication/login received from ::1
[23:41:18 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:41:18 DBG] Header: Connection=["keep-alive"]
[23:41:18 DBG] Header: Host=["localhost:5295"]
[23:41:19 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:41:19 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:41:19 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:41:19 DBG] Header: Content-Type=["application/json"]
[23:41:19 DBG] Header: Origin=["http://localhost:3000"]
[23:41:19 DBG] Header: Referer=["http://localhost:3000/"]
[23:41:19 DBG] Header: Content-Length=["57"]
[23:41:19 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:41:19 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:41:19 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:41:19 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:41:19 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:41:19 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:41:19 DBG] Connection id "0HNCQ32D05FOU", Request id "0HNCQ32D05FOU:00000004": started reading request body.
[23:41:19 DBG] Connection id "0HNCQ32D05FOU", Request id "0HNCQ32D05FOU:00000004": done reading request body.
[23:41:19 INF] Request Body: {"email":"anhlehongwork@gmail.com","password":"12345678"}
[23:41:19 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anhlehongwork@gmail.com",
  "password": "12345678"
}
[23:41:19 DBG] AuthenticationScheme: Bearer was not authenticated.
[23:41:19 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:41:19 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[23:41:19 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:41:19 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:41:19 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:41:19 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:41:19 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[23:41:19 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:41:19 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:41:19 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:41:19 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[23:41:19 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[23:41:19 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[23:41:19 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:41:19 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:41:19 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:41:19 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:41:19 INF] Executing action method SMedia.Controllers.AuthenticationController.Login (SMedia) - Validation state: "Valid"
[23:41:19 INF] Executed DbCommand (51ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[23:41:19 INF] Executed action method SMedia.Controllers.AuthenticationController.Login (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 735.109ms.
[23:41:19 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:41:19 DBG] No information found on request to perform content negotiation.
[23:41:19 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[23:41:19 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:41:19 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.AuthResponse'.
[23:41:19 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 826.9883ms
[23:41:19 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:41:19 INF] Response (Duration: 887ms): API: POST /api/Authentication/login
StatusCode: 200
Body:
{
  "Token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM"
}
[23:41:19 INF] HTTP 200 returned for POST /api/Authentication/login
[23:41:19 DBG] Response Body: {"Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM"}
[23:41:19 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:41:19 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 200 null application/json; charset=utf-8 1059.8741ms
[23:41:20 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[23:41:20 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:41:20 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:41:20 DBG] The request has an origin header: 'http://localhost:3000'.
[23:41:20 INF] CORS policy execution successful.
[23:41:20 DBG] The request is a preflight request.
[23:41:20 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:41:20 DBG] Connection id "0HNCQ32D05FOV" accepted.
[23:41:20 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 40.1727ms
[23:41:20 DBG] Connection id "0HNCQ32D05FOV" started.
[23:41:20 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[23:41:20 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:41:20 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:41:20 DBG] The request has an origin header: 'http://localhost:3000'.
[23:41:20 INF] CORS policy execution successful.
[23:41:20 DBG] Static files was skipped as the request already matched an endpoint.
[23:41:20 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[23:41:20 DBG] Header: Accept=["*/*"]
[23:41:20 DBG] Header: Connection=["keep-alive"]
[23:41:20 DBG] Header: Host=["localhost:5295"]
[23:41:20 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:41:20 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:41:20 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:41:20 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM"]
[23:41:20 DBG] Header: Cache-Control=["max-age=0"]
[23:41:20 DBG] Header: Origin=["http://localhost:3000"]
[23:41:20 DBG] Header: Referer=["http://localhost:3000/"]
[23:41:20 DBG] Header: Content-Length=["0"]
[23:41:20 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:41:20 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[23:41:20 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:41:20 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:41:20 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[23:41:20 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:41:20 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:41:20 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:41:20 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM
Query Parameters:
  negotiateVersion: 1
[23:41:20 DBG] Successfully validated the token.
[23:41:20 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:41:20 DBG] Authorization was successful.
[23:41:20 INF] Executing endpoint '/hubs/chat/negotiate'
[23:41:20 DBG] New connection gqjx88Jk8iTAVXrHKD918g created.
[23:41:20 DBG] Sending negotiation response.
[23:41:20 INF] Executed endpoint '/hubs/chat/negotiate'
[23:41:20 INF] Response (Duration: 216ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "gqjx88Jk8iTAVXrHKD918g",
  "connectionToken": "TKtweGs65o0zB7s8Ek2rHA",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[23:41:20 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[23:41:20 DBG] Response Body: {"negotiateVersion":1,"connectionId":"gqjx88Jk8iTAVXrHKD918g","connectionToken":"TKtweGs65o0zB7s8Ek2rHA","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[23:41:20 DBG] Connection id "0HNCQ32D05FOV" completed keep alive response.
[23:41:20 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 367.7639ms
[23:41:20 DBG] Connection id "0HNCQ32D05FP0" accepted.
[23:41:20 DBG] Connection id "0HNCQ32D05FP0" started.
[23:41:20 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=TKtweGs65o0zB7s8Ek2rHA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM - null null
[23:41:20 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[23:41:20 DBG] Request matched endpoint '/hubs/chat'
[23:41:20 DBG] The request has an origin header: 'http://localhost:3000'.
[23:41:20 INF] CORS policy execution successful.
[23:41:20 DBG] Static files was skipped as the request already matched an endpoint.
[23:41:20 INF] HTTP GET /hubs/chat?id=TKtweGs65o0zB7s8Ek2rHA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM received from ::1
[23:41:20 DBG] Header: Connection=["Upgrade"]
[23:41:20 DBG] Header: Host=["localhost:5295"]
[23:41:20 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:41:20 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:41:20 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:41:20 DBG] Header: Cache-Control=["no-cache"]
[23:41:20 DBG] Header: Origin=["http://localhost:3000"]
[23:41:20 DBG] Header: Pragma=["no-cache"]
[23:41:20 DBG] Header: Upgrade=["websocket"]
[23:41:20 DBG] Header: Sec-WebSocket-Version=["13"]
[23:41:20 DBG] Header: Sec-WebSocket-Key=["qqLcKqf4FozkGsN7fZqDyQ=="]
[23:41:20 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[23:41:20 INF] Request: URL: http://localhost:5295/hubs/chat?id=TKtweGs65o0zB7s8Ek2rHA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM
Authenticated: Yes
Query Parameters:
  id: TKtweGs65o0zB7s8Ek2rHA
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM
[23:41:20 DBG] Successfully validated the token.
[23:41:20 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:41:20 DBG] Authorization was successful.
[23:41:20 INF] Executing endpoint '/hubs/chat'
[23:41:20 DBG] Establishing new connection.
[23:41:20 DBG] OnConnectedAsync started.
[23:41:20 DBG] Socket opened using Sub-Protocol: 'null'.
[23:41:20 DBG] Found protocol implementation for requested protocol: json.
[23:41:20 DBG] Completed connection handshake. Using HubProtocol 'json'.
[23:41:40 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[23:41:40 DBG] Connection id "0HNCQ32D05FP1" accepted.
[23:41:40 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:41:40 DBG] Connection id "0HNCQ32D05FP1" started.
[23:41:40 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:41:40 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[23:41:40 DBG] The request has an origin header: 'http://localhost:3000'.
[23:41:40 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:41:40 INF] CORS policy execution successful.
[23:41:40 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:41:40 DBG] The request is a preflight request.
[23:41:40 DBG] The request has an origin header: 'http://localhost:3000'.
[23:41:40 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:41:40 INF] CORS policy execution successful.
[23:41:40 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 204 null null 37.0418ms
[23:41:40 DBG] The request is a preflight request.
[23:41:40 DBG] Connection id "0HNCQ32D05FP1" completed keep alive response.
[23:41:40 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 204 null null 37.9057ms
[23:41:40 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[23:41:40 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:41:40 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:41:40 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:41:40 DBG] The request has an origin header: 'http://localhost:3000'.
[23:41:40 INF] CORS policy execution successful.
[23:41:40 DBG] Static files was skipped as the request already matched an endpoint.
[23:41:40 INF] HTTP GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 received from ::1
[23:41:40 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:41:40 DBG] Header: Connection=["keep-alive"]
[23:41:40 DBG] Header: Host=["localhost:5295"]
[23:41:40 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:41:40 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:41:40 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:41:40 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM"]
[23:41:40 DBG] Header: Origin=["http://localhost:3000"]
[23:41:40 DBG] Header: Referer=["http://localhost:3000/"]
[23:41:40 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:41:40 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:41:40 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:41:40 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:41:40 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:41:40 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:41:40 INF] Request: URL: http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
Query Parameters:
  page: 1
  pageSize: 20
[23:41:40 DBG] Successfully validated the token.
[23:41:40 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:41:40 DBG] Authorization was successful.
[23:41:40 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:41:40 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[23:41:40 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:41:40 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:41:40 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:41:40 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:41:40 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:41:40 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:41:40 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:41:40 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[23:41:40 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[23:41:40 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:41:40 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:41:40 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[23:41:40 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[23:41:40 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[23:41:40 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[23:41:40 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:41:40 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:41:40 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[23:41:40 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[23:41:40 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[23:41:40 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[23:41:40 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:41:40 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:41:40 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[23:41:40 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[23:41:40 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[23:41:41 INF] Executed DbCommand (615ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[23:41:41 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1392.3587ms.
[23:41:41 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:41:41 DBG] No information found on request to perform content negotiation.
[23:41:41 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[23:41:41 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[23:41:41 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:41:41 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[23:41:41 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 1595.2475ms
[23:41:41 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:41:41 INF] Response (Duration: 1664ms): API: GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "96334ad5-9f39-4be8-9e06-0835033617dd",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:47.2499887",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6cca47b1-7a49-45bc-80df-15637582dc8f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:46.6100241",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6449b592-d74b-46b4-8aec-158e6258020c",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:25.1446238",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fbcef994-c640-4c95-883d-3734389c1af6",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:23.8157184",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 17,
  "Page": 1,
  "PageSize": 20
}
[23:41:41 INF] HTTP 200 returned for GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
[23:41:41 DBG] Response Body: {"Messages":[{"MessageId":"96334ad5-9f39-4be8-9e06-0835033617dd","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:47.2499887","IsRead":false,"Media":[]},{"MessageId":"6cca47b1-7a49-45bc-80df-15637582dc8f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:46.6100241","IsRead":false,"Media":[]},{"MessageId":"6449b592-d74b-46b4-8aec-158e6258020c","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:25.1446238","IsRead":false,"Media":[]},{"MessageId":"fbcef994-c640-4c95-883d-3734389c1af6","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:23.8157184","IsRead":false,"Media":[]},{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":17,"Page":1,"PageSize":20}
[23:41:41 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:41:41 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[23:41:41 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 200 null application/json; charset=utf-8 1774.5726ms
[23:41:41 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:41:41 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:41:41 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:41:41 DBG] The request has an origin header: 'http://localhost:3000'.
[23:41:41 INF] CORS policy execution successful.
[23:41:41 DBG] Static files was skipped as the request already matched an endpoint.
[23:41:41 INF] HTTP GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 received from ::1
[23:41:41 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:41:42 DBG] Header: Connection=["keep-alive"]
[23:41:42 DBG] Header: Host=["localhost:5295"]
[23:41:42 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:41:42 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:41:42 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:41:42 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM"]
[23:41:42 DBG] Header: Origin=["http://localhost:3000"]
[23:41:42 DBG] Header: Referer=["http://localhost:3000/"]
[23:41:42 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:41:42 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:41:42 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:41:42 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:41:42 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:41:42 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:41:42 INF] Request: URL: http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
Query Parameters:
  page: 1
  pageSize: 20
[23:41:42 DBG] Successfully validated the token.
[23:41:42 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:41:42 DBG] Authorization was successful.
[23:41:42 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:41:42 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[23:41:42 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:41:42 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:41:42 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:41:42 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:41:42 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:41:42 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:41:42 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:41:42 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[23:41:42 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[23:41:42 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:41:42 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:41:42 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[23:41:42 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[23:41:42 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[23:41:42 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[23:41:42 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:41:42 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:41:42 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[23:41:42 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[23:41:42 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[23:41:42 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[23:41:42 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:41:42 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:41:42 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[23:41:42 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[23:41:42 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[23:41:42 INF] Executed DbCommand (603ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[23:41:42 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 624.2604ms.
[23:41:42 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:41:42 DBG] No information found on request to perform content negotiation.
[23:41:42 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[23:41:42 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[23:41:42 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:41:42 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[23:41:42 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 751.3265ms
[23:41:42 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:41:42 INF] Response (Duration: 805ms): API: GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "96334ad5-9f39-4be8-9e06-0835033617dd",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:47.2499887",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6cca47b1-7a49-45bc-80df-15637582dc8f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:46.6100241",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6449b592-d74b-46b4-8aec-158e6258020c",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:25.1446238",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fbcef994-c640-4c95-883d-3734389c1af6",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:23.8157184",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 17,
  "Page": 1,
  "PageSize": 20
}
[23:41:42 INF] HTTP 200 returned for GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
[23:41:42 DBG] Response Body: {"Messages":[{"MessageId":"96334ad5-9f39-4be8-9e06-0835033617dd","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:47.2499887","IsRead":false,"Media":[]},{"MessageId":"6cca47b1-7a49-45bc-80df-15637582dc8f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:46.6100241","IsRead":false,"Media":[]},{"MessageId":"6449b592-d74b-46b4-8aec-158e6258020c","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:25.1446238","IsRead":false,"Media":[]},{"MessageId":"fbcef994-c640-4c95-883d-3734389c1af6","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:23.8157184","IsRead":false,"Media":[]},{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":17,"Page":1,"PageSize":20}
[23:41:42 DBG] Connection id "0HNCQ32D05FP1" completed keep alive response.
[23:41:42 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 200 null application/json; charset=utf-8 965.9173ms
[23:42:06 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[23:42:06 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:42:06 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:42:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:06 INF] CORS policy execution successful.
[23:42:06 DBG] The request is a preflight request.
[23:42:06 DBG] Connection id "0HNCQ32D05FP1" completed keep alive response.
[23:42:06 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 44.9887ms
[23:42:06 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 59
[23:42:06 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:42:06 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[23:42:06 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:42:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:06 INF] CORS policy execution successful.
[23:42:06 DBG] Static files was skipped as the request already matched an endpoint.
[23:42:06 INF] HTTP POST /api/Authentication/login received from ::1
[23:42:06 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:42:06 DBG] Header: Connection=["keep-alive"]
[23:42:06 DBG] Header: Host=["localhost:5295"]
[23:42:06 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:42:06 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:42:06 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:42:06 DBG] Header: Content-Type=["application/json"]
[23:42:06 DBG] Header: Origin=["http://localhost:3000"]
[23:42:06 DBG] Header: Referer=["http://localhost:3000/"]
[23:42:06 DBG] Header: Content-Length=["59"]
[23:42:06 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:42:06 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:42:06 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:42:06 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:42:06 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:42:06 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:42:06 DBG] Connection id "0HNCQ32D05FP1", Request id "0HNCQ32D05FP1:00000004": started reading request body.
[23:42:06 DBG] Connection id "0HNCQ32D05FP1", Request id "0HNCQ32D05FP1:00000004": done reading request body.
[23:42:06 INF] Request Body: {"email":"anh.anhle012345@gmail.com","password":"12345678"}
[23:42:06 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anh.anhle012345@gmail.com",
  "password": "12345678"
}
[23:42:06 DBG] AuthenticationScheme: Bearer was not authenticated.
[23:42:06 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:42:06 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[23:42:06 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:42:06 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:42:06 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:42:06 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:42:06 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[23:42:06 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:42:06 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:42:06 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:42:06 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[23:42:06 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[23:42:06 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[23:42:06 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:42:06 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:42:06 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:42:06 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:42:06 INF] Executing action method SMedia.Controllers.AuthenticationController.Login (SMedia) - Validation state: "Valid"
[23:42:06 INF] Executed DbCommand (38ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[23:42:06 INF] Executed action method SMedia.Controllers.AuthenticationController.Login (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 347.3182ms.
[23:42:06 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:42:06 DBG] No information found on request to perform content negotiation.
[23:42:06 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[23:42:06 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:42:06 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.AuthResponse'.
[23:42:06 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 425.1004ms
[23:42:06 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:42:06 INF] Response (Duration: 471ms): API: POST /api/Authentication/login
StatusCode: 200
Body:
{
  "Token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY"
}
[23:42:06 INF] HTTP 200 returned for POST /api/Authentication/login
[23:42:06 DBG] Response Body: {"Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY"}
[23:42:06 DBG] Connection id "0HNCQ32D05FP1" completed keep alive response.
[23:42:06 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 200 null application/json; charset=utf-8 622.249ms
[23:42:06 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[23:42:06 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:42:06 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:42:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:06 INF] CORS policy execution successful.
[23:42:06 DBG] The request is a preflight request.
[23:42:06 DBG] Connection id "0HNCQ32D05FP1" completed keep alive response.
[23:42:06 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 56.624ms
[23:42:06 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[23:42:06 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:42:06 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:42:06 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:06 INF] CORS policy execution successful.
[23:42:06 DBG] Static files was skipped as the request already matched an endpoint.
[23:42:06 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[23:42:06 DBG] Header: Accept=["*/*"]
[23:42:06 DBG] Header: Connection=["keep-alive"]
[23:42:06 DBG] Header: Host=["localhost:5295"]
[23:42:06 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:42:06 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:42:06 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:42:06 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY"]
[23:42:06 DBG] Header: Cache-Control=["max-age=0"]
[23:42:06 DBG] Header: Origin=["http://localhost:3000"]
[23:42:06 DBG] Header: Referer=["http://localhost:3000/"]
[23:42:06 DBG] Header: Content-Length=["0"]
[23:42:06 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:42:06 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[23:42:06 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:42:06 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:42:06 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[23:42:06 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:42:06 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:42:06 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:42:06 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY
Query Parameters:
  negotiateVersion: 1
[23:42:07 DBG] Successfully validated the token.
[23:42:07 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:42:07 DBG] Authorization was successful.
[23:42:07 INF] Executing endpoint '/hubs/chat/negotiate'
[23:42:07 DBG] New connection R76F73w8Hu4d5MHeRsTd-A created.
[23:42:07 DBG] Sending negotiation response.
[23:42:07 INF] Executed endpoint '/hubs/chat/negotiate'
[23:42:07 INF] Response (Duration: 32ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "R76F73w8Hu4d5MHeRsTd-A",
  "connectionToken": "hLqWnqgxn7p7_OL7XrsCXQ",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[23:42:07 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[23:42:07 DBG] Response Body: {"negotiateVersion":1,"connectionId":"R76F73w8Hu4d5MHeRsTd-A","connectionToken":"hLqWnqgxn7p7_OL7XrsCXQ","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[23:42:07 DBG] Connection id "0HNCQ32D05FOV" completed keep alive response.
[23:42:07 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 189.6816ms
[23:42:07 DBG] Connection id "0HNCQ32D05FP2" accepted.
[23:42:07 DBG] Connection id "0HNCQ32D05FP2" started.
[23:42:07 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=hLqWnqgxn7p7_OL7XrsCXQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY - null null
[23:42:07 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[23:42:07 DBG] Request matched endpoint '/hubs/chat'
[23:42:07 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:07 INF] CORS policy execution successful.
[23:42:07 DBG] Static files was skipped as the request already matched an endpoint.
[23:42:07 INF] HTTP GET /hubs/chat?id=hLqWnqgxn7p7_OL7XrsCXQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY received from ::1
[23:42:07 DBG] Header: Connection=["Upgrade"]
[23:42:07 DBG] Header: Host=["localhost:5295"]
[23:42:07 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:42:07 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:42:07 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:42:07 DBG] Header: Cache-Control=["no-cache"]
[23:42:07 DBG] Header: Origin=["http://localhost:3000"]
[23:42:07 DBG] Header: Pragma=["no-cache"]
[23:42:07 DBG] Header: Upgrade=["websocket"]
[23:42:07 DBG] Header: Sec-WebSocket-Version=["13"]
[23:42:07 DBG] Header: Sec-WebSocket-Key=["7JPfH2dBPNru0ObgsyEMTA=="]
[23:42:07 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[23:42:07 INF] Request: URL: http://localhost:5295/hubs/chat?id=hLqWnqgxn7p7_OL7XrsCXQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY
Authenticated: Yes
Query Parameters:
  id: hLqWnqgxn7p7_OL7XrsCXQ
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY
[23:42:07 DBG] Successfully validated the token.
[23:42:07 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:42:07 DBG] Authorization was successful.
[23:42:07 INF] Executing endpoint '/hubs/chat'
[23:42:07 DBG] Establishing new connection.
[23:42:07 DBG] OnConnectedAsync started.
[23:42:07 DBG] Socket opened using Sub-Protocol: 'null'.
[23:42:07 DBG] Found protocol implementation for requested protocol: json.
[23:42:07 DBG] Completed connection handshake. Using HubProtocol 'json'.
[23:42:15 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[23:42:15 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[23:42:15 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:42:15 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:42:15 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:42:15 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:42:15 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:15 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:15 INF] CORS policy execution successful.
[23:42:15 INF] CORS policy execution successful.
[23:42:15 DBG] The request is a preflight request.
[23:42:15 DBG] The request is a preflight request.
[23:42:15 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:42:15 DBG] Connection id "0HNCQ32D05FP1" completed keep alive response.
[23:42:15 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 57.7931ms
[23:42:15 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 66.8397ms
[23:42:15 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[23:42:15 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:42:15 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:42:15 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:42:15 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:15 INF] CORS policy execution successful.
[23:42:15 DBG] Static files was skipped as the request already matched an endpoint.
[23:42:15 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[23:42:15 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:42:15 DBG] Header: Connection=["keep-alive"]
[23:42:15 DBG] Header: Host=["localhost:5295"]
[23:42:15 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:42:15 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:42:15 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:42:15 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY"]
[23:42:15 DBG] Header: Origin=["http://localhost:3000"]
[23:42:15 DBG] Header: Referer=["http://localhost:3000/"]
[23:42:15 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:42:15 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:42:15 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:42:15 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:42:15 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:42:15 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:42:15 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[23:42:15 DBG] Successfully validated the token.
[23:42:15 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:42:15 DBG] Authorization was successful.
[23:42:15 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:42:15 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[23:42:15 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:42:15 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:42:15 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:42:16 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:42:16 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:42:16 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:42:16 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:42:16 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[23:42:16 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[23:42:16 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:42:16 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:42:16 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[23:42:16 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[23:42:16 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[23:42:16 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[23:42:16 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:42:16 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:42:16 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[23:42:16 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[23:42:16 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[23:42:16 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[23:42:16 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:42:16 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:42:16 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[23:42:16 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[23:42:16 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[23:42:16 INF] Executed DbCommand (635ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[23:42:16 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 651.8138ms.
[23:42:16 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:42:16 DBG] No information found on request to perform content negotiation.
[23:42:16 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[23:42:16 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[23:42:16 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:42:16 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[23:42:16 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 759.3452ms
[23:42:16 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:42:16 INF] Response (Duration: 805ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "96334ad5-9f39-4be8-9e06-0835033617dd",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:47.2499887",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6cca47b1-7a49-45bc-80df-15637582dc8f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:46.6100241",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6449b592-d74b-46b4-8aec-158e6258020c",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:25.1446238",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fbcef994-c640-4c95-883d-3734389c1af6",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:23.8157184",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 17,
  "Page": 1,
  "PageSize": 20
}
[23:42:16 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[23:42:16 DBG] Response Body: {"Messages":[{"MessageId":"96334ad5-9f39-4be8-9e06-0835033617dd","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:47.2499887","IsRead":false,"Media":[]},{"MessageId":"6cca47b1-7a49-45bc-80df-15637582dc8f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:46.6100241","IsRead":false,"Media":[]},{"MessageId":"6449b592-d74b-46b4-8aec-158e6258020c","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:25.1446238","IsRead":false,"Media":[]},{"MessageId":"fbcef994-c640-4c95-883d-3734389c1af6","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:23.8157184","IsRead":false,"Media":[]},{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":17,"Page":1,"PageSize":20}
[23:42:16 DBG] Connection id "0HNCQ32D05FP1" completed keep alive response.
[23:42:16 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[23:42:16 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 937.3976ms
[23:42:16 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:42:16 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:42:16 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:42:16 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:16 INF] CORS policy execution successful.
[23:42:16 DBG] Static files was skipped as the request already matched an endpoint.
[23:42:16 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[23:42:16 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:42:16 DBG] Header: Connection=["keep-alive"]
[23:42:16 DBG] Header: Host=["localhost:5295"]
[23:42:16 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:42:16 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:42:16 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:42:16 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY"]
[23:42:16 DBG] Header: Origin=["http://localhost:3000"]
[23:42:16 DBG] Header: Referer=["http://localhost:3000/"]
[23:42:16 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:42:16 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:42:16 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:42:16 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:42:16 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:42:16 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:42:16 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[23:42:16 DBG] Successfully validated the token.
[23:42:16 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:42:16 DBG] Authorization was successful.
[23:42:16 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:42:16 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[23:42:16 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:42:16 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:42:16 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:42:16 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:42:16 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:42:16 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:42:16 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:42:16 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[23:42:17 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[23:42:17 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:42:17 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:42:17 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[23:42:17 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[23:42:17 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[23:42:17 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[23:42:17 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:42:17 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:42:17 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[23:42:17 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[23:42:17 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[23:42:17 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[23:42:17 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:42:17 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:42:17 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[23:42:17 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[23:42:17 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[23:42:17 INF] Executed DbCommand (558ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[23:42:17 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 576.5413ms.
[23:42:17 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:42:17 DBG] No information found on request to perform content negotiation.
[23:42:17 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[23:42:17 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[23:42:17 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:42:17 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[23:42:17 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 715.0471ms
[23:42:17 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:42:17 INF] Response (Duration: 780ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "96334ad5-9f39-4be8-9e06-0835033617dd",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:47.2499887",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6cca47b1-7a49-45bc-80df-15637582dc8f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:46.6100241",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6449b592-d74b-46b4-8aec-158e6258020c",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:25.1446238",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fbcef994-c640-4c95-883d-3734389c1af6",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:23.8157184",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 17,
  "Page": 1,
  "PageSize": 20
}
[23:42:17 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[23:42:17 DBG] Response Body: {"Messages":[{"MessageId":"96334ad5-9f39-4be8-9e06-0835033617dd","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:47.2499887","IsRead":false,"Media":[]},{"MessageId":"6cca47b1-7a49-45bc-80df-15637582dc8f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:46.6100241","IsRead":false,"Media":[]},{"MessageId":"6449b592-d74b-46b4-8aec-158e6258020c","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:25.1446238","IsRead":false,"Media":[]},{"MessageId":"fbcef994-c640-4c95-883d-3734389c1af6","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:23.8157184","IsRead":false,"Media":[]},{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":17,"Page":1,"PageSize":20}
[23:42:17 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:42:17 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 948.2465ms
[23:42:24 DBG] Received hub invocation: InvocationMessage { InvocationId: "0", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:42:28 DBG] Received hub invocation: InvocationMessage { InvocationId: "1", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:42:28 DBG] Received hub invocation: InvocationMessage { InvocationId: "2", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:42:29 DBG] Received hub invocation: InvocationMessage { InvocationId: "3", Target: "SendMessageToUser", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, hỏi nè ], StreamIds: [  ] }.
[23:42:29 INF] Executed DbCommand (67ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[23:42:29 INF] Executed DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[23:42:29 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8 - null null
[23:42:29 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[23:42:29 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:42:29 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:29 INF] CORS policy execution successful.
[23:42:29 DBG] The request is a preflight request.
[23:42:29 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:42:29 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8 - 204 null null 15.5261ms
[23:42:29 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8 - application/x-www-form-urlencoded 0
[23:42:29 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[23:42:29 DBG] Endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)' with route pattern 'api/messages/send-message' is valid for the request path '/api/messages/send-message'
[23:42:29 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:42:29 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:29 INF] CORS policy execution successful.
[23:42:29 DBG] Static files was skipped as the request already matched an endpoint.
[23:42:29 INF] HTTP POST /api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8 received from ::1
[23:42:29 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:42:29 DBG] Header: Connection=["keep-alive"]
[23:42:29 DBG] Header: Host=["localhost:5295"]
[23:42:29 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:42:29 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:42:29 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:42:29 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM"]
[23:42:29 DBG] Header: Content-Type=["application/x-www-form-urlencoded"]
[23:42:29 DBG] Header: Origin=["http://localhost:3000"]
[23:42:29 DBG] Header: Referer=["http://localhost:3000/"]
[23:42:29 DBG] Header: Content-Length=["0"]
[23:42:29 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:42:29 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:42:29 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:42:29 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:42:29 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:42:29 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:42:29 INF] Request: URL: http://localhost:5295/api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM
Path Parameters:
  action: SendMessage
  controller: Message
Query Parameters:
  senderId: undefined
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
  content: hỏi nè
[23:42:29 DBG] Successfully validated the token.
[23:42:29 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:42:29 DBG] Authorization was successful.
[23:42:29 INF] Executing endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:42:29 INF] Route matched with {action = "SendMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.MessageDto]] SendMessage(System.Guid, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.Collections.Generic.List`1[System.String]) on controller SMedia.Controllers.MessageController (SMedia).
[23:42:29 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:42:29 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:42:29 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:42:29 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:42:29 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:42:29 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:42:29 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:42:29 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' ...
[23:42:29 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' using the name 'senderId' in request data ...
[23:42:29 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[23:42:29 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[23:42:29 DBG] Attempting to validate the bound parameter 'senderId' of type 'System.Guid' ...
[23:42:29 DBG] Done attempting to validate the bound parameter 'senderId' of type 'System.Guid'.
[23:42:29 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[23:42:29 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' using the name 'receiverId' in request data ...
[23:42:29 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:42:29 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:42:29 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[23:42:29 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:42:29 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[23:42:29 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' using the name '' in request data ...
[23:42:29 DBG] Could not find a value in the request with name '' for binding parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:42:29 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:42:29 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:42:29 DBG] Attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[23:42:29 DBG] Done attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:42:29 DBG] Attempting to bind parameter 'content' of type 'System.String' ...
[23:42:29 DBG] Attempting to bind parameter 'content' of type 'System.String' using the name 'content' in request data ...
[23:42:29 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[23:42:29 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[23:42:29 DBG] Attempting to validate the bound parameter 'content' of type 'System.String' ...
[23:42:29 DBG] Done attempting to validate the bound parameter 'content' of type 'System.String'.
[23:42:29 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[23:42:29 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' using the name '' in request data ...
[23:42:29 DBG] Could not bind to collection using a format like =value1&=value2
[23:42:29 DBG] Attempting to bind model using indices. Example formats include: [0]=value1&[1]=value2, [0]=value1&[1]=value2, .index=zero&.index=one&[zero]=value1&[one]=value2
[23:42:29 DBG] Attempting to bind model of type 'System.String' using the name '[0]' in request data ...
[23:42:29 DBG] Could not find a value in the request with name '[0]' of type 'System.String'.
[23:42:29 DBG] Done attempting to bind model of type 'System.String' using the name '[0]'.
[23:42:29 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:42:29 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:42:29 DBG] Attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[23:42:29 DBG] Done attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:42:29 DBG] The request has model state errors, returning an error response.
[23:42:29 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:42:29 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:42:29 DBG] No information found on request to perform content negotiation.
[23:42:29 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:42:29 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:42:29 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:42:30 INF] Executed action SMedia.Controllers.MessageController.SendMessage (SMedia) in 205.531ms
[23:42:30 INF] Executed endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:42:30 INF] Response (Duration: 258ms): API: POST /api/messages/send-message
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"senderId":["The value 'undefined' is not valid."]},"traceId":"00-4f1bf49576dcbdc54d4b2822fcae1e8c-2e1d57c929e692cc-00"}
[23:42:30 INF] HTTP 400 returned for POST /api/messages/send-message
[23:42:30 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"senderId":["The value 'undefined' is not valid."]},"traceId":"00-4f1bf49576dcbdc54d4b2822fcae1e8c-2e1d57c929e692cc-00"}
[23:42:30 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:42:30 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8 - 400 null application/problem+json; charset=utf-8 347.0564ms
[23:42:31 DBG] Received hub invocation: InvocationMessage { InvocationId: "4", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:42:31 DBG] Received hub invocation: InvocationMessage { InvocationId: "5", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:42:34 DBG] Received hub invocation: InvocationMessage { InvocationId: "6", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:42:34 DBG] Received hub invocation: InvocationMessage { InvocationId: "7", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:42:37 DBG] Received hub invocation: InvocationMessage { InvocationId: "8", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:42:37 DBG] Received hub invocation: InvocationMessage { InvocationId: "9", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:42:40 DBG] Received hub invocation: InvocationMessage { InvocationId: "10", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:42:40 DBG] Received hub invocation: InvocationMessage { InvocationId: "11", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:42:43 DBG] Received hub invocation: InvocationMessage { InvocationId: "12", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:42:43 DBG] Received hub invocation: InvocationMessage { InvocationId: "13", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:42:47 DBG] Received hub invocation: InvocationMessage { InvocationId: "14", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:42:47 DBG] Received hub invocation: InvocationMessage { InvocationId: "15", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:42:51 DBG] Received hub invocation: InvocationMessage { InvocationId: "16", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:42:51 DBG] Received hub invocation: InvocationMessage { InvocationId: "17", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:42:54 DBG] Received hub invocation: InvocationMessage { InvocationId: "18", Target: "SendMessageToUser", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, hỏi nè ], StreamIds: [  ] }.
[23:42:54 INF] Executed DbCommand (45ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[23:42:54 INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[23:42:54 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8 - null null
[23:42:54 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[23:42:54 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:42:54 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:54 INF] CORS policy execution successful.
[23:42:54 DBG] The request is a preflight request.
[23:42:54 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:42:54 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8 - 204 null null 14.7983ms
[23:42:54 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8 - application/x-www-form-urlencoded 0
[23:42:54 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[23:42:54 DBG] Endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)' with route pattern 'api/messages/send-message' is valid for the request path '/api/messages/send-message'
[23:42:54 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:42:54 DBG] The request has an origin header: 'http://localhost:3000'.
[23:42:54 INF] CORS policy execution successful.
[23:42:54 DBG] Static files was skipped as the request already matched an endpoint.
[23:42:54 INF] HTTP POST /api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8 received from ::1
[23:42:54 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:42:54 DBG] Header: Connection=["keep-alive"]
[23:42:54 DBG] Header: Host=["localhost:5295"]
[23:42:54 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:42:54 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:42:54 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:42:54 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM"]
[23:42:54 DBG] Header: Content-Type=["application/x-www-form-urlencoded"]
[23:42:54 DBG] Header: Origin=["http://localhost:3000"]
[23:42:54 DBG] Header: Referer=["http://localhost:3000/"]
[23:42:54 DBG] Header: Content-Length=["0"]
[23:42:54 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:42:54 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:42:54 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:42:54 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:42:54 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:42:54 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:42:54 INF] Request: URL: http://localhost:5295/api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM
Path Parameters:
  action: SendMessage
  controller: Message
Query Parameters:
  senderId: undefined
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
  content: hỏi nè
[23:42:54 DBG] Successfully validated the token.
[23:42:54 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:42:54 DBG] Authorization was successful.
[23:42:54 INF] Executing endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:42:54 INF] Route matched with {action = "SendMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.MessageDto]] SendMessage(System.Guid, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.Collections.Generic.List`1[System.String]) on controller SMedia.Controllers.MessageController (SMedia).
[23:42:54 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:42:54 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:42:54 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:42:54 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:42:54 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:42:54 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:42:54 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:42:54 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' ...
[23:42:54 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' using the name 'senderId' in request data ...
[23:42:54 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[23:42:54 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[23:42:54 DBG] Attempting to validate the bound parameter 'senderId' of type 'System.Guid' ...
[23:42:54 DBG] Done attempting to validate the bound parameter 'senderId' of type 'System.Guid'.
[23:42:54 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[23:42:54 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' using the name 'receiverId' in request data ...
[23:42:54 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:42:54 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:42:54 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[23:42:54 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:42:54 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[23:42:54 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' using the name '' in request data ...
[23:42:54 DBG] Could not find a value in the request with name '' for binding parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:42:54 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:42:54 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:42:54 DBG] Attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[23:42:54 DBG] Done attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:42:54 DBG] Attempting to bind parameter 'content' of type 'System.String' ...
[23:42:54 DBG] Attempting to bind parameter 'content' of type 'System.String' using the name 'content' in request data ...
[23:42:54 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[23:42:54 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[23:42:54 DBG] Attempting to validate the bound parameter 'content' of type 'System.String' ...
[23:42:54 DBG] Done attempting to validate the bound parameter 'content' of type 'System.String'.
[23:42:54 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[23:42:54 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' using the name '' in request data ...
[23:42:54 DBG] Could not bind to collection using a format like =value1&=value2
[23:42:54 DBG] Attempting to bind model using indices. Example formats include: [0]=value1&[1]=value2, [0]=value1&[1]=value2, .index=zero&.index=one&[zero]=value1&[one]=value2
[23:42:54 DBG] Attempting to bind model of type 'System.String' using the name '[0]' in request data ...
[23:42:54 DBG] Could not find a value in the request with name '[0]' of type 'System.String'.
[23:42:54 DBG] Done attempting to bind model of type 'System.String' using the name '[0]'.
[23:42:54 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:42:54 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:42:54 DBG] Attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[23:42:54 DBG] Done attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:42:54 DBG] The request has model state errors, returning an error response.
[23:42:54 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:42:54 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:42:54 DBG] No information found on request to perform content negotiation.
[23:42:54 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:42:54 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:42:54 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:42:54 INF] Executed action SMedia.Controllers.MessageController.SendMessage (SMedia) in 81.1239ms
[23:42:54 INF] Executed endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:42:54 INF] Response (Duration: 98ms): API: POST /api/messages/send-message
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"senderId":["The value 'undefined' is not valid."]},"traceId":"00-c176c3d49f821aaedd3e096d693f7040-5f2d0852552039ac-00"}
[23:42:54 INF] HTTP 400 returned for POST /api/messages/send-message
[23:42:54 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"senderId":["The value 'undefined' is not valid."]},"traceId":"00-c176c3d49f821aaedd3e096d693f7040-5f2d0852552039ac-00"}
[23:42:54 DBG] Connection id "0HNCQ32D05FOU" completed keep alive response.
[23:42:54 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=undefined&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=h%E1%BB%8Fi+n%C3%A8 - 400 null application/problem+json; charset=utf-8 153.0597ms
[23:42:54 DBG] Received hub invocation: InvocationMessage { InvocationId: "19", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:42:54 DBG] Received hub invocation: InvocationMessage { InvocationId: "20", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:42:57 DBG] Received hub invocation: InvocationMessage { InvocationId: "21", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:42:57 DBG] Received hub invocation: InvocationMessage { InvocationId: "22", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:00 DBG] Received hub invocation: InvocationMessage { InvocationId: "23", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:00 DBG] Received hub invocation: InvocationMessage { InvocationId: "24", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:03 DBG] Received hub invocation: InvocationMessage { InvocationId: "25", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:03 DBG] Received hub invocation: InvocationMessage { InvocationId: "26", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:06 DBG] Received hub invocation: InvocationMessage { InvocationId: "27", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:06 DBG] Received hub invocation: InvocationMessage { InvocationId: "28", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:09 DBG] Received hub invocation: InvocationMessage { InvocationId: "29", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:09 DBG] Received hub invocation: InvocationMessage { InvocationId: "30", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:12 DBG] Connection id "0HNCQ32D05FOT" disconnecting.
[23:43:12 DBG] Connection id "0HNCQ32D05FOT" stopped.
[23:43:12 DBG] Received hub invocation: InvocationMessage { InvocationId: "31", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:12 DBG] Connection id "0HNCQ32D05FOT" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:43:12 DBG] Received hub invocation: InvocationMessage { InvocationId: "32", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:15 DBG] Received hub invocation: InvocationMessage { InvocationId: "33", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:15 DBG] Received hub invocation: InvocationMessage { InvocationId: "34", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:18 DBG] Received hub invocation: InvocationMessage { InvocationId: "35", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:18 DBG] Received hub invocation: InvocationMessage { InvocationId: "36", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:21 DBG] Received hub invocation: InvocationMessage { InvocationId: "37", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:21 DBG] Received hub invocation: InvocationMessage { InvocationId: "38", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:24 DBG] Received hub invocation: InvocationMessage { InvocationId: "39", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:24 DBG] Received hub invocation: InvocationMessage { InvocationId: "40", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:27 DBG] Received hub invocation: InvocationMessage { InvocationId: "41", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:27 DBG] Received hub invocation: InvocationMessage { InvocationId: "42", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:30 DBG] Received hub invocation: InvocationMessage { InvocationId: "43", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:30 DBG] Received hub invocation: InvocationMessage { InvocationId: "44", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:33 DBG] Received hub invocation: InvocationMessage { InvocationId: "45", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:33 DBG] Received hub invocation: InvocationMessage { InvocationId: "46", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:36 DBG] Received hub invocation: InvocationMessage { InvocationId: "47", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:36 DBG] Received hub invocation: InvocationMessage { InvocationId: "48", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:40 DBG] Received hub invocation: InvocationMessage { InvocationId: "49", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:40 DBG] Received hub invocation: InvocationMessage { InvocationId: "50", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:44 DBG] Received hub invocation: InvocationMessage { InvocationId: "51", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:44 DBG] Received hub invocation: InvocationMessage { InvocationId: "52", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:48 DBG] Received hub invocation: InvocationMessage { InvocationId: "53", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:48 DBG] Received hub invocation: InvocationMessage { InvocationId: "54", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:52 DBG] Received hub invocation: InvocationMessage { InvocationId: "55", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:52 DBG] Received hub invocation: InvocationMessage { InvocationId: "56", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:43:56 DBG] Received hub invocation: InvocationMessage { InvocationId: "57", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:43:56 DBG] Received hub invocation: InvocationMessage { InvocationId: "58", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:00 DBG] Received hub invocation: InvocationMessage { InvocationId: "59", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:00 DBG] Received hub invocation: InvocationMessage { InvocationId: "60", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:04 DBG] Received hub invocation: InvocationMessage { InvocationId: "61", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:04 DBG] Received hub invocation: InvocationMessage { InvocationId: "62", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:08 DBG] Received hub invocation: InvocationMessage { InvocationId: "63", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:08 DBG] Received hub invocation: InvocationMessage { InvocationId: "64", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:12 DBG] Received hub invocation: InvocationMessage { InvocationId: "65", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:12 DBG] Received hub invocation: InvocationMessage { InvocationId: "66", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:16 DBG] Received hub invocation: InvocationMessage { InvocationId: "67", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:16 DBG] Received hub invocation: InvocationMessage { InvocationId: "68", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:18 DBG] Connection id "0HNCQ32D05FOV" disconnecting.
[23:44:18 DBG] Connection id "0HNCQ32D05FOV" stopped.
[23:44:18 DBG] Connection id "0HNCQ32D05FOV" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:44:20 DBG] Received hub invocation: InvocationMessage { InvocationId: "69", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:20 DBG] Received hub invocation: InvocationMessage { InvocationId: "70", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:24 DBG] Received hub invocation: InvocationMessage { InvocationId: "71", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:24 DBG] Received hub invocation: InvocationMessage { InvocationId: "72", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:27 DBG] Connection id "0HNCQ32D05FP1" disconnecting.
[23:44:27 DBG] Connection id "0HNCQ32D05FP1" stopped.
[23:44:27 DBG] Connection id "0HNCQ32D05FP1" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:44:28 DBG] Received hub invocation: InvocationMessage { InvocationId: "73", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:28 DBG] Received hub invocation: InvocationMessage { InvocationId: "74", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:32 DBG] Received hub invocation: InvocationMessage { InvocationId: "75", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:32 DBG] Received hub invocation: InvocationMessage { InvocationId: "76", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:36 DBG] Received hub invocation: InvocationMessage { InvocationId: "77", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:36 DBG] Received hub invocation: InvocationMessage { InvocationId: "78", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:40 DBG] Received hub invocation: InvocationMessage { InvocationId: "79", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:40 DBG] Received hub invocation: InvocationMessage { InvocationId: "80", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:44 DBG] Received hub invocation: InvocationMessage { InvocationId: "81", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:44 DBG] Received hub invocation: InvocationMessage { InvocationId: "82", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:48 DBG] Received hub invocation: InvocationMessage { InvocationId: "83", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:48 DBG] Received hub invocation: InvocationMessage { InvocationId: "84", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:52 DBG] Received hub invocation: InvocationMessage { InvocationId: "85", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:52 DBG] Received hub invocation: InvocationMessage { InvocationId: "86", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:44:56 DBG] Received hub invocation: InvocationMessage { InvocationId: "87", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:44:56 DBG] Received hub invocation: InvocationMessage { InvocationId: "88", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:00 DBG] Received hub invocation: InvocationMessage { InvocationId: "89", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:00 DBG] Received hub invocation: InvocationMessage { InvocationId: "90", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:04 DBG] Received hub invocation: InvocationMessage { InvocationId: "91", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:04 DBG] Received hub invocation: InvocationMessage { InvocationId: "92", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:05 DBG] Connection id "0HNCQ32D05FOU" disconnecting.
[23:45:05 DBG] Connection id "0HNCQ32D05FOU" stopped.
[23:45:05 DBG] Connection id "0HNCQ32D05FOU" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:45:08 DBG] Received hub invocation: InvocationMessage { InvocationId: "93", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:08 DBG] Received hub invocation: InvocationMessage { InvocationId: "94", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:12 DBG] Received hub invocation: InvocationMessage { InvocationId: "95", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:12 DBG] Received hub invocation: InvocationMessage { InvocationId: "96", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:16 DBG] Received hub invocation: InvocationMessage { InvocationId: "97", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:16 DBG] Received hub invocation: InvocationMessage { InvocationId: "98", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:20 DBG] Received hub invocation: InvocationMessage { InvocationId: "99", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:20 DBG] Received hub invocation: InvocationMessage { InvocationId: "100", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:24 DBG] Received hub invocation: InvocationMessage { InvocationId: "101", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:24 DBG] Received hub invocation: InvocationMessage { InvocationId: "102", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:28 DBG] Received hub invocation: InvocationMessage { InvocationId: "103", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:28 DBG] Received hub invocation: InvocationMessage { InvocationId: "104", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:32 DBG] Received hub invocation: InvocationMessage { InvocationId: "105", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:32 DBG] Received hub invocation: InvocationMessage { InvocationId: "106", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:36 DBG] Received hub invocation: InvocationMessage { InvocationId: "107", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:36 DBG] Received hub invocation: InvocationMessage { InvocationId: "108", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:40 DBG] Received hub invocation: InvocationMessage { InvocationId: "109", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:40 DBG] Received hub invocation: InvocationMessage { InvocationId: "110", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:44 DBG] Received hub invocation: InvocationMessage { InvocationId: "111", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:44 DBG] Received hub invocation: InvocationMessage { InvocationId: "112", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:48 DBG] Received hub invocation: InvocationMessage { InvocationId: "113", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:48 DBG] Received hub invocation: InvocationMessage { InvocationId: "114", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:52 DBG] Received hub invocation: InvocationMessage { InvocationId: "115", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:52 DBG] Received hub invocation: InvocationMessage { InvocationId: "116", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:45:56 DBG] Received hub invocation: InvocationMessage { InvocationId: "117", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:45:56 DBG] Received hub invocation: InvocationMessage { InvocationId: "118", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:00 DBG] Received hub invocation: InvocationMessage { InvocationId: "119", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:00 DBG] Received hub invocation: InvocationMessage { InvocationId: "120", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:04 DBG] Received hub invocation: InvocationMessage { InvocationId: "121", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:04 DBG] Received hub invocation: InvocationMessage { InvocationId: "122", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:08 DBG] Received hub invocation: InvocationMessage { InvocationId: "123", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:08 DBG] Received hub invocation: InvocationMessage { InvocationId: "124", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:11 DBG] Received hub invocation: InvocationMessage { InvocationId: "125", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:11 DBG] Received hub invocation: InvocationMessage { InvocationId: "126", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:15 DBG] Received hub invocation: InvocationMessage { InvocationId: "127", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:15 DBG] Received hub invocation: InvocationMessage { InvocationId: "128", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:19 DBG] Received hub invocation: InvocationMessage { InvocationId: "129", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:19 DBG] Received hub invocation: InvocationMessage { InvocationId: "130", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:23 DBG] Received hub invocation: InvocationMessage { InvocationId: "131", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:23 DBG] Received hub invocation: InvocationMessage { InvocationId: "132", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:27 DBG] Received hub invocation: InvocationMessage { InvocationId: "133", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:27 DBG] Received hub invocation: InvocationMessage { InvocationId: "134", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:31 DBG] Received hub invocation: InvocationMessage { InvocationId: "135", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:31 DBG] Received hub invocation: InvocationMessage { InvocationId: "136", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:35 DBG] Received hub invocation: InvocationMessage { InvocationId: "137", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:35 DBG] Received hub invocation: InvocationMessage { InvocationId: "138", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:39 DBG] Received hub invocation: InvocationMessage { InvocationId: "139", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:39 DBG] Received hub invocation: InvocationMessage { InvocationId: "140", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:43 DBG] Received hub invocation: InvocationMessage { InvocationId: "141", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:43 DBG] Received hub invocation: InvocationMessage { InvocationId: "142", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:47 DBG] Received hub invocation: InvocationMessage { InvocationId: "143", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:47 DBG] Received hub invocation: InvocationMessage { InvocationId: "144", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:51 DBG] Received hub invocation: InvocationMessage { InvocationId: "145", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:51 DBG] Received hub invocation: InvocationMessage { InvocationId: "146", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:55 DBG] Received hub invocation: InvocationMessage { InvocationId: "147", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:55 DBG] Received hub invocation: InvocationMessage { InvocationId: "148", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:46:59 DBG] Received hub invocation: InvocationMessage { InvocationId: "149", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:46:59 DBG] Received hub invocation: InvocationMessage { InvocationId: "150", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:03 DBG] Received hub invocation: InvocationMessage { InvocationId: "151", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:03 DBG] Received hub invocation: InvocationMessage { InvocationId: "152", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:07 DBG] Received hub invocation: InvocationMessage { InvocationId: "153", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:07 DBG] Received hub invocation: InvocationMessage { InvocationId: "154", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:11 DBG] Received hub invocation: InvocationMessage { InvocationId: "155", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:11 DBG] Received hub invocation: InvocationMessage { InvocationId: "156", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:15 DBG] Received hub invocation: InvocationMessage { InvocationId: "157", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:15 DBG] Received hub invocation: InvocationMessage { InvocationId: "158", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:19 DBG] Received hub invocation: InvocationMessage { InvocationId: "159", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:19 DBG] Received hub invocation: InvocationMessage { InvocationId: "160", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:23 DBG] Received hub invocation: InvocationMessage { InvocationId: "161", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:23 DBG] Received hub invocation: InvocationMessage { InvocationId: "162", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:27 DBG] Received hub invocation: InvocationMessage { InvocationId: "163", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:27 DBG] Received hub invocation: InvocationMessage { InvocationId: "164", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:31 DBG] Received hub invocation: InvocationMessage { InvocationId: "165", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:31 DBG] Received hub invocation: InvocationMessage { InvocationId: "166", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:35 DBG] Received hub invocation: InvocationMessage { InvocationId: "167", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:35 DBG] Received hub invocation: InvocationMessage { InvocationId: "168", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:39 DBG] Received hub invocation: InvocationMessage { InvocationId: "169", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:39 DBG] Received hub invocation: InvocationMessage { InvocationId: "170", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:43 DBG] Received hub invocation: InvocationMessage { InvocationId: "171", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:43 DBG] Received hub invocation: InvocationMessage { InvocationId: "172", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:47 DBG] Received hub invocation: InvocationMessage { InvocationId: "173", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:47 DBG] Received hub invocation: InvocationMessage { InvocationId: "174", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:51 DBG] Received hub invocation: InvocationMessage { InvocationId: "175", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:47:51 DBG] Received hub invocation: InvocationMessage { InvocationId: "176", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:47:54 INF] Application is shutting down...
[23:47:54 DBG] Hosting stopping
[23:47:54 DBG] Waiting for the application to finish sending data.
[23:47:54 DBG] Waiting for the application to finish sending data.
[23:47:54 DBG] Socket closed.
[23:47:54 DBG] Socket closed.
[23:47:54 DBG] OnConnectedAsync ending.
[23:47:54 DBG] OnConnectedAsync ending.
[23:47:54 DBG] Removing connection hLqWnqgxn7p7_OL7XrsCXQ from the list of connections.
[23:47:54 DBG] Removing connection TKtweGs65o0zB7s8Ek2rHA from the list of connections.
[23:47:54 INF] Executed endpoint '/hubs/chat'
[23:47:54 INF] Executed endpoint '/hubs/chat'
[23:47:54 INF] Response (Duration: 394058ms): API: GET /hubs/chat
StatusCode: 101
[23:47:54 INF] Response (Duration: 347463ms): API: GET /hubs/chat
StatusCode: 101
[23:47:54 INF] HTTP 101 returned for GET /hubs/chat
[23:47:54 INF] HTTP 101 returned for GET /hubs/chat
[23:47:54 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=TKtweGs65o0zB7s8Ek2rHA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjEwNDc5LCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.N6c3fFiiGjKgeVNSLBPhzCNfVc7PLTbUNwmoyKzjyvM - 101 null null 394173.8537ms
[23:47:54 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=hLqWnqgxn7p7_OL7XrsCXQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMDUyNiwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.R6gpj25Cxk3jYRwgYAPaWXB59J9QovH6-yBJQ5-XKiY - 101 null null 347576.7541ms
[23:47:54 DBG] Connection id "0HNCQ32D05FP0" disconnecting.
[23:47:54 DBG] Connection id "0HNCQ32D05FP2" disconnecting.
[23:47:54 DBG] Connection id "0HNCQ32D05FP0" stopped.
[23:47:54 DBG] Connection id "0HNCQ32D05FP2" stopped.
[23:47:54 DBG] Connection id "0HNCQ32D05FP0" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:47:54 DBG] Connection id "0HNCQ32D05FP2" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:47:54 DBG] Hosting stopped
[23:49:59 DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
[23:49:59 DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
[23:49:59 DBG] Hosting starting
[23:49:59 INF] User profile is available. Using 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[23:49:59 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-14a3d168-18db-4f02-bf32-5d12a5c3d5f9.xml'.
[23:49:59 DBG] Reading data from file 'C:\Users\anhan\AppData\Local\ASP.NET\DataProtection-Keys\key-18e390e9-1029-4eaf-a8ee-1e70e5eef3df.xml'.
[23:49:59 DBG] Found key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9}.
[23:49:59 DBG] Found key {18e390e9-1029-4eaf-a8ee-1e70e5eef3df}.
[23:49:59 DBG] Considering key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} with expiration date 2025-06-01 03:53:05Z as default key.
[23:49:59 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[23:49:59 DBG] Decrypting secret element using Windows DPAPI.
[23:49:59 DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
[23:49:59 DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
[23:49:59 DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
[23:49:59 DBG] Using key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} as the default key.
[23:49:59 DBG] Key ring with default key {14a3d168-18db-4f02-bf32-5d12a5c3d5f9} was loaded during application startup.
[23:49:59 INF] Now listening on: http://localhost:5295
[23:49:59 DBG] Loaded hosting startup assembly SMedia
[23:49:59 INF] Application started. Press Ctrl+C to shut down.
[23:49:59 INF] Hosting environment: Development
[23:49:59 INF] Content root path: E:\hcmue_03_hk02\cn_web\BACK_END\BackEnd-SocialMedia\SMedia
[23:49:59 DBG] Hosting started
[23:50:00 DBG] Connection id "0HNCQ37DKFO0S" received FIN.
[23:50:00 DBG] Connection id "0HNCQ37DKFO0S" accepted.
[23:50:00 DBG] Connection id "0HNCQ37DKFO0S" started.
[23:50:00 DBG] Connection id "0HNCQ37DKFO0S" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:50:00 DBG] Connection id "0HNCQ37DKFO0S" disconnecting.
[23:50:00 DBG] Connection id "0HNCQ37DKFO0S" stopped.
[23:50:00 DBG] Connection id "0HNCQ37DKFO0T" accepted.
[23:50:00 DBG] Connection id "0HNCQ37DKFO0T" started.
[23:50:00 INF] Request starting HTTP/1.1 GET http://localhost:5295/swagger/index.html - null null
[23:50:00 DBG] Wildcard detected, all requests with hosts will be allowed.
[23:50:00 DBG] No candidates found for the request path '/swagger/index.html'
[23:50:00 DBG] Request did not match any endpoints
[23:50:00 DBG] Connection id "0HNCQ37DKFO0T" completed keep alive response.
[23:50:00 INF] Request finished HTTP/1.1 GET http://localhost:5295/swagger/index.html - 200 null text/html;charset=utf-8 270.3957ms
[23:50:01 INF] Request starting HTTP/1.1 GET http://localhost:5295/swagger/v1/swagger.json - null null
[23:50:01 DBG] No candidates found for the request path '/swagger/v1/swagger.json'
[23:50:01 DBG] Request did not match any endpoints
[23:50:01 DBG] Connection id "0HNCQ37DKFO0T" completed keep alive response.
[23:50:01 INF] Request finished HTTP/1.1 GET http://localhost:5295/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 236.6566ms
[23:51:20 DBG] Connection id "0HNCQ37DKFO0T" received FIN.
[23:51:20 DBG] Connection id "0HNCQ37DKFO0T" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:51:20 DBG] Connection id "0HNCQ37DKFO0T" disconnecting.
[23:51:20 DBG] Connection id "0HNCQ37DKFO0T" stopped.
[23:51:56 DBG] Connection id "0HNCQ37DKFO0U" accepted.
[23:51:56 DBG] Connection id "0HNCQ37DKFO0U" started.
[23:51:56 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[23:51:56 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:51:56 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:51:56 DBG] The request has an origin header: 'http://localhost:3000'.
[23:51:56 INF] CORS policy execution successful.
[23:51:56 DBG] The request is a preflight request.
[23:51:56 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:51:56 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 51.7734ms
[23:51:56 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 59
[23:51:56 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:51:56 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[23:51:56 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:51:56 DBG] The request has an origin header: 'http://localhost:3000'.
[23:51:56 INF] CORS policy execution successful.
[23:51:56 DBG] Static files was skipped as the request already matched an endpoint.
[23:51:56 INF] HTTP POST /api/Authentication/login received from ::1
[23:51:56 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:51:56 DBG] Header: Connection=["keep-alive"]
[23:51:56 DBG] Header: Host=["localhost:5295"]
[23:51:56 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:51:56 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:51:56 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:51:56 DBG] Header: Content-Type=["application/json"]
[23:51:57 DBG] Header: Origin=["http://localhost:3000"]
[23:51:57 DBG] Header: Referer=["http://localhost:3000/"]
[23:51:57 DBG] Header: Content-Length=["59"]
[23:51:57 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:51:57 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:51:57 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:51:57 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:51:57 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:51:57 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:51:57 DBG] Connection id "0HNCQ37DKFO0U", Request id "0HNCQ37DKFO0U:00000002": started reading request body.
[23:51:57 DBG] Connection id "0HNCQ37DKFO0U", Request id "0HNCQ37DKFO0U:00000002": done reading request body.
[23:51:57 INF] Request Body: {"email":"anh.anhle012345@gmail.com","password":"12345678"}
[23:51:57 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anh.anhle012345@gmail.com",
  "password": "12345678"
}
[23:51:57 DBG] AuthenticationScheme: Bearer was not authenticated.
[23:51:57 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:51:57 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[23:51:57 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:51:57 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:51:57 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:51:57 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:51:57 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[23:51:57 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:51:57 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:51:57 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:51:57 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[23:51:57 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[23:51:57 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[23:51:57 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:51:57 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:51:57 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:51:57 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:51:57 INF] Executing action method SMedia.Controllers.AuthenticationController.Login (SMedia) - Validation state: "Valid"
[23:51:59 INF] Executed DbCommand (91ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[23:52:00 INF] Executed action method SMedia.Controllers.AuthenticationController.Login (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2633.4244ms.
[23:52:00 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:52:00 DBG] No information found on request to perform content negotiation.
[23:52:00 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[23:52:00 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:52:00 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.AuthResponse'.
[23:52:00 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 2873.8813ms
[23:52:00 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:52:00 INF] Response (Duration: 2999ms): API: POST /api/Authentication/login
StatusCode: 200
Body:
{
  "Token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA"
}
[23:52:00 INF] HTTP 200 returned for POST /api/Authentication/login
[23:52:00 DBG] Response Body: {"Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA"}
[23:52:00 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:52:00 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 200 null application/json; charset=utf-8 3199.0274ms
[23:52:00 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[23:52:00 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:52:00 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:52:00 DBG] The request has an origin header: 'http://localhost:3000'.
[23:52:00 INF] CORS policy execution successful.
[23:52:00 DBG] The request is a preflight request.
[23:52:00 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:52:00 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 15.1277ms
[23:52:00 DBG] Connection id "0HNCQ37DKFO0V" accepted.
[23:52:00 DBG] Connection id "0HNCQ37DKFO0V" started.
[23:52:00 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[23:52:00 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:52:00 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:52:00 DBG] The request has an origin header: 'http://localhost:3000'.
[23:52:00 INF] CORS policy execution successful.
[23:52:00 DBG] Static files was skipped as the request already matched an endpoint.
[23:52:00 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[23:52:00 DBG] Header: Accept=["*/*"]
[23:52:00 DBG] Header: Connection=["keep-alive"]
[23:52:00 DBG] Header: Host=["localhost:5295"]
[23:52:00 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:52:00 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:52:00 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:52:00 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA"]
[23:52:00 DBG] Header: Cache-Control=["max-age=0"]
[23:52:00 DBG] Header: Origin=["http://localhost:3000"]
[23:52:00 DBG] Header: Referer=["http://localhost:3000/"]
[23:52:00 DBG] Header: Content-Length=["0"]
[23:52:00 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:52:00 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[23:52:00 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:52:00 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:52:00 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[23:52:00 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:52:00 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:52:00 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:52:00 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA
Query Parameters:
  negotiateVersion: 1
[23:52:00 DBG] Successfully validated the token.
[23:52:00 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:52:00 DBG] Authorization was successful.
[23:52:00 INF] Executing endpoint '/hubs/chat/negotiate'
[23:52:00 DBG] New connection BzemvmsKYhkVsy52J00KwQ created.
[23:52:00 DBG] Sending negotiation response.
[23:52:00 INF] Executed endpoint '/hubs/chat/negotiate'
[23:52:00 INF] Response (Duration: 76ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "BzemvmsKYhkVsy52J00KwQ",
  "connectionToken": "sjPtgrdbOSl_gsFoo8MRtA",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[23:52:00 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[23:52:00 DBG] Response Body: {"negotiateVersion":1,"connectionId":"BzemvmsKYhkVsy52J00KwQ","connectionToken":"sjPtgrdbOSl_gsFoo8MRtA","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[23:52:00 DBG] Connection id "0HNCQ37DKFO0V" completed keep alive response.
[23:52:00 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 121.5761ms
[23:52:00 DBG] Connection id "0HNCQ37DKFO10" accepted.
[23:52:00 DBG] Connection id "0HNCQ37DKFO10" started.
[23:52:00 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=sjPtgrdbOSl_gsFoo8MRtA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA - null null
[23:52:00 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[23:52:00 DBG] Request matched endpoint '/hubs/chat'
[23:52:00 DBG] The request has an origin header: 'http://localhost:3000'.
[23:52:00 INF] CORS policy execution successful.
[23:52:00 DBG] Static files was skipped as the request already matched an endpoint.
[23:52:00 INF] HTTP GET /hubs/chat?id=sjPtgrdbOSl_gsFoo8MRtA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA received from ::1
[23:52:00 DBG] Header: Connection=["Upgrade"]
[23:52:00 DBG] Header: Host=["localhost:5295"]
[23:52:00 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:52:00 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:52:00 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:52:00 DBG] Header: Cache-Control=["no-cache"]
[23:52:00 DBG] Header: Origin=["http://localhost:3000"]
[23:52:00 DBG] Header: Pragma=["no-cache"]
[23:52:00 DBG] Header: Upgrade=["websocket"]
[23:52:00 DBG] Header: Sec-WebSocket-Version=["13"]
[23:52:00 DBG] Header: Sec-WebSocket-Key=["NMUvV8oYuxgRW/ZmvRVxzw=="]
[23:52:00 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[23:52:00 INF] Request: URL: http://localhost:5295/hubs/chat?id=sjPtgrdbOSl_gsFoo8MRtA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA
Authenticated: Yes
Query Parameters:
  id: sjPtgrdbOSl_gsFoo8MRtA
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA
[23:52:00 DBG] Successfully validated the token.
[23:52:00 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:52:00 DBG] Authorization was successful.
[23:52:00 INF] Executing endpoint '/hubs/chat'
[23:52:00 DBG] Establishing new connection.
[23:52:00 DBG] OnConnectedAsync started.
[23:52:00 DBG] Socket opened using Sub-Protocol: 'null'.
[23:52:00 DBG] Found protocol implementation for requested protocol: json.
[23:52:00 DBG] Completed connection handshake. Using HubProtocol 'json'.
[23:52:15 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[23:52:15 DBG] Connection id "0HNCQ37DKFO11" accepted.
[23:52:15 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:52:15 DBG] Connection id "0HNCQ37DKFO11" started.
[23:52:15 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:52:15 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[23:52:15 DBG] The request has an origin header: 'http://localhost:3000'.
[23:52:16 INF] CORS policy execution successful.
[23:52:16 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:52:16 DBG] The request is a preflight request.
[23:52:16 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:52:16 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:52:16 DBG] The request has an origin header: 'http://localhost:3000'.
[23:52:16 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 27.6591ms
[23:52:16 INF] CORS policy execution successful.
[23:52:16 DBG] The request is a preflight request.
[23:52:16 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:52:16 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 204 null null 29.6002ms
[23:52:16 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[23:52:16 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:52:16 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:52:16 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:52:16 DBG] The request has an origin header: 'http://localhost:3000'.
[23:52:16 INF] CORS policy execution successful.
[23:52:16 DBG] Static files was skipped as the request already matched an endpoint.
[23:52:16 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[23:52:16 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:52:16 DBG] Header: Connection=["keep-alive"]
[23:52:16 DBG] Header: Host=["localhost:5295"]
[23:52:16 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:52:16 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:52:16 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:52:16 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA"]
[23:52:16 DBG] Header: Origin=["http://localhost:3000"]
[23:52:16 DBG] Header: Referer=["http://localhost:3000/"]
[23:52:16 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:52:16 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:52:16 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:52:16 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:52:16 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:52:16 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:52:16 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[23:52:16 DBG] Successfully validated the token.
[23:52:16 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:52:16 DBG] Authorization was successful.
[23:52:16 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:52:16 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[23:52:16 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:52:16 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:52:16 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:52:16 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:52:16 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:52:16 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:52:16 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:52:16 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[23:52:16 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[23:52:16 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:52:16 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:52:16 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[23:52:16 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[23:52:16 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[23:52:16 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[23:52:16 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:52:16 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:52:16 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[23:52:16 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[23:52:16 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[23:52:16 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[23:52:16 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:52:16 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:52:16 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[23:52:16 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[23:52:16 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[23:52:16 INF] Executed DbCommand (650ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[23:52:17 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 949.4608ms.
[23:52:17 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:52:17 DBG] No information found on request to perform content negotiation.
[23:52:17 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[23:52:17 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[23:52:17 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:52:17 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[23:52:17 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 1031.9588ms
[23:52:17 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:52:17 INF] Response (Duration: 1064ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "da8a6fc1-6098-43e9-9860-4603b5e49ef4",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "h\u1ECFi n\u00E8",
      "SentAt": "2025-05-23T16:42:54.2883183",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fb1539bd-a4ca-43b6-8b52-61c93e8d4196",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "h\u1ECFi n\u00E8",
      "SentAt": "2025-05-23T16:42:29.0977041",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "96334ad5-9f39-4be8-9e06-0835033617dd",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:47.2499887",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6cca47b1-7a49-45bc-80df-15637582dc8f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:46.6100241",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6449b592-d74b-46b4-8aec-158e6258020c",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:25.1446238",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fbcef994-c640-4c95-883d-3734389c1af6",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:23.8157184",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 19,
  "Page": 1,
  "PageSize": 20
}
[23:52:17 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[23:52:17 DBG] Response Body: {"Messages":[{"MessageId":"da8a6fc1-6098-43e9-9860-4603b5e49ef4","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"hỏi nè","SentAt":"2025-05-23T16:42:54.2883183","IsRead":false,"Media":[]},{"MessageId":"fb1539bd-a4ca-43b6-8b52-61c93e8d4196","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"hỏi nè","SentAt":"2025-05-23T16:42:29.0977041","IsRead":false,"Media":[]},{"MessageId":"96334ad5-9f39-4be8-9e06-0835033617dd","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:47.2499887","IsRead":false,"Media":[]},{"MessageId":"6cca47b1-7a49-45bc-80df-15637582dc8f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:46.6100241","IsRead":false,"Media":[]},{"MessageId":"6449b592-d74b-46b4-8aec-158e6258020c","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:25.1446238","IsRead":false,"Media":[]},{"MessageId":"fbcef994-c640-4c95-883d-3734389c1af6","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:23.8157184","IsRead":false,"Media":[]},{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":19,"Page":1,"PageSize":20}
[23:52:17 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:52:17 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - null null
[23:52:17 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 1133.5385ms
[23:52:17 DBG] 1 candidate(s) found for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:52:17 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2'
[23:52:17 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:52:17 DBG] The request has an origin header: 'http://localhost:3000'.
[23:52:17 INF] CORS policy execution successful.
[23:52:17 DBG] Static files was skipped as the request already matched an endpoint.
[23:52:17 INF] HTTP GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 received from ::1
[23:52:17 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:52:17 DBG] Header: Connection=["keep-alive"]
[23:52:17 DBG] Header: Host=["localhost:5295"]
[23:52:17 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:52:17 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:52:17 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:52:17 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA"]
[23:52:17 DBG] Header: Origin=["http://localhost:3000"]
[23:52:17 DBG] Header: Referer=["http://localhost:3000/"]
[23:52:17 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:52:17 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:52:17 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:52:17 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:52:17 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:52:17 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:52:17 INF] Request: URL: http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
Query Parameters:
  page: 1
  pageSize: 20
[23:52:17 DBG] Successfully validated the token.
[23:52:17 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:52:17 DBG] Authorization was successful.
[23:52:17 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:52:17 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[23:52:17 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:52:17 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:52:17 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:52:17 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:52:17 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:52:17 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:52:17 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:52:17 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[23:52:17 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[23:52:17 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:52:17 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:52:17 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[23:52:17 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[23:52:17 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[23:52:17 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[23:52:17 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:52:17 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:52:17 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[23:52:17 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[23:52:17 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[23:52:17 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[23:52:17 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:52:17 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:52:17 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[23:52:17 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[23:52:17 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[23:52:17 INF] Executed DbCommand (564ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[23:52:17 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 660.8932ms.
[23:52:17 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:52:17 DBG] No information found on request to perform content negotiation.
[23:52:17 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[23:52:17 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[23:52:17 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:52:17 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[23:52:17 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 711.6105ms
[23:52:17 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:52:17 INF] Response (Duration: 728ms): API: GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "da8a6fc1-6098-43e9-9860-4603b5e49ef4",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "h\u1ECFi n\u00E8",
      "SentAt": "2025-05-23T16:42:54.2883183",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fb1539bd-a4ca-43b6-8b52-61c93e8d4196",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "h\u1ECFi n\u00E8",
      "SentAt": "2025-05-23T16:42:29.0977041",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "96334ad5-9f39-4be8-9e06-0835033617dd",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:47.2499887",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6cca47b1-7a49-45bc-80df-15637582dc8f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:46.6100241",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6449b592-d74b-46b4-8aec-158e6258020c",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:25.1446238",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fbcef994-c640-4c95-883d-3734389c1af6",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:23.8157184",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "b64bcea1-81ba-4122-af38-ed2564189213",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "xin ch\u00E0o",
      "SentAt": "2025-05-23T14:38:02.9193096",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 19,
  "Page": 1,
  "PageSize": 20
}
[23:52:17 INF] HTTP 200 returned for GET /api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2
[23:52:17 DBG] Response Body: {"Messages":[{"MessageId":"da8a6fc1-6098-43e9-9860-4603b5e49ef4","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"hỏi nè","SentAt":"2025-05-23T16:42:54.2883183","IsRead":false,"Media":[]},{"MessageId":"fb1539bd-a4ca-43b6-8b52-61c93e8d4196","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"hỏi nè","SentAt":"2025-05-23T16:42:29.0977041","IsRead":false,"Media":[]},{"MessageId":"96334ad5-9f39-4be8-9e06-0835033617dd","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:47.2499887","IsRead":false,"Media":[]},{"MessageId":"6cca47b1-7a49-45bc-80df-15637582dc8f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:46.6100241","IsRead":false,"Media":[]},{"MessageId":"6449b592-d74b-46b4-8aec-158e6258020c","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:25.1446238","IsRead":false,"Media":[]},{"MessageId":"fbcef994-c640-4c95-883d-3734389c1af6","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:23.8157184","IsRead":false,"Media":[]},{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]},{"MessageId":"b64bcea1-81ba-4122-af38-ed2564189213","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"xin chào","SentAt":"2025-05-23T14:38:02.9193096","IsRead":false,"Media":[]}],"TotalCount":19,"Page":1,"PageSize":20}
[23:52:17 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:52:17 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/e60a6ec4-2820-4aec-933d-d763d81b7cb2?page=1&pageSize=20 - 200 null application/json; charset=utf-8 785.4309ms
[23:52:24 DBG] Received hub invocation: InvocationMessage { InvocationId: "0", Target: "SendTyping", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, True ], StreamIds: [  ] }.
[23:52:25 DBG] Received hub invocation: InvocationMessage { InvocationId: "1", Target: "SendTyping", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, False ], StreamIds: [  ] }.
[23:52:25 DBG] Received hub invocation: InvocationMessage { InvocationId: "2", Target: "SendTyping", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, True ], StreamIds: [  ] }.
[23:52:27 DBG] Received hub invocation: InvocationMessage { InvocationId: "3", Target: "SendTyping", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, False ], StreamIds: [  ] }.
[23:52:27 DBG] Received hub invocation: InvocationMessage { InvocationId: "4", Target: "SendTyping", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, True ], StreamIds: [  ] }.
[23:52:28 DBG] Received hub invocation: InvocationMessage { InvocationId: "5", Target: "SendTyping", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, False ], StreamIds: [  ] }.
[23:52:29 DBG] Received hub invocation: InvocationMessage { InvocationId: "6", Target: "SendTyping", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, True ], StreamIds: [  ] }.
[23:52:30 DBG] Received hub invocation: InvocationMessage { InvocationId: "7", Target: "SendTyping", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, False ], StreamIds: [  ] }.
[23:52:30 DBG] Received hub invocation: InvocationMessage { InvocationId: "8", Target: "SendTyping", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, True ], StreamIds: [  ] }.
[23:52:33 DBG] Received hub invocation: InvocationMessage { InvocationId: "9", Target: "SendMessageToUser", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, đi ngủ chưa ], StreamIds: [  ] }.
[23:52:33 INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[23:52:33 INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[23:52:33 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C4%91i+ng%E1%BB%A7+ch%C6%B0a - null null
[23:52:33 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[23:52:33 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:52:33 DBG] The request has an origin header: 'http://localhost:3000'.
[23:52:33 INF] CORS policy execution successful.
[23:52:33 DBG] The request is a preflight request.
[23:52:33 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:52:33 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C4%91i+ng%E1%BB%A7+ch%C6%B0a - 204 null null 14.5954ms
[23:52:34 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C4%91i+ng%E1%BB%A7+ch%C6%B0a - application/x-www-form-urlencoded 0
[23:52:34 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[23:52:34 DBG] Endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)' with route pattern 'api/messages/send-message' is valid for the request path '/api/messages/send-message'
[23:52:34 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:52:34 DBG] The request has an origin header: 'http://localhost:3000'.
[23:52:34 INF] CORS policy execution successful.
[23:52:34 DBG] Static files was skipped as the request already matched an endpoint.
[23:52:34 INF] HTTP POST /api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C4%91i+ng%E1%BB%A7+ch%C6%B0a received from ::1
[23:52:34 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:52:34 DBG] Header: Connection=["keep-alive"]
[23:52:34 DBG] Header: Host=["localhost:5295"]
[23:52:34 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:52:34 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:52:34 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:52:34 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA"]
[23:52:34 DBG] Header: Content-Type=["application/x-www-form-urlencoded"]
[23:52:34 DBG] Header: Origin=["http://localhost:3000"]
[23:52:34 DBG] Header: Referer=["http://localhost:3000/"]
[23:52:34 DBG] Header: Content-Length=["0"]
[23:52:34 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:52:34 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:52:34 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:52:34 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:52:34 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:52:34 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:52:34 INF] Request: URL: http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C4%91i+ng%E1%BB%A7+ch%C6%B0a
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA
Path Parameters:
  action: SendMessage
  controller: Message
Query Parameters:
  senderId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
  receiverId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
  content: đi ngủ chưa
[23:52:34 DBG] Successfully validated the token.
[23:52:34 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:52:34 DBG] Authorization was successful.
[23:52:34 INF] Executing endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:52:34 INF] Route matched with {action = "SendMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.MessageDto]] SendMessage(System.Guid, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.Collections.Generic.List`1[System.String]) on controller SMedia.Controllers.MessageController (SMedia).
[23:52:34 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:52:34 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:52:34 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:52:34 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:52:34 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:52:34 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:52:34 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:52:34 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' ...
[23:52:34 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' using the name 'senderId' in request data ...
[23:52:34 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[23:52:34 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[23:52:34 DBG] Attempting to validate the bound parameter 'senderId' of type 'System.Guid' ...
[23:52:34 DBG] Done attempting to validate the bound parameter 'senderId' of type 'System.Guid'.
[23:52:34 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[23:52:34 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' using the name 'receiverId' in request data ...
[23:52:34 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:52:34 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:52:34 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[23:52:34 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:52:34 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[23:52:34 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' using the name '' in request data ...
[23:52:34 DBG] Could not find a value in the request with name '' for binding parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:52:34 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:52:34 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:52:34 DBG] Attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[23:52:34 DBG] Done attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:52:34 DBG] Attempting to bind parameter 'content' of type 'System.String' ...
[23:52:34 DBG] Attempting to bind parameter 'content' of type 'System.String' using the name 'content' in request data ...
[23:52:34 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[23:52:34 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[23:52:34 DBG] Attempting to validate the bound parameter 'content' of type 'System.String' ...
[23:52:34 DBG] Done attempting to validate the bound parameter 'content' of type 'System.String'.
[23:52:34 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[23:52:34 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' using the name '' in request data ...
[23:52:34 DBG] Could not bind to collection using a format like =value1&=value2
[23:52:34 DBG] Attempting to bind model using indices. Example formats include: [0]=value1&[1]=value2, [0]=value1&[1]=value2, .index=zero&.index=one&[zero]=value1&[one]=value2
[23:52:34 DBG] Attempting to bind model of type 'System.String' using the name '[0]' in request data ...
[23:52:34 DBG] Could not find a value in the request with name '[0]' of type 'System.String'.
[23:52:34 DBG] Done attempting to bind model of type 'System.String' using the name '[0]'.
[23:52:34 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:52:34 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:52:34 DBG] Attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[23:52:34 DBG] Done attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:52:34 INF] Executing action method SMedia.Controllers.MessageController.SendMessage (SMedia) - Validation state: "Valid"
[23:52:34 INF] Executed DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[23:52:34 INF] Executed DbCommand (44ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[23:52:34 INF] Executed action method SMedia.Controllers.MessageController.SendMessage (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 126.19ms.
[23:52:34 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:52:34 DBG] No information found on request to perform content negotiation.
[23:52:34 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[23:52:34 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[23:52:34 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:52:34 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.MessageDto'.
[23:52:34 INF] Executed action SMedia.Controllers.MessageController.SendMessage (SMedia) in 267.9779ms
[23:52:34 INF] Executed endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:52:34 INF] Response (Duration: 301ms): API: POST /api/messages/send-message
StatusCode: 200
Body:
{
  "MessageId": "fe0c9c4c-435f-4f9f-a3bf-68ed0b8edc03",
  "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
  "SenderUsername": null,
  "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
  "GroupChatId": null,
  "Content": "\u0111i ng\u1EE7 ch\u01B0a",
  "SentAt": "2025-05-23T16:52:34.1369741Z",
  "IsRead": false,
  "Media": []
}
[23:52:34 INF] HTTP 200 returned for POST /api/messages/send-message
[23:52:34 DBG] Response Body: {"MessageId":"fe0c9c4c-435f-4f9f-a3bf-68ed0b8edc03","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":null,"ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"đi ngủ chưa","SentAt":"2025-05-23T16:52:34.1369741Z","IsRead":false,"Media":[]}
[23:52:34 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:52:34 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&receiverId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&content=%C4%91i+ng%E1%BB%A7+ch%C6%B0a - 200 null application/json; charset=utf-8 373.2372ms
[23:52:34 DBG] Received hub invocation: InvocationMessage { InvocationId: "10", Target: "SendTyping", Arguments: [ e60a6ec4-2820-4aec-933d-d763d81b7cb2, False ], StreamIds: [  ] }.
[23:53:02 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - null null
[23:53:02 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:53:02 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:53:02 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:02 INF] CORS policy execution successful.
[23:53:02 DBG] The request is a preflight request.
[23:53:02 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:53:02 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/Authentication/login - 204 null null 33.2868ms
[23:53:02 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/Authentication/login - application/json 57
[23:53:02 DBG] 1 candidate(s) found for the request path '/api/Authentication/login'
[23:53:02 DBG] Endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)' with route pattern 'api/Authentication/login' is valid for the request path '/api/Authentication/login'
[23:53:02 DBG] Request matched endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:53:02 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:02 INF] CORS policy execution successful.
[23:53:02 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:02 INF] HTTP POST /api/Authentication/login received from ::1
[23:53:02 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:53:02 DBG] Header: Connection=["keep-alive"]
[23:53:02 DBG] Header: Host=["localhost:5295"]
[23:53:02 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:02 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:02 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:02 DBG] Header: Content-Type=["application/json"]
[23:53:02 DBG] Header: Origin=["http://localhost:3000"]
[23:53:02 DBG] Header: Referer=["http://localhost:3000/"]
[23:53:02 DBG] Header: Content-Length=["57"]
[23:53:02 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:53:02 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:53:02 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:53:02 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:53:02 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:53:02 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:53:02 DBG] Connection id "0HNCQ37DKFO11", Request id "0HNCQ37DKFO11:00000006": started reading request body.
[23:53:02 DBG] Connection id "0HNCQ37DKFO11", Request id "0HNCQ37DKFO11:00000006": done reading request body.
[23:53:02 INF] Request Body: {"email":"anhlehongwork@gmail.com","password":"12345678"}
[23:53:02 INF] Request: URL: http://localhost:5295/api/Authentication/login
Authenticated: Yes
Path Parameters:
  action: Login
  controller: Authentication
Body:
{
  "email": "anhlehongwork@gmail.com",
  "password": "12345678"
}
[23:53:02 DBG] AuthenticationScheme: Bearer was not authenticated.
[23:53:02 INF] Executing endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:53:02 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.AuthResponse]] Login(Application.DTOs.LoginDto) on controller SMedia.Controllers.AuthenticationController (SMedia).
[23:53:02 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:53:02 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:53:02 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:53:02 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:53:02 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
[23:53:02 DBG] Executing controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:53:02 DBG] Executed controller factory for controller SMedia.Controllers.AuthenticationController (SMedia)
[23:53:02 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:53:02 DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto' using the name '' in request data ...
[23:53:02 DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
[23:53:02 DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.LoginDto'
[23:53:02 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:53:02 DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:53:02 DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto' ...
[23:53:02 DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.LoginDto'.
[23:53:02 INF] Executing action method SMedia.Controllers.AuthenticationController.Login (SMedia) - Validation state: "Valid"
[23:53:02 INF] Executed DbCommand (35ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
[23:53:03 INF] Executed action method SMedia.Controllers.AuthenticationController.Login (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 323.9094ms.
[23:53:03 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:53:03 DBG] No information found on request to perform content negotiation.
[23:53:03 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
[23:53:03 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:53:03 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.AuthResponse'.
[23:53:03 INF] Executed action SMedia.Controllers.AuthenticationController.Login (SMedia) in 356.4414ms
[23:53:03 INF] Executed endpoint 'SMedia.Controllers.AuthenticationController.Login (SMedia)'
[23:53:03 INF] Response (Duration: 371ms): API: POST /api/Authentication/login
StatusCode: 200
Body:
{
  "Token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI"
}
[23:53:03 INF] HTTP 200 returned for POST /api/Authentication/login
[23:53:03 DBG] Response Body: {"Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI"}
[23:53:03 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:53:03 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/Authentication/login - 200 null application/json; charset=utf-8 415.2478ms
[23:53:03 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[23:53:03 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:53:03 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:53:03 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:03 INF] CORS policy execution successful.
[23:53:03 DBG] The request is a preflight request.
[23:53:03 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:53:03 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 9.1427ms
[23:53:03 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[23:53:03 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:53:03 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:53:03 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:03 INF] CORS policy execution successful.
[23:53:03 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:03 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[23:53:03 DBG] Header: Accept=["*/*"]
[23:53:03 DBG] Header: Connection=["keep-alive"]
[23:53:03 DBG] Header: Host=["localhost:5295"]
[23:53:03 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:03 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:03 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:03 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI"]
[23:53:03 DBG] Header: Cache-Control=["max-age=0"]
[23:53:03 DBG] Header: Origin=["http://localhost:3000"]
[23:53:03 DBG] Header: Referer=["http://localhost:3000/"]
[23:53:03 DBG] Header: Content-Length=["0"]
[23:53:03 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:53:03 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[23:53:03 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:53:03 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:53:03 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[23:53:03 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:53:03 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:53:03 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:53:03 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
Query Parameters:
  negotiateVersion: 1
[23:53:03 DBG] Successfully validated the token.
[23:53:03 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:53:03 DBG] Authorization was successful.
[23:53:03 INF] Executing endpoint '/hubs/chat/negotiate'
[23:53:03 DBG] New connection va7bHClQZ54jynovlfxPXQ created.
[23:53:03 DBG] Sending negotiation response.
[23:53:03 INF] Executed endpoint '/hubs/chat/negotiate'
[23:53:03 INF] Response (Duration: 8ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "va7bHClQZ54jynovlfxPXQ",
  "connectionToken": "f9ucBJr3GwFnfOP2naAHvQ",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[23:53:03 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[23:53:03 DBG] Response Body: {"negotiateVersion":1,"connectionId":"va7bHClQZ54jynovlfxPXQ","connectionToken":"f9ucBJr3GwFnfOP2naAHvQ","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[23:53:03 DBG] Connection id "0HNCQ37DKFO0V" completed keep alive response.
[23:53:03 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 50.6402ms
[23:53:03 DBG] Connection id "0HNCQ37DKFO12" accepted.
[23:53:03 DBG] Connection id "0HNCQ37DKFO12" started.
[23:53:03 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=f9ucBJr3GwFnfOP2naAHvQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI - null null
[23:53:03 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[23:53:03 DBG] Request matched endpoint '/hubs/chat'
[23:53:03 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:03 INF] CORS policy execution successful.
[23:53:03 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:03 INF] HTTP GET /hubs/chat?id=f9ucBJr3GwFnfOP2naAHvQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI received from ::1
[23:53:03 DBG] Header: Connection=["Upgrade"]
[23:53:03 DBG] Header: Host=["localhost:5295"]
[23:53:03 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:03 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:03 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:03 DBG] Header: Cache-Control=["no-cache"]
[23:53:03 DBG] Header: Origin=["http://localhost:3000"]
[23:53:03 DBG] Header: Pragma=["no-cache"]
[23:53:03 DBG] Header: Upgrade=["websocket"]
[23:53:03 DBG] Header: Sec-WebSocket-Version=["13"]
[23:53:03 DBG] Header: Sec-WebSocket-Key=["MdHae27j5vwca57QkK+K9g=="]
[23:53:03 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[23:53:03 INF] Request: URL: http://localhost:5295/hubs/chat?id=f9ucBJr3GwFnfOP2naAHvQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
Authenticated: Yes
Query Parameters:
  id: f9ucBJr3GwFnfOP2naAHvQ
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
[23:53:03 DBG] Successfully validated the token.
[23:53:03 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:53:03 DBG] Authorization was successful.
[23:53:03 INF] Executing endpoint '/hubs/chat'
[23:53:03 DBG] Establishing new connection.
[23:53:03 DBG] OnConnectedAsync started.
[23:53:03 DBG] Socket opened using Sub-Protocol: 'null'.
[23:53:03 DBG] Found protocol implementation for requested protocol: json.
[23:53:03 DBG] Completed connection handshake. Using HubProtocol 'json'.
[23:53:10 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20 - null null
[23:53:10 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20 - null null
[23:53:10 DBG] 1 candidate(s) found for the request path '/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE'
[23:53:10 DBG] 1 candidate(s) found for the request path '/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE'
[23:53:10 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:53:10 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:53:10 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:10 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:10 INF] CORS policy execution successful.
[23:53:10 INF] CORS policy execution successful.
[23:53:10 DBG] The request is a preflight request.
[23:53:10 DBG] The request is a preflight request.
[23:53:10 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:53:10 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:53:10 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20 - 204 null null 26.4484ms
[23:53:10 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20 - 204 null null 30.4863ms
[23:53:10 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20 - null null
[23:53:10 DBG] 1 candidate(s) found for the request path '/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE'
[23:53:10 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE'
[23:53:10 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:10 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:10 INF] CORS policy execution successful.
[23:53:10 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:10 INF] HTTP GET /api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20 received from ::1
[23:53:10 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:53:10 DBG] Header: Connection=["keep-alive"]
[23:53:10 DBG] Header: Host=["localhost:5295"]
[23:53:10 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:10 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:10 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:10 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI"]
[23:53:10 DBG] Header: Origin=["http://localhost:3000"]
[23:53:10 DBG] Header: Referer=["http://localhost:3000/"]
[23:53:10 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:53:10 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:53:10 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:53:10 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:53:10 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:53:10 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:53:10 INF] Request: URL: http://localhost:5295/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE
Query Parameters:
  page: 1
  pageSize: 20
[23:53:10 DBG] Successfully validated the token.
[23:53:10 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:53:10 DBG] Authorization was successful.
[23:53:10 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:10 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[23:53:10 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:53:10 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:53:10 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:53:10 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:53:10 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:53:10 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:53:10 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:53:10 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[23:53:10 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[23:53:10 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:53:10 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:53:10 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[23:53:10 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[23:53:10 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[23:53:10 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[23:53:10 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:53:10 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:53:10 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[23:53:10 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[23:53:10 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[23:53:10 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[23:53:10 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:53:10 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:53:10 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[23:53:10 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[23:53:10 DBG] The request has model state errors, returning an error response.
[23:53:10 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:53:10 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:53:10 DBG] No information found on request to perform content negotiation.
[23:53:10 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:53:10 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:53:10 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:53:10 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 51.3195ms
[23:53:10 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:10 INF] Response (Duration: 69ms): API: GET /api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"receiverId":["The value 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE' is not valid."]},"traceId":"00-d1646a9b9738278bc34313c7faeacaf3-4d04041f3b8627ef-00"}
[23:53:10 INF] HTTP 400 returned for GET /api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE
[23:53:10 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"receiverId":["The value 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE' is not valid."]},"traceId":"00-d1646a9b9738278bc34313c7faeacaf3-4d04041f3b8627ef-00"}
[23:53:10 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:53:10 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20 - null null
[23:53:10 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20 - 400 null application/problem+json; charset=utf-8 124.1011ms
[23:53:10 DBG] 1 candidate(s) found for the request path '/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE'
[23:53:10 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE'
[23:53:10 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:10 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:10 INF] CORS policy execution successful.
[23:53:10 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:10 INF] HTTP GET /api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20 received from ::1
[23:53:10 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:53:10 DBG] Header: Connection=["keep-alive"]
[23:53:10 DBG] Header: Host=["localhost:5295"]
[23:53:10 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:10 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:10 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:10 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI"]
[23:53:10 DBG] Header: Origin=["http://localhost:3000"]
[23:53:10 DBG] Header: Referer=["http://localhost:3000/"]
[23:53:10 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:53:10 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:53:10 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:53:10 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:53:10 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:53:10 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:53:10 INF] Request: URL: http://localhost:5295/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE
Query Parameters:
  page: 1
  pageSize: 20
[23:53:10 DBG] Successfully validated the token.
[23:53:10 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:53:10 DBG] Authorization was successful.
[23:53:10 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:10 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[23:53:10 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:53:10 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:53:10 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:53:10 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:53:10 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:53:10 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:53:10 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:53:10 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[23:53:10 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[23:53:10 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:53:10 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:53:10 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[23:53:10 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[23:53:10 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[23:53:10 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[23:53:10 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:53:10 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:53:10 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[23:53:10 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[23:53:10 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[23:53:10 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[23:53:10 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:53:10 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:53:10 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[23:53:10 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[23:53:10 DBG] The request has model state errors, returning an error response.
[23:53:10 DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
[23:53:10 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:53:10 DBG] No information found on request to perform content negotiation.
[23:53:10 DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
[23:53:10 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
[23:53:10 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[23:53:10 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 33.1796ms
[23:53:10 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:10 INF] Response (Duration: 49ms): API: GET /api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE
StatusCode: 400
Body:
{"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"receiverId":["The value 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE' is not valid."]},"traceId":"00-d8e6f39a4d71e915f2bd5d831114ffbd-28786357e7aa18cd-00"}
[23:53:10 INF] HTTP 400 returned for GET /api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE
[23:53:10 DBG] Response Body: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"receiverId":["The value 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE' is not valid."]},"traceId":"00-d8e6f39a4d71e915f2bd5d831114ffbd-28786357e7aa18cd-00"}
[23:53:10 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:53:10 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDU4ODMyNCwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.mTfyxgJRPAMJIUKt7p8Mp-H0paQSWILVBawApKKzFeE?page=1&pageSize=20 - 400 null application/problem+json; charset=utf-8 93.1185ms
[23:53:12 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[23:53:12 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null null
[23:53:12 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:53:12 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:53:12 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:53:12 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:53:12 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:12 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:12 INF] CORS policy execution successful.
[23:53:12 INF] CORS policy execution successful.
[23:53:12 DBG] The request is a preflight request.
[23:53:12 DBG] The request is a preflight request.
[23:53:12 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:53:12 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:53:12 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 31.5422ms
[23:53:12 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[23:53:12 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 204 null null 34.7289ms
[23:53:12 DBG] Connection id "0HNCQ37DKFO13" accepted.
[23:53:12 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:53:12 DBG] Connection id "0HNCQ37DKFO13" started.
[23:53:12 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:53:12 INF] Request starting HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - null 0
[23:53:12 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:12 DBG] 1 candidate(s) found for the request path '/hubs/chat/negotiate'
[23:53:12 INF] CORS policy execution successful.
[23:53:12 DBG] Request matched endpoint '/hubs/chat/negotiate'
[23:53:12 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:12 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:12 INF] CORS policy execution successful.
[23:53:12 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[23:53:12 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:12 DBG] Header: Accept=["*/*"]
[23:53:12 INF] HTTP POST /hubs/chat/negotiate?negotiateVersion=1 received from ::1
[23:53:12 DBG] Header: Connection=["keep-alive"]
[23:53:12 DBG] Header: Accept=["*/*"]
[23:53:12 DBG] Header: Host=["localhost:5295"]
[23:53:12 DBG] Header: Connection=["keep-alive"]
[23:53:12 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:12 DBG] Header: Host=["localhost:5295"]
[23:53:12 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:12 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:12 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:12 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI"]
[23:53:12 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:12 DBG] Header: Cache-Control=["max-age=0"]
[23:53:12 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:12 DBG] Header: Origin=["http://localhost:3000"]
[23:53:12 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI"]
[23:53:12 DBG] Header: Referer=["http://localhost:3000/"]
[23:53:12 DBG] Header: Cache-Control=["max-age=0"]
[23:53:12 DBG] Header: Content-Length=["0"]
[23:53:12 DBG] Header: Origin=["http://localhost:3000"]
[23:53:12 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:53:12 DBG] Header: Referer=["http://localhost:3000/"]
[23:53:12 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[23:53:12 DBG] Header: Content-Length=["0"]
[23:53:12 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:53:12 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:53:12 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:53:12 DBG] Header: X-Requested-With=["XMLHttpRequest"]
[23:53:12 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[23:53:12 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:53:12 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:53:12 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:53:12 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:53:12 DBG] Header: X-SignalR-User-Agent=["Microsoft SignalR/8.0 (8.0.7; Unknown OS; Browser; Unknown Runtime Version)"]
[23:53:12 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:53:12 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:53:12 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:53:12 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:53:12 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
Query Parameters:
  negotiateVersion: 1
[23:53:12 INF] Request: URL: http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
Query Parameters:
  negotiateVersion: 1
[23:53:12 DBG] Successfully validated the token.
[23:53:12 DBG] Successfully validated the token.
[23:53:12 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:53:12 DBG] Authorization was successful.
[23:53:12 INF] Executing endpoint '/hubs/chat/negotiate'
[23:53:12 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:53:12 DBG] New connection Zki_S4jcLi3kE8xYUzgn1A created.
[23:53:12 DBG] Authorization was successful.
[23:53:12 DBG] Sending negotiation response.
[23:53:12 INF] Executing endpoint '/hubs/chat/negotiate'
[23:53:12 INF] Executed endpoint '/hubs/chat/negotiate'
[23:53:12 DBG] New connection DQC92Z_ELYz0vs41ln6sIg created.
[23:53:12 INF] Response (Duration: 14ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "Zki_S4jcLi3kE8xYUzgn1A",
  "connectionToken": "q6Ov1nvoK9Lj1RPWmwiSIg",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[23:53:12 DBG] Sending negotiation response.
[23:53:12 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[23:53:12 INF] Executed endpoint '/hubs/chat/negotiate'
[23:53:12 DBG] Response Body: {"negotiateVersion":1,"connectionId":"Zki_S4jcLi3kE8xYUzgn1A","connectionToken":"q6Ov1nvoK9Lj1RPWmwiSIg","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[23:53:12 INF] Response (Duration: 23ms): API: POST /hubs/chat/negotiate
StatusCode: 200
Body:
{
  "negotiateVersion": 1,
  "connectionId": "DQC92Z_ELYz0vs41ln6sIg",
  "connectionToken": "Av1uDYtr0cHQTx2uXmbeSQ",
  "availableTransports": [
    {
      "transport": "WebSockets",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    },
    {
      "transport": "ServerSentEvents",
      "transferFormats": [
        "Text"
      ]
    },
    {
      "transport": "LongPolling",
      "transferFormats": [
        "Text",
        "Binary"
      ]
    }
  ]
}
[23:53:12 DBG] Connection id "0HNCQ37DKFO13" completed keep alive response.
[23:53:12 INF] HTTP 200 returned for POST /hubs/chat/negotiate
[23:53:12 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 93.0654ms
[23:53:12 DBG] Response Body: {"negotiateVersion":1,"connectionId":"DQC92Z_ELYz0vs41ln6sIg","connectionToken":"Av1uDYtr0cHQTx2uXmbeSQ","availableTransports":[{"transport":"WebSockets","transferFormats":["Text","Binary"]},{"transport":"ServerSentEvents","transferFormats":["Text"]},{"transport":"LongPolling","transferFormats":["Text","Binary"]}]}
[23:53:12 DBG] Connection id "0HNCQ37DKFO14" accepted.
[23:53:12 DBG] Connection id "0HNCQ37DKFO0V" completed keep alive response.
[23:53:12 DBG] Connection id "0HNCQ37DKFO14" started.
[23:53:12 INF] Request finished HTTP/1.1 POST http://localhost:5295/hubs/chat/negotiate?negotiateVersion=1 - 200 316 application/json 118.4309ms
[23:53:12 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=q6Ov1nvoK9Lj1RPWmwiSIg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI - null null
[23:53:12 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[23:53:12 DBG] Request matched endpoint '/hubs/chat'
[23:53:12 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:12 INF] CORS policy execution successful.
[23:53:12 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:12 INF] HTTP GET /hubs/chat?id=q6Ov1nvoK9Lj1RPWmwiSIg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI received from ::1
[23:53:12 DBG] Header: Connection=["Upgrade"]
[23:53:12 DBG] Header: Host=["localhost:5295"]
[23:53:12 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:12 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:12 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:12 DBG] Header: Cache-Control=["no-cache"]
[23:53:12 DBG] Header: Origin=["http://localhost:3000"]
[23:53:12 DBG] Header: Pragma=["no-cache"]
[23:53:12 DBG] Header: Upgrade=["websocket"]
[23:53:12 DBG] Header: Sec-WebSocket-Version=["13"]
[23:53:12 DBG] Header: Sec-WebSocket-Key=["wUbp/4Pd///lVGh+hemY4w=="]
[23:53:12 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[23:53:12 INF] Request: URL: http://localhost:5295/hubs/chat?id=q6Ov1nvoK9Lj1RPWmwiSIg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
Authenticated: Yes
Query Parameters:
  id: q6Ov1nvoK9Lj1RPWmwiSIg
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
[23:53:12 DBG] Successfully validated the token.
[23:53:12 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:53:12 DBG] Authorization was successful.
[23:53:12 INF] Executing endpoint '/hubs/chat'
[23:53:12 DBG] Establishing new connection.
[23:53:12 DBG] OnConnectedAsync started.
[23:53:12 DBG] Socket opened using Sub-Protocol: 'null'.
[23:53:12 DBG] Found protocol implementation for requested protocol: json.
[23:53:12 DBG] Completed connection handshake. Using HubProtocol 'json'.
[23:53:12 DBG] Connection id "0HNCQ37DKFO15" accepted.
[23:53:12 DBG] Connection id "0HNCQ37DKFO15" started.
[23:53:12 INF] Request starting HTTP/1.1 GET http://localhost:5295/hubs/chat?id=Av1uDYtr0cHQTx2uXmbeSQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI - null null
[23:53:12 DBG] 1 candidate(s) found for the request path '/hubs/chat'
[23:53:12 DBG] Request matched endpoint '/hubs/chat'
[23:53:12 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:12 INF] CORS policy execution successful.
[23:53:12 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:12 INF] HTTP GET /hubs/chat?id=Av1uDYtr0cHQTx2uXmbeSQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI received from ::1
[23:53:12 DBG] Header: Connection=["Upgrade"]
[23:53:12 DBG] Header: Host=["localhost:5295"]
[23:53:12 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:12 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:12 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:12 DBG] Header: Cache-Control=["no-cache"]
[23:53:12 DBG] Header: Origin=["http://localhost:3000"]
[23:53:12 DBG] Header: Pragma=["no-cache"]
[23:53:12 DBG] Header: Upgrade=["websocket"]
[23:53:12 DBG] Header: Sec-WebSocket-Version=["13"]
[23:53:12 DBG] Header: Sec-WebSocket-Key=["nTxHpUEW2lmRTRjfc9Vcbw=="]
[23:53:12 DBG] Header: Sec-WebSocket-Extensions=["permessage-deflate; client_max_window_bits"]
[23:53:12 INF] Request: URL: http://localhost:5295/hubs/chat?id=Av1uDYtr0cHQTx2uXmbeSQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
Authenticated: Yes
Query Parameters:
  id: Av1uDYtr0cHQTx2uXmbeSQ
  access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
[23:53:12 DBG] Successfully validated the token.
[23:53:12 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:53:12 DBG] Authorization was successful.
[23:53:12 INF] Executing endpoint '/hubs/chat'
[23:53:12 DBG] Establishing new connection.
[23:53:12 DBG] OnConnectedAsync started.
[23:53:12 DBG] Socket opened using Sub-Protocol: 'null'.
[23:53:12 DBG] Found protocol implementation for requested protocol: json.
[23:53:12 DBG] Completed connection handshake. Using HubProtocol 'json'.
[23:53:20 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[23:53:20 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[23:53:20 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:53:20 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:53:20 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:53:20 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:53:20 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:20 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:20 INF] CORS policy execution successful.
[23:53:20 INF] CORS policy execution successful.
[23:53:20 DBG] The request is a preflight request.
[23:53:20 DBG] The request is a preflight request.
[23:53:20 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:53:20 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:53:20 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 204 null null 33.49ms
[23:53:20 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 204 null null 33.5832ms
[23:53:20 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[23:53:20 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:53:20 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:53:20 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:20 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:20 INF] CORS policy execution successful.
[23:53:20 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:20 INF] HTTP GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 received from ::1
[23:53:20 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:53:20 DBG] Header: Connection=["keep-alive"]
[23:53:20 DBG] Header: Host=["localhost:5295"]
[23:53:20 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:20 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:20 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:20 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI"]
[23:53:20 DBG] Header: Origin=["http://localhost:3000"]
[23:53:20 DBG] Header: Referer=["http://localhost:3000/"]
[23:53:20 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:53:20 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:53:20 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:53:20 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:53:20 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:53:20 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:53:20 INF] Request: URL: http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
Query Parameters:
  page: 1
  pageSize: 20
[23:53:20 DBG] Successfully validated the token.
[23:53:20 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:53:20 DBG] Authorization was successful.
[23:53:20 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:20 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[23:53:20 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:53:20 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:53:20 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:53:20 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:53:20 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:53:20 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:53:20 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:53:20 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[23:53:20 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[23:53:20 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:53:20 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:53:20 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[23:53:20 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[23:53:20 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[23:53:20 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[23:53:20 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:53:20 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:53:20 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[23:53:20 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[23:53:20 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[23:53:21 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[23:53:21 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:53:21 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:53:21 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[23:53:21 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[23:53:21 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[23:53:21 INF] Executed DbCommand (647ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[23:53:21 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 663.0931ms.
[23:53:21 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:53:21 DBG] No information found on request to perform content negotiation.
[23:53:21 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[23:53:21 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[23:53:21 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:53:21 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[23:53:21 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 720.8534ms
[23:53:21 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:21 INF] Response (Duration: 742ms): API: GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "fe0c9c4c-435f-4f9f-a3bf-68ed0b8edc03",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u0111i ng\u1EE7 ch\u01B0a",
      "SentAt": "2025-05-23T16:52:34.1369741",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "86180596-5222-4d6c-9bb7-17724f336ac8",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u0111i ng\u1EE7 ch\u01B0a",
      "SentAt": "2025-05-23T16:52:33.5918121",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "da8a6fc1-6098-43e9-9860-4603b5e49ef4",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "h\u1ECFi n\u00E8",
      "SentAt": "2025-05-23T16:42:54.2883183",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fb1539bd-a4ca-43b6-8b52-61c93e8d4196",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "h\u1ECFi n\u00E8",
      "SentAt": "2025-05-23T16:42:29.0977041",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "96334ad5-9f39-4be8-9e06-0835033617dd",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:47.2499887",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6cca47b1-7a49-45bc-80df-15637582dc8f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:46.6100241",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6449b592-d74b-46b4-8aec-158e6258020c",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:25.1446238",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fbcef994-c640-4c95-883d-3734389c1af6",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:23.8157184",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 20,
  "Page": 1,
  "PageSize": 20
}
[23:53:21 INF] HTTP 200 returned for GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
[23:53:21 DBG] Response Body: {"Messages":[{"MessageId":"fe0c9c4c-435f-4f9f-a3bf-68ed0b8edc03","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"đi ngủ chưa","SentAt":"2025-05-23T16:52:34.1369741","IsRead":false,"Media":[]},{"MessageId":"86180596-5222-4d6c-9bb7-17724f336ac8","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"đi ngủ chưa","SentAt":"2025-05-23T16:52:33.5918121","IsRead":false,"Media":[]},{"MessageId":"da8a6fc1-6098-43e9-9860-4603b5e49ef4","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"hỏi nè","SentAt":"2025-05-23T16:42:54.2883183","IsRead":false,"Media":[]},{"MessageId":"fb1539bd-a4ca-43b6-8b52-61c93e8d4196","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"hỏi nè","SentAt":"2025-05-23T16:42:29.0977041","IsRead":false,"Media":[]},{"MessageId":"96334ad5-9f39-4be8-9e06-0835033617dd","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:47.2499887","IsRead":false,"Media":[]},{"MessageId":"6cca47b1-7a49-45bc-80df-15637582dc8f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:46.6100241","IsRead":false,"Media":[]},{"MessageId":"6449b592-d74b-46b4-8aec-158e6258020c","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:25.1446238","IsRead":false,"Media":[]},{"MessageId":"fbcef994-c640-4c95-883d-3734389c1af6","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:23.8157184","IsRead":false,"Media":[]},{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]}],"TotalCount":20,"Page":1,"PageSize":20}
[23:53:21 DBG] Connection id "0HNCQ37DKFO11" completed keep alive response.
[23:53:21 INF] Request starting HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - null null
[23:53:21 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 200 null application/json; charset=utf-8 798.4037ms
[23:53:21 DBG] 1 candidate(s) found for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:53:21 DBG] Endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)' with route pattern 'api/messages/user/{receiverId}' is valid for the request path '/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56'
[23:53:21 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:21 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:21 INF] CORS policy execution successful.
[23:53:21 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:21 INF] HTTP GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 received from ::1
[23:53:21 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:53:21 DBG] Header: Connection=["keep-alive"]
[23:53:21 DBG] Header: Host=["localhost:5295"]
[23:53:21 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:21 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:21 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:21 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI"]
[23:53:21 DBG] Header: Origin=["http://localhost:3000"]
[23:53:21 DBG] Header: Referer=["http://localhost:3000/"]
[23:53:21 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:53:21 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:53:21 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:53:21 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:53:21 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:53:21 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:53:21 INF] Request: URL: http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
Path Parameters:
  action: GetMessagesWithUser
  controller: Message
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
Query Parameters:
  page: 1
  pageSize: 20
[23:53:21 DBG] Successfully validated the token.
[23:53:21 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:53:21 DBG] Authorization was successful.
[23:53:21 INF] Executing endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:21 INF] Route matched with {action = "GetMessagesWithUser", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.PagedMessageDto]] GetMessagesWithUser(System.Guid, Int32, Int32) on controller SMedia.Controllers.MessageController (SMedia).
[23:53:21 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:53:21 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:53:21 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:53:21 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:53:21 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:53:21 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:53:21 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:53:21 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' ...
[23:53:21 DBG] Attempting to bind parameter 'receiverId' of type 'System.Guid' using the name 'receiverId' in request data ...
[23:53:21 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:53:21 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Guid'.
[23:53:21 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Guid' ...
[23:53:21 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Guid'.
[23:53:21 DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
[23:53:21 DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
[23:53:21 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:53:21 DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
[23:53:21 DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
[23:53:21 DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
[23:53:21 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
[23:53:21 DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
[23:53:21 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:53:21 DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
[23:53:21 DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
[23:53:21 DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
[23:53:21 INF] Executing action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) - Validation state: "Valid"
[23:53:22 INF] Executed DbCommand (540ms) [Parameters=[@__senderId_0='?' (DbType = Guid), @__receiverId_1='?' (DbType = Guid), @__receiverId_2='?' (DbType = Guid), @__senderId_3='?' (DbType = Guid), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[MessageId], [t].[Content], [t].[GroupChatId], [t].[IsRead], [t].[IsVisible], [t].[ReceiverId], [t].[SenderId], [t].[SentAt], [u].[UserId], [u].[Birthday], [u].[DeletedUserEmail], [u].[Email], [u].[FullName], [u].[Gender], [u].[Image], [u].[Intro], [u].[JoinedAt], [u].[PasswordHash], [u].[Status], [u].[Username], [m0].[MediaId], [m0].[MediaType], [m0].[MediaUrl], [m0].[MessageId], [m0].[PostId], [m0].[UploadedAt], [m0].[UploadedBy]
FROM (
    SELECT [m].[MessageId], [m].[Content], [m].[GroupChatId], [m].[IsRead], [m].[IsVisible], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
    FROM [Messages] AS [m]
    WHERE ([m].[SenderId] = @__senderId_0 AND [m].[ReceiverId] = @__receiverId_1) OR ([m].[SenderId] = @__receiverId_2 AND [m].[ReceiverId] = @__senderId_3)
    ORDER BY [m].[SentAt] DESC
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[UserId]
LEFT JOIN [Media] AS [m0] ON [t].[MessageId] = [m0].[MessageId]
ORDER BY [t].[SentAt] DESC, [t].[MessageId], [u].[UserId]
[23:53:22 INF] Executed action method SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 558.3648ms.
[23:53:22 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:53:22 DBG] No information found on request to perform content negotiation.
[23:53:22 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[23:53:22 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[23:53:22 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:53:22 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.PagedMessageDto'.
[23:53:22 INF] Executed action SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia) in 639.5191ms
[23:53:22 INF] Executed endpoint 'SMedia.Controllers.MessageController.GetMessagesWithUser (SMedia)'
[23:53:22 INF] Response (Duration: 663ms): API: GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
StatusCode: 200
Body:
{
  "Messages": [
    {
      "MessageId": "fe0c9c4c-435f-4f9f-a3bf-68ed0b8edc03",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u0111i ng\u1EE7 ch\u01B0a",
      "SentAt": "2025-05-23T16:52:34.1369741",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "86180596-5222-4d6c-9bb7-17724f336ac8",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u0111i ng\u1EE7 ch\u01B0a",
      "SentAt": "2025-05-23T16:52:33.5918121",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "da8a6fc1-6098-43e9-9860-4603b5e49ef4",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "h\u1ECFi n\u00E8",
      "SentAt": "2025-05-23T16:42:54.2883183",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fb1539bd-a4ca-43b6-8b52-61c93e8d4196",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "h\u1ECFi n\u00E8",
      "SentAt": "2025-05-23T16:42:29.0977041",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "96334ad5-9f39-4be8-9e06-0835033617dd",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:47.2499887",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6cca47b1-7a49-45bc-80df-15637582dc8f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "\u0111\u00E3 th\u00E0nh c\u00F4ng r\u1ED3i",
      "SentAt": "2025-05-23T15:52:46.6100241",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "6449b592-d74b-46b4-8aec-158e6258020c",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:25.1446238",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fbcef994-c640-4c95-883d-3734389c1af6",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "th\u00E0nh c\u00F4ng ch\u01B0a",
      "SentAt": "2025-05-23T15:52:23.8157184",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "182bd0b7-ac65-4df8-865b-e3cbf92f2a66",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:59.3372603",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "9ba57b0b-10ad-4b0c-a59b-20d826d9eccb",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "\u00E0SFASDF",
      "SentAt": "2025-05-23T15:50:57.7553443",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "85322251-0fcc-464e-b9b0-adcf7d80b50b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:31.1951068",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "c9c7f6b1-285e-428d-91a4-48038adcd253",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "adsfasfdas",
      "SentAt": "2025-05-23T15:50:29.9595798",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "93c98ce8-2a00-4986-8350-708d87280bdc",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "ABC",
      "SentAt": "2025-05-23T15:43:09.3835458",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2e7440ef-b8e2-45ba-865d-7390ea4454a1",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "qqqqq",
      "SentAt": "2025-05-23T15:39:24.3428948",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "eb0bd699-dfc0-454b-b4e7-2b071628b941",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "aaaaaaaa",
      "SentAt": "2025-05-23T15:32:37.5627834",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "2bf8bb73-7e6b-4ded-905b-3ef139587520",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hi",
      "SentAt": "2025-05-23T15:18:10.8572317",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "8ed9374a-49de-4839-b19a-22a2e8945a15",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh",
      "SentAt": "2025-05-23T15:08:24.959476",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "e820a55b-464e-463c-8a4b-ee855b0718aa",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hahaah",
      "SentAt": "2025-05-23T15:04:38.5720538",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b",
      "SenderId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "SenderUsername": "anh01",
      "ReceiverId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "GroupChatId": null,
      "Content": "hehehe",
      "SentAt": "2025-05-23T14:54:34.5832849",
      "IsRead": false,
      "Media": []
    },
    {
      "MessageId": "390d469d-452a-4dbd-8128-6a5875f8279f",
      "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
      "SenderUsername": "anhwork",
      "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
      "GroupChatId": null,
      "Content": "b\u1EA1n kh\u1ECFe kh\u00F4ng",
      "SentAt": "2025-05-23T14:46:41.0032011",
      "IsRead": false,
      "Media": []
    }
  ],
  "TotalCount": 20,
  "Page": 1,
  "PageSize": 20
}
[23:53:22 INF] HTTP 200 returned for GET /api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
[23:53:22 DBG] Response Body: {"Messages":[{"MessageId":"fe0c9c4c-435f-4f9f-a3bf-68ed0b8edc03","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"đi ngủ chưa","SentAt":"2025-05-23T16:52:34.1369741","IsRead":false,"Media":[]},{"MessageId":"86180596-5222-4d6c-9bb7-17724f336ac8","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"đi ngủ chưa","SentAt":"2025-05-23T16:52:33.5918121","IsRead":false,"Media":[]},{"MessageId":"da8a6fc1-6098-43e9-9860-4603b5e49ef4","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"hỏi nè","SentAt":"2025-05-23T16:42:54.2883183","IsRead":false,"Media":[]},{"MessageId":"fb1539bd-a4ca-43b6-8b52-61c93e8d4196","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"hỏi nè","SentAt":"2025-05-23T16:42:29.0977041","IsRead":false,"Media":[]},{"MessageId":"96334ad5-9f39-4be8-9e06-0835033617dd","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:47.2499887","IsRead":false,"Media":[]},{"MessageId":"6cca47b1-7a49-45bc-80df-15637582dc8f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đã thành công rồi","SentAt":"2025-05-23T15:52:46.6100241","IsRead":false,"Media":[]},{"MessageId":"6449b592-d74b-46b4-8aec-158e6258020c","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:25.1446238","IsRead":false,"Media":[]},{"MessageId":"fbcef994-c640-4c95-883d-3734389c1af6","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"thành công chưa","SentAt":"2025-05-23T15:52:23.8157184","IsRead":false,"Media":[]},{"MessageId":"182bd0b7-ac65-4df8-865b-e3cbf92f2a66","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:59.3372603","IsRead":false,"Media":[]},{"MessageId":"9ba57b0b-10ad-4b0c-a59b-20d826d9eccb","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"àSFASDF","SentAt":"2025-05-23T15:50:57.7553443","IsRead":false,"Media":[]},{"MessageId":"85322251-0fcc-464e-b9b0-adcf7d80b50b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:31.1951068","IsRead":false,"Media":[]},{"MessageId":"c9c7f6b1-285e-428d-91a4-48038adcd253","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"adsfasfdas","SentAt":"2025-05-23T15:50:29.9595798","IsRead":false,"Media":[]},{"MessageId":"93c98ce8-2a00-4986-8350-708d87280bdc","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"ABC","SentAt":"2025-05-23T15:43:09.3835458","IsRead":false,"Media":[]},{"MessageId":"2e7440ef-b8e2-45ba-865d-7390ea4454a1","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"qqqqq","SentAt":"2025-05-23T15:39:24.3428948","IsRead":false,"Media":[]},{"MessageId":"eb0bd699-dfc0-454b-b4e7-2b071628b941","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"aaaaaaaa","SentAt":"2025-05-23T15:32:37.5627834","IsRead":false,"Media":[]},{"MessageId":"2bf8bb73-7e6b-4ded-905b-3ef139587520","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hi","SentAt":"2025-05-23T15:18:10.8572317","IsRead":false,"Media":[]},{"MessageId":"8ed9374a-49de-4839-b19a-22a2e8945a15","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh","SentAt":"2025-05-23T15:08:24.959476","IsRead":false,"Media":[]},{"MessageId":"e820a55b-464e-463c-8a4b-ee855b0718aa","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hahaah","SentAt":"2025-05-23T15:04:38.5720538","IsRead":false,"Media":[]},{"MessageId":"fa2eebae-22c8-44fe-9a10-2f1cb2fd2e4b","SenderId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","SenderUsername":"anh01","ReceiverId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","GroupChatId":null,"Content":"hehehe","SentAt":"2025-05-23T14:54:34.5832849","IsRead":false,"Media":[]},{"MessageId":"390d469d-452a-4dbd-8128-6a5875f8279f","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":"anhwork","ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"bạn khỏe không","SentAt":"2025-05-23T14:46:41.0032011","IsRead":false,"Media":[]}],"TotalCount":20,"Page":1,"PageSize":20}
[23:53:22 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:53:22 INF] Request finished HTTP/1.1 GET http://localhost:5295/api/messages/user/f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56?page=1&pageSize=20 - 200 null application/json; charset=utf-8 727.3145ms
[23:53:29 DBG] Received hub invocation: InvocationMessage { InvocationId: "0", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:53:29 DBG] Received hub invocation: InvocationMessage { InvocationId: "1", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:53:29 DBG] Received hub invocation: InvocationMessage { InvocationId: "2", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, True ], StreamIds: [  ] }.
[23:53:32 DBG] Received hub invocation: InvocationMessage { InvocationId: "3", Target: "SendMessageToUser", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, đi ngủ rồi ], StreamIds: [  ] }.
[23:53:33 INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[23:53:33 INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[23:53:33 INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91i+ng%E1%BB%A7+r%E1%BB%93i - null null
[23:53:33 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[23:53:33 DBG] Request matched endpoint '405 HTTP Method Not Supported'
[23:53:33 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:33 INF] CORS policy execution successful.
[23:53:33 DBG] The request is a preflight request.
[23:53:33 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:53:33 INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91i+ng%E1%BB%A7+r%E1%BB%93i - 204 null null 23.629ms
[23:53:33 INF] Request starting HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91i+ng%E1%BB%A7+r%E1%BB%93i - application/x-www-form-urlencoded 0
[23:53:33 DBG] 1 candidate(s) found for the request path '/api/messages/send-message'
[23:53:33 DBG] Endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)' with route pattern 'api/messages/send-message' is valid for the request path '/api/messages/send-message'
[23:53:33 DBG] Request matched endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:53:33 DBG] The request has an origin header: 'http://localhost:3000'.
[23:53:33 INF] CORS policy execution successful.
[23:53:33 DBG] Static files was skipped as the request already matched an endpoint.
[23:53:33 INF] HTTP POST /api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91i+ng%E1%BB%A7+r%E1%BB%93i received from ::1
[23:53:33 DBG] Header: Accept=["application/json, text/plain, */*"]
[23:53:33 DBG] Header: Connection=["keep-alive"]
[23:53:33 DBG] Header: Host=["localhost:5295"]
[23:53:33 DBG] Header: User-Agent=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0"]
[23:53:33 DBG] Header: Accept-Encoding=["gzip, deflate, br, zstd"]
[23:53:33 DBG] Header: Accept-Language=["en-US,en;q=0.9"]
[23:53:33 DBG] Header: Authorization=["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI"]
[23:53:33 DBG] Header: Content-Type=["application/x-www-form-urlencoded"]
[23:53:33 DBG] Header: Origin=["http://localhost:3000"]
[23:53:33 DBG] Header: Referer=["http://localhost:3000/"]
[23:53:33 DBG] Header: Content-Length=["0"]
[23:53:33 DBG] Header: sec-ch-ua-platform=["\"Windows\""]
[23:53:33 DBG] Header: sec-ch-ua=["\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\""]
[23:53:33 DBG] Header: sec-ch-ua-mobile=["?0"]
[23:53:33 DBG] Header: Sec-Fetch-Site=["same-site"]
[23:53:33 DBG] Header: Sec-Fetch-Mode=["cors"]
[23:53:33 DBG] Header: Sec-Fetch-Dest=["empty"]
[23:53:33 INF] Request: URL: http://localhost:5295/api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91i+ng%E1%BB%A7+r%E1%BB%93i
Authenticated: Yes
Token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI
Path Parameters:
  action: SendMessage
  controller: Message
Query Parameters:
  senderId: e60a6ec4-2820-4aec-933d-d763d81b7cb2
  receiverId: f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56
  content: đi ngủ rồi
[23:53:33 DBG] Successfully validated the token.
[23:53:33 DBG] AuthenticationScheme: Bearer was successfully authenticated.
[23:53:33 DBG] Authorization was successful.
[23:53:33 INF] Executing endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:53:33 INF] Route matched with {action = "SendMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Application.DTOs.MessageDto]] SendMessage(System.Guid, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.Collections.Generic.List`1[System.String]) on controller SMedia.Controllers.MessageController (SMedia).
[23:53:33 DBG] Execution plan of authorization filters (in the following order): ["None"]
[23:53:33 DBG] Execution plan of resource filters (in the following order): ["None"]
[23:53:33 DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
[23:53:33 DBG] Execution plan of exception filters (in the following order): ["None"]
[23:53:33 DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
[23:53:33 DBG] Executing controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:53:33 DBG] Executed controller factory for controller SMedia.Controllers.MessageController (SMedia)
[23:53:33 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' ...
[23:53:33 DBG] Attempting to bind parameter 'senderId' of type 'System.Guid' using the name 'senderId' in request data ...
[23:53:33 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[23:53:33 DBG] Done attempting to bind parameter 'senderId' of type 'System.Guid'.
[23:53:33 DBG] Attempting to validate the bound parameter 'senderId' of type 'System.Guid' ...
[23:53:33 DBG] Done attempting to validate the bound parameter 'senderId' of type 'System.Guid'.
[23:53:33 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[23:53:33 DBG] Attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' using the name 'receiverId' in request data ...
[23:53:33 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:53:33 DBG] Done attempting to bind parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:53:33 DBG] Attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]' ...
[23:53:33 DBG] Done attempting to validate the bound parameter 'receiverId' of type 'System.Nullable`1[System.Guid]'.
[23:53:33 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[23:53:33 DBG] Attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' using the name '' in request data ...
[23:53:33 DBG] Could not find a value in the request with name '' for binding parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:53:33 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:53:33 DBG] Done attempting to bind parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:53:33 DBG] Attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]' ...
[23:53:33 DBG] Done attempting to validate the bound parameter 'groupChatId' of type 'System.Nullable`1[System.Guid]'.
[23:53:33 DBG] Attempting to bind parameter 'content' of type 'System.String' ...
[23:53:33 DBG] Attempting to bind parameter 'content' of type 'System.String' using the name 'content' in request data ...
[23:53:33 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[23:53:33 DBG] Done attempting to bind parameter 'content' of type 'System.String'.
[23:53:33 DBG] Attempting to validate the bound parameter 'content' of type 'System.String' ...
[23:53:33 DBG] Done attempting to validate the bound parameter 'content' of type 'System.String'.
[23:53:33 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[23:53:33 DBG] Attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' using the name '' in request data ...
[23:53:33 DBG] Could not bind to collection using a format like =value1&=value2
[23:53:33 DBG] Attempting to bind model using indices. Example formats include: [0]=value1&[1]=value2, [0]=value1&[1]=value2, .index=zero&.index=one&[zero]=value1&[one]=value2
[23:53:33 DBG] Attempting to bind model of type 'System.String' using the name '[0]' in request data ...
[23:53:33 DBG] Could not find a value in the request with name '[0]' of type 'System.String'.
[23:53:33 DBG] Done attempting to bind model of type 'System.String' using the name '[0]'.
[23:53:33 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:53:33 DBG] Done attempting to bind parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:53:33 DBG] Attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]' ...
[23:53:33 DBG] Done attempting to validate the bound parameter 'mediaUrls' of type 'System.Collections.Generic.List`1[System.String]'.
[23:53:33 INF] Executing action method SMedia.Controllers.MessageController.SendMessage (SMedia) - Validation state: "Valid"
[23:53:33 INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([MessageId], [Content], [GroupChatId], [IsRead], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[IsVisible]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
[23:53:33 INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 50), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([NotificationId], [IsRead], [NotifiedAt], [RelatedMessageId], [RelatedPostId], [RelatedUserId], [Type], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
[23:53:33 INF] Executed action method SMedia.Controllers.MessageController.SendMessage (SMedia), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.8407ms.
[23:53:33 DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
[23:53:33 DBG] No information found on request to perform content negotiation.
[23:53:33 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
[23:53:33 DBG] Attempting to select the first formatter in the output formatters list which can write the result.
[23:53:33 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
[23:53:33 INF] Executing OkObjectResult, writing value of type 'Application.DTOs.MessageDto'.
[23:53:33 INF] Executed action SMedia.Controllers.MessageController.SendMessage (SMedia) in 172.9094ms
[23:53:33 INF] Executed endpoint 'SMedia.Controllers.MessageController.SendMessage (SMedia)'
[23:53:33 INF] Response (Duration: 191ms): API: POST /api/messages/send-message
StatusCode: 200
Body:
{
  "MessageId": "607d2f28-e99e-4a0b-b4e7-9409551a5959",
  "SenderId": "e60a6ec4-2820-4aec-933d-d763d81b7cb2",
  "SenderUsername": null,
  "ReceiverId": "f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56",
  "GroupChatId": null,
  "Content": "\u0111i ng\u1EE7 r\u1ED3i",
  "SentAt": "2025-05-23T16:53:33.2429822Z",
  "IsRead": false,
  "Media": []
}
[23:53:33 INF] HTTP 200 returned for POST /api/messages/send-message
[23:53:33 DBG] Response Body: {"MessageId":"607d2f28-e99e-4a0b-b4e7-9409551a5959","SenderId":"e60a6ec4-2820-4aec-933d-d763d81b7cb2","SenderUsername":null,"ReceiverId":"f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56","GroupChatId":null,"Content":"đi ngủ rồi","SentAt":"2025-05-23T16:53:33.2429822Z","IsRead":false,"Media":[]}
[23:53:33 DBG] Connection id "0HNCQ37DKFO0U" completed keep alive response.
[23:53:33 INF] Request finished HTTP/1.1 POST http://localhost:5295/api/messages/send-message?senderId=e60a6ec4-2820-4aec-933d-d763d81b7cb2&receiverId=f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56&content=%C4%91i+ng%E1%BB%A7+r%E1%BB%93i - 200 null application/json; charset=utf-8 240.365ms
[23:53:33 DBG] Received hub invocation: InvocationMessage { InvocationId: "4", Target: "SendTyping", Arguments: [ f49cbe12-04fe-499a-aa6c-3d6e1a6f6d56, False ], StreamIds: [  ] }.
[23:53:59 DBG] Connection id "0HNCQ37DKFO0V" received FIN.
[23:53:59 DBG] Connection id "0HNCQ37DKFO13" received FIN.
[23:53:59 DBG] Connection id "0HNCQ37DKFO11" received FIN.
[23:53:59 DBG] Connection id "0HNCQ37DKFO0V" disconnecting.
[23:53:59 DBG] Connection id "0HNCQ37DKFO0U" received FIN.
[23:53:59 DBG] Connection id "0HNCQ37DKFO13" disconnecting.
[23:53:59 DBG] Connection id "0HNCQ37DKFO11" disconnecting.
[23:53:59 DBG] Connection id "0HNCQ37DKFO0V" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:53:59 DBG] Connection id "0HNCQ37DKFO0U" disconnecting.
[23:53:59 DBG] Connection id "0HNCQ37DKFO13" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:53:59 DBG] Connection id "0HNCQ37DKFO11" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:53:59 DBG] Connection id "0HNCQ37DKFO0V" stopped.
[23:53:59 DBG] Connection id "0HNCQ37DKFO0U" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:53:59 DBG] Connection id "0HNCQ37DKFO13" stopped.
[23:53:59 DBG] Connection id "0HNCQ37DKFO11" stopped.
[23:53:59 DBG] Connection id "0HNCQ37DKFO0U" stopped.
[23:54:55 INF] Application is shutting down...
[23:54:55 DBG] Hosting stopping
[23:54:55 DBG] Waiting for the application to finish sending data.
[23:54:55 DBG] Waiting for the application to finish sending data.
[23:54:55 DBG] Waiting for the application to finish sending data.
[23:54:55 DBG] Waiting for the application to finish sending data.
[23:54:55 DBG] Socket closed.
[23:54:55 DBG] Socket closed.
[23:54:55 DBG] Socket closed.
[23:54:55 DBG] Socket closed.
[23:54:55 DBG] OnConnectedAsync ending.
[23:54:55 DBG] OnConnectedAsync ending.
[23:54:55 DBG] OnConnectedAsync ending.
[23:54:55 DBG] OnConnectedAsync ending.
[23:54:55 DBG] Removing connection Av1uDYtr0cHQTx2uXmbeSQ from the list of connections.
[23:54:55 DBG] Removing connection q6Ov1nvoK9Lj1RPWmwiSIg from the list of connections.
[23:54:55 INF] Executed endpoint '/hubs/chat'
[23:54:55 INF] Executed endpoint '/hubs/chat'
[23:54:55 DBG] Removing connection sjPtgrdbOSl_gsFoo8MRtA from the list of connections.
[23:54:55 INF] Executed endpoint '/hubs/chat'
[23:54:55 DBG] Removing connection f9ucBJr3GwFnfOP2naAHvQ from the list of connections.
[23:54:55 INF] Response (Duration: 102539ms): API: GET /hubs/chat
StatusCode: 101
[23:54:55 INF] Response (Duration: 102595ms): API: GET /hubs/chat
StatusCode: 101
[23:54:55 INF] Response (Duration: 175225ms): API: GET /hubs/chat
StatusCode: 101
[23:54:55 INF] Executed endpoint '/hubs/chat'
[23:54:55 INF] HTTP 101 returned for GET /hubs/chat
[23:54:55 INF] HTTP 101 returned for GET /hubs/chat
[23:54:55 INF] HTTP 101 returned for GET /hubs/chat
[23:54:55 INF] Response (Duration: 112190ms): API: GET /hubs/chat
StatusCode: 101
[23:54:55 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=Av1uDYtr0cHQTx2uXmbeSQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI - 101 null null 102587.7061ms
[23:54:55 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=q6Ov1nvoK9Lj1RPWmwiSIg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI - 101 null null 102642.3555ms
[23:54:55 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=sjPtgrdbOSl_gsFoo8MRtA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZjQ5Y2JlMTItMDRmZS00OTlhLWFhNmMtM2Q2ZTFhNmY2ZDU2IiwidXNlcm5hbWUiOiJhbmgwMSIsImltYWdlIjoiaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGFwdnZkeHc3L2ltYWdlL3VwbG9hZC92MTc0NzE1OTYzNi9hdmF0YXJfbDJyd3RoLmpwZyIsImV4cCI6MTc1MDYxMTExOSwiaXNzIjoiTXlBcHAiLCJhdWQiOiJNeUNsaWVudEFwcCJ9.1efafKo3WD8rvsRzBmCNYHGM3IC1s2fhUBhTf-tLtQA - 101 null null 175273.5267ms
[23:54:55 INF] HTTP 101 returned for GET /hubs/chat
[23:54:55 DBG] Connection id "0HNCQ37DKFO15" disconnecting.
[23:54:55 DBG] Connection id "0HNCQ37DKFO14" disconnecting.
[23:54:55 DBG] Connection id "0HNCQ37DKFO10" disconnecting.
[23:54:55 INF] Request finished HTTP/1.1 GET http://localhost:5295/hubs/chat?id=f9ucBJr3GwFnfOP2naAHvQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTYwYTZlYzQtMjgyMC00YWVjLTkzM2QtZDc2M2Q4MWI3Y2IyIiwidXNlcm5hbWUiOiJhbmh3b3JrIiwiaW1hZ2UiOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kYXB2dmR4dzcvaW1hZ2UvdXBsb2FkL3YxNzQ3MTU5NjM2L2F2YXRhcl9sMnJ3dGguanBnIiwiZXhwIjoxNzUwNjExMTgzLCJpc3MiOiJNeUFwcCIsImF1ZCI6Ik15Q2xpZW50QXBwIn0.jkniyqeX1Lo3B9YoF9vCOYkvno97JE-pgDJo7Z377AI - 101 null null 112245.6032ms
[23:54:55 DBG] Connection id "0HNCQ37DKFO15" stopped.
[23:54:55 DBG] Connection id "0HNCQ37DKFO14" stopped.
[23:54:55 DBG] Connection id "0HNCQ37DKFO10" stopped.
[23:54:55 DBG] Connection id "0HNCQ37DKFO12" disconnecting.
[23:54:55 DBG] Connection id "0HNCQ37DKFO15" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:54:55 DBG] Connection id "0HNCQ37DKFO14" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:54:55 DBG] Connection id "0HNCQ37DKFO10" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:54:55 DBG] Connection id "0HNCQ37DKFO12" stopped.
[23:54:55 DBG] Connection id "0HNCQ37DKFO12" sending FIN because: "The Socket transport's send loop completed gracefully."
[23:54:55 DBG] Hosting stopped
